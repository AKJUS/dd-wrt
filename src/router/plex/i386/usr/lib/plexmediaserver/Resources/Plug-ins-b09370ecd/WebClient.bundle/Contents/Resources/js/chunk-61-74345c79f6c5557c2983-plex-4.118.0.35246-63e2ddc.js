"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[61,8741],{83325:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var o=r(67294),n=r(12208);const a=(0,o.forwardRef)((function({align:e="none","aria-label":t,color:r="inherit",size:a="inherit",testID:s},i){return o.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,n.J)({align:e,color:r,size:a}),"data-testid":s,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M36.0208 10.3995L26.1213 0.5L24 2.62132L30.3787 9H24C20.4399 9 16.9598 10.0557 13.9997 12.0335C11.0397 14.0114 8.73255 16.8226 7.37018 20.1117C6.0078 23.4008 5.65134 27.02 6.34587 30.5116C7.04041 34.0033 8.75474 37.2106 11.2721 39.7279C13.7894 42.2453 16.9967 43.9596 20.4884 44.6541C23.98 45.3487 27.5992 44.9922 30.8883 43.6298C34.1774 42.2675 36.9886 39.9604 38.9665 37.0003C40.9443 34.0402 42 30.5601 42 27H39C39 29.9667 38.1203 32.8668 36.4721 35.3336C34.8238 37.8003 32.4812 39.7229 29.7403 40.8582C26.9994 41.9935 23.9834 42.2906 21.0737 41.7118C18.1639 41.133 15.4912 39.7044 13.3934 37.6066C11.2956 35.5088 9.86701 32.8361 9.28823 29.9264C8.70945 27.0166 9.0065 24.0006 10.1418 21.2598C11.2771 18.5189 13.1997 16.1762 15.6665 14.528C18.1332 12.8797 21.0333 12 24 12H30.1777L24 18.1777L26.1213 20.299L36.0208 10.3995Z",fill:"currentColor"}))}))},14699:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(22222),n=r(90934);function a(){return(0,o.P1)(((e,{mediaSubscriptionEntityID:t})=>t),n.Z,((e,t)=>t[e]))}},44863:(e,t,r)=>{r.d(t,{Z:()=>y});var o=r(67294),n=r(85479),a=r(56866),s=r(66088);const i={toolbarButton:"ToolbarButton-toolbarButton-PCjB_g",bottomLeft:"ToolbarButton-bottomLeft-V3a71x Tooltip-bottomLeft-ZA9QOY Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipLeftAlignArrow-SYYsix",bottomCenter:"ToolbarButton-bottomCenter-PX024r Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",bottomRight:"ToolbarButton-bottomRight-FvoCX0 Tooltip-bottomRight-wLkq3G Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipRightAlignArrow-jFr4_J",hasFocus:"ToolbarButton-hasFocus-A6zj9p"};var l=Object.defineProperty,c=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class m extends o.Component{render(){const e=this.props,{children:t,tooltip:r,className:s,hasLabel:l,tooltipAttachment:m,hideOnPress:y,onPress:b}=e,f=((e,t)=>{var r={};for(var o in e)p.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&c)for(var o of c(e))t.indexOf(o)<0&&d.call(e,o)&&(r[o]=e[o]);return r})(e,["children","tooltip","className","hasLabel","tooltipAttachment","hideOnPress","onPress"]),g=i[m],v=`${g} ${i.hasFocus}`;return o.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))p.call(t,r)&&u(e,r,t[r]);if(c)for(var r of c(t))d.call(t,r)&&u(e,r,t[r]);return e})({"aria-label":r,className:s,component:n.Z,hideOnPress:y,tooltip:r,tooltipClassName:g,tooltipFocusedClassName:v,onPress:b},f),t)}}m.defaultProps={className:i.toolbarButton,tooltipAttachment:s.eO};const y=m},91569:(e,t,r)=>{r.d(t,{Z:()=>d});var o=r(67294),n=r(71968),a=Object.defineProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function p(e){return o.createElement(n.Z,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))l.call(t,r)&&c(e,r,t[r]);return e})({},e))}p.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const d=p},27929:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(45697),n=r.n(o),a=r(67294);class s extends a.Component{constructor(e,t){super(e,t),this.metricsContext=e.metricsContext}getChildContext(){return{metricsContext:this.metricsContext}}render(){return this.props.children?a.Children.only(this.props.children):null}}s.propTypes={children:n().node,metricsContext:n().string},s.childContextTypes={metricsContext:n().string};const i=s},67635:(e,t,r)=>{r.d(t,{Z:()=>s});var o=r(22222),n=r(89971);function a(e,t){const{playQueueItems:r,currentIndex:o}=e,n=t[r[o]];return n&&n.metadataItem}function s(){return(0,o.P1)((({ui:e})=>e.audioVideoPlayer&&e.audioVideoPlayer.playQueue),(({ui:e})=>e.photoPlayer&&e.photoPlayer.playQueue),((e,{metadataItemEntityID:t})=>t),n.Z,((e,t,r,o)=>{if(!r)return!1;let n,s;return e&&(n=a(e,o)),t&&(s=a(t,o)),n===r||s===r}))}},50061:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Eo});var o=r(67294),n=r(27929),a=r(74309),s=r(38770),i=r(75989),l=r(28216),c=r(22222),p=r(13469),d=r.n(p),u=r(68252),m=r(55885),y=r(76892),b=r(69605),f=r(45399),g=r(27903),v=r(6055),P=r(19755),w=r.n(P),h=r(56442),E=r(40807),S=r(3265),O=r(53145),Z=r(4134),D=r(80962),C=r(96840),I=r(72759),j=r(27082),T=r(84936),x=r(57054),N=Object.defineProperty,k=Object.defineProperties,A=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))L.call(t,r)&&H(e,r,t[r]);if(M)for(var r of M(t))R.call(t,r)&&H(e,r,t[r]);return e};const B="ui/downloadsPage/initDownloadsPage",U="ui/downloadsPage/resetDownloadsPage",V="ui/downloadsPage/fetchProvidersWithStorage",$="ui/downloadsPage/saveDownloadsParams",W=(0,E.Z)(B),F=(0,E.Z)(U),X=(0,E.Z)(V),_=(0,E.Z)($);(0,S.Z)({[B](e,t){},[U](e,t){},[V](e,t,r){const o=function(e){return e.get("ui").get("downloadsPage")}(e),n=e.get("embeddedServer");(0,j.c9)((()=>{o.set({isProvidersPending:!0,providersError:null})}));const a=n.getXHROptions(T.Z.join("/media/providers",{includeStorage:1}),{headers:{Accept:h.AV.accept}});(0,C.Z)("[Downloads] Updating offline file size"),w().ajax(a).then((e=>{n.get("providers").add(e,{parse:!0,merge:!0}),o.set({isProvidersPending:!1,isProvidersPopulated:!0})}),(e=>{o.set({isProvidersPending:!1,providersError:(0,x.Z)(e)})}))},[$](e,t,r){const o=e.get("user").get("experienceSettings").get("savedPivotParams");var n,a;r((0,Z.LN)({savedPivotParams:(n=z({},o),a={downloads:t},k(n,A(a)))}))},[O.Cs](e,t,r){const{activity:o}=t;(function(e,t){const r=e.get("embeddedServer");return!!r&&r.entityID()===t.serverEntityID})(e,t)&&o.type===I.sC&&o.Response.status===D.ly&&r(X())}});var G=r(90934);function K(){return(0,c.P1)((e=>e.downloads.subscriptions),G.Z,((e=[],t)=>e.map((e=>t[e]))))}var Y=r(5562);const{ASCENDING:q,DESCENDING:J}=u.Z.directions,Q="title",ee="createdAt",te="storageTotal";var re=r(75412),oe=r(36637),ne=r(65671),ae=r(85479),se=r(60528),ie=r(90653),le=r(72936),ce=r(58801),pe=r(95815),de=r(78766),ue=r(82598),me=r(14838),ye=r(27599),be=r(89053),fe=r(9220),ge=r(48022),ve=r(90961),Pe=r(7796);const we=parseInt(Pe.Z.downloadCellHeight,10),he=(0,ve.Z)(we,5);var Ee=r(45697),Se=r.n(Ee),Oe=r(72194),Ze=r(50362),De=r(98727),Ce=r(70488),Ie=r(74253),je=r(14699),Te=r(69881),xe=r(99051),Ne=r(51021),ke=r(34082);var Ae=r(90087),Me=r(60208),Le=r(99045),Re=r(94184),He=r.n(Re),ze=r(41542),Be=r(78228),Ue=r(83325),Ve=r(74843),$e=r(73154),We=r(92664),Fe=r(66229),Xe=r(46277),_e=r(85480),Ge=r(4890),Ke=r(63696),Ye=r(64378),qe=r(11956),Je=r(2666),Qe=r(65386),et=r(36230),tt=r(26065),rt=r(67635);const ot=(0,l.$j)((function(){return(0,c.P1)(((e,{isDisabled:t})=>t),(0,rt.Z)(),((e,t)=>({isDisabled:e||t})))}))((e=>{const{isDisabled:t,title:r,onPress:n}=e;return o.createElement(We.u,{tooltip:(0,Y.Z)("Delete")},o.createElement(ze.hU,{"aria-label":(0,Y.Z)("Delete {title}",{title:r}),icon:tt.default,iconSize:"m",isDisabled:t,size:"s",testID:"downloadSubscriptionRemoveButton",transparent:!0,onPress:n}))}));var nt=r(72369);const at=function(e){return(0,nt.Z)(e||0,e>=1e9?2:0)};var st=r(46453),it=r(90701);var lt=Object.defineProperty,ct=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mt=Object.defineProperty,yt=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Pt=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const wt=(0,c.P1)(ke.Z,(e=>(0,Ie.h)(e))),ht=(0,c.P1)(ke.Z,De.Z,((e,t)=>e&&e.providers.map((e=>t[e])))),Et=new RegExp(ee),St=new RegExp(te),Ot=(0,l.$j)((function(){return(0,c.P1)(((e,{activeSort:t})=>t),((e,{listContext:t})=>t),wt,(0,Oe.Z)((0,c.P1)((0,je.Z)(),ht,((e,t)=>{const{source:r}=e.hint,o=t.find((e=>e.source===r));return(0,Ce.R)(o)})),(e=>e)),(0,je.Z)(),(0,c.P1)(Ze.Z,(0,je.Z)(),((e,t)=>t.target?e[t.target.metadata]:null)),(e=I.EW,(0,c.P1)((0,je.Z)(),(0,Ne.Z)(e),((e,t)=>t.find((({Context:t})=>t.subscriptionID===e.key))))),((e,t,r,o,n,a,s)=>{const{grabOperations:i,hint:l}=n,{type:c}=l,p=function(e,t,r){const{type:o}=e,n=(0,Ae.Z)(o,t);return(0,Me.Z)(n,null,o,r||{},t)}(l,t,a),d=c!==Te.TRACK,u=a&&d?(0,Le.Z)(r,o,a.key,void 0,a.playlistType):void 0,m=i&&i.find((e=>e.status===D.pn));return{grabError:m&&(m.error||(0,Y.Z)("An unexpected error occurred")),isRefreshing:!!s,isDownloadPending:!a&&!!s&&null==s.Context.completed,isDownloading:!!s&&null!=s.Context.total&&null!=s.progress,mediaSubscription:n,imageWidth:p.width,imageHeight:p.height,imageUrl:p.url,metadataItemEntityID:a?a.entityID:null,providerEntityID:o.entityID,route:u,progress:s?s.progress:null,completed:s?s.Context.completed:null,total:s?s.Context.total:null,showEdit:(y=c,y===Te.SHOW),showCreatedAt:Et.test(e),showStorageTotal:!!a&&St.test(e)};var y}));var e}),(function(e,t){const{mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n}=t,a={mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n};return{onEditItem(){e((0,xe.nY)(a))},onDeleteItem(){e((0,v.L7)(a))},onRetryItem(){e((0,v.OS)(a))}}}))((function(e){const{cellIndex:t,grabError:r,imageHeight:n,imageUrl:a,imageWidth:s,mediaSubscription:i,metadataItemEntityID:l,providerEntityID:c,route:p,progress:d,completed:u,total:m,showStorageTotal:y,showCreatedAt:f,showEdit:g,serverEntityID:v,isDownloadPending:P,isDownloading:w,isRefreshing:h,onEditItem:E,onRetryItem:S,onDeleteItem:O}=e,Z=(0,qe.Z)(e),[D,C]=(0,o.useState)(!1),[I,j]=(0,Ye.Z)(),T=(0,o.useCallback)((()=>{C(!0)}),[]),x=(0,o.useCallback)((()=>{C(!1),O()}),[O]),N=(0,o.useCallback)((()=>{C(!1)}),[]),{hint:k,target:A}=i,{title:M,type:L,subtype:R}=k;let H,z;P?H=(0,Y.Z)("Waiting to download"):w&&(H=m>1?(0,Y.Z)("Downloading {completed} of {total}",{completed:u+1,total:m}):(0,Y.Z)("Downloading")),y?z=at(i.storageTotal):f&&(z=(0,Fe.Z)(i.createdAt)),z=z?` ${Ke.U} ${z}`:z;const B=!1,U=!h&&r,V=function(e){const{parentTitle:t,grandparentTitle:r,type:o,index:n}=e,a=o===Te.TRACK;let s;return o===Te.SEASON?s=(0,_e.Z)({seasonIndex:n,noLeadingZero:!0,useLongName:!0}):o===Te.EPISODE?s=r:a&&r&&t?s=`${r} ${Ke.U} ${t}`:a&&r&&(s=r),s}(k);return o.createElement("div",((e,t)=>{for(var r in t||(t={}))pt.call(t,r)&&ut(e,r,t[r]);if(ct)for(var r of ct(t))dt.call(t,r)&&ut(e,r,t[r]);return e})({className:t%2?"DownloadSubscriptionSummaryCell-alternateItem-yWeXKH MetadataSummaryCell-alternateItem-qJRho9 MetadataSummaryCell-item-zizwY0":"DownloadSubscriptionSummaryCell-item-PN24EO MetadataSummaryCell-item-zizwY0",style:Z.style},j),p?o.createElement(ae.Z,{"aria-label":M,className:"DownloadSubscriptionSummaryCell-underlay-AQEjGK MetadataSummaryCell-underlay-lVQ3U2",tabIndex:"0",to:p}):null,o.createElement("div",{className:"DownloadSubscriptionSummaryCell-overlay-dgruv9 MetadataSummaryCell-overlay-pNGHay"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-posterContainer-kdVgru MetadataSummaryCell-posterContainer-agLI_B"},Z.isPlaceholder?o.createElement(et.Z,{imageHeight:n,imageWidth:s}):o.createElement(Qe.Z,{imageHeight:n,imageUrl:a,imageWidth:s,isOffscreen:!1,metadataItemEntityID:l,metadataKey:i.hint.source,providerEntityID:c,route:p,serverEntityID:v,showEdit:B,showLink:B,showMore:B,showOverlay:!!A,showSelect:B,subtype:R,title:M,type:L})),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summaryContainer-BIjOtH MetadataSummaryCell-summaryContainer-vKIYSr"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-titleContainer-dDHjDA MetadataSummaryCell-titleContainer-iJUBIV"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-title-n1itJC MetadataSummaryCell-title-oz7jL8"},function(e){const{title:t,parentTitle:r,grandparentTitle:o,type:n,index:a,parentIndex:s,originallyAvailableAt:i}=e;let l=o||r||t;return n===Te.EPISODE?l=`${(0,Xe.Z)({episodeIndex:a,seasonIndex:s,date:i,noLeadingZero:!0,separator:" · "})} ${Ke.U} ${t}`:n===Te.TRACK&&(l=t),l}(k))),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summary-HplPrA MetadataSummaryCell-summary-tXxX2g"},V?o.createElement("div",null,V):null,U?o.createElement($e.gI,{gap:"s",verticalAlign:"center"},o.createElement(Be.default,{color:"alert"}),r):o.createElement("div",null,function(e){const{guid:t,type:r}=e,{MOVIE:o,SEASON:n,EPISODE:a}=Te;return r===o&&t.includes(st.Hn)?(0,Y.Z)("Video"):r===n?(0,Y.Z)("TV Show Season"):r===a?(0,Y.Z)("TV Show Episode"):Te.getMetadataType(r).title}(k),z))),P||w?o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusContainer-kZsCwk"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusText-Uhpnlt"},H),o.createElement(Ge.Z,{lineWidth:2,progress:d,showIndeterminate:P,showProgressText:!1,size:20,strokeColor:it.Z.selectedColor,trackColor:it.Z.defaultLinkDisabledLinkColor})):null,o.createElement("div",{className:He()("DownloadSubscriptionSummaryCell-actions-niNn1E MetadataSummaryCell-actions-HnEQtT",I&&"DownloadSubscriptionSummaryCell-isHovered-Ol85EI")},U?o.createElement(We.u,{tooltip:(0,Y.Z)("Retry")},o.createElement(ze.hU,{"aria-label":(0,Y.Z)("Retry {title}",{title:M}),icon:Ue.default,iconSize:"m",size:"s",transparent:!0,onPress:S})):null,g?o.createElement(We.u,{tooltip:(0,Y.Z)("Edit")},o.createElement(ze.hU,{"aria-label":(0,Y.Z)("Edit download details for {title}",{title:M}),icon:Ve.default,iconSize:"m",size:"s",transparent:!0,onPress:E})):null,o.createElement(ot,{metadataItemEntityID:l,title:M,onPress:T}),o.createElement(Je.Z,{isOpen:D,message:(0,Y.Z)("Are you sure you want to delete this download?"),metricsPage:b.Ke,title:(0,Y.Z)("Delete Download"),onCancel:N,onConfirm:x}))))}));var Zt;Ot.propTypes=(Zt=((e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&Pt(e,r,t[r]);if(ft)for(var r of ft(t))vt.call(t,r)&&Pt(e,r,t[r]);return e})({},Ot.propTypes),yt(Zt,bt({mediaSubscriptionEntityID:Se().string.isRequired,metricsPage:Se().string.isRequired,metricsProperties:Se().object.isRequired})));const Dt=Ot;var Ct=Object.defineProperty,It=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,kt=(e,t,r)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,At=(e,t)=>{for(var r in t||(t={}))xt.call(t,r)&&kt(e,r,t[r]);if(Tt)for(var r of Tt(t))Nt.call(t,r)&&kt(e,r,t[r]);return e},Mt=(e,t)=>It(e,jt(t));const Lt=function(e){const t=e,{activeSort:r,metricsPage:n,metricsProperties:a,serverEntityID:s}=t,i=((e,t)=>{var r={};for(var o in e)xt.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Tt)for(var o of Tt(e))t.indexOf(o)<0&&Nt.call(e,o)&&(r[o]=e[o]);return r})(t,["activeSort","metricsPage","metricsProperties","serverEntityID"]),l=(0,o.useMemo)((()=>e=>o.createElement(Dt,Mt(At({},e),{activeSort:r,listContext:fe.jF,listType:ge.t1,metricsPage:n,metricsProperties:a,serverEntityID:s}))),[r,n,a,s]);return o.createElement(be.Z,Mt(At({},i),{cellRenderer:l,className:"DownloadSubscriptionSummaryList-content-XZHPvL",keyPropName:"mediaSubscriptionEntityID",layout:he,scrollPositionStorageKey:"DownloadSubscriptionSummaryList",scrollerClassName:"DownloadSubscriptionSummaryList-scroller-Aq9cpn VirtualListScroller-scroller-eDZkq_"}))};var Rt=r(67006),Ht=Object.defineProperty,zt=Object.defineProperties,Bt=Object.getOwnPropertyDescriptors,Ut=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,Wt=(e,t,r)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;let Ft,Xt;function _t(e,t=window.location.hash){const r=function(e){if(Ft===e)return Xt;const t=e.split("?"),r=t.length>1?t[1]:void 0,o=r?T.Z.parseParams(r):{};return Ft=e,Xt={url:t[0],params:o},Xt}(t);return T.Z.join(r.url,((e,t)=>zt(e,Bt(t)))(((e,t)=>{for(var r in t||(t={}))Vt.call(t,r)&&Wt(e,r,t[r]);if(Ut)for(var r of Ut(t))$t.call(t,r)&&Wt(e,r,t[r]);return e})({},r.params),{type:e.type,sort:e.sort,save:1}))}function Gt(e,t){return e?function(e,t){const r=Te.getMetadataType(e);return t?r.plural:r.title}(e,t):(0,Y.Z)("All")}function Kt({type:e,sort:t}){const r={save:1};return e&&(r.type=e),t&&(r.sort=t),{type:e,title:Gt(e,!0),route:_t(r)}}var Yt=r(91569),qt=r(868),Jt=r(55247),Qt=r(75534),er=r(42934),tr=r(48285),rr=r(94372),or=r(12038),nr=r(88282),ar=r(96923),sr=Object.defineProperty,ir=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,dr=Object.prototype.propertyIsEnumerable,ur=(e,t,r)=>t in e?sr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const{ASCENDING:mr,DESCENDING:yr}=u.Z.directions,br=function(e){const t=e,{activeType:r,activeSubtype:n,activeSort:a,sorts:s,selectedSort:i,onMenuClose:l}=t,c=((e,t)=>{var r={};for(var o in e)pr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&cr)for(var o of cr(e))t.indexOf(o)<0&&dr.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","activeSubtype","activeSort","sorts","selectedSort","onMenuClose"]);return o.createElement(rr.Z,((e,t)=>ir(e,lr(t)))(((e,t)=>{for(var r in t||(t={}))pr.call(t,r)&&ur(e,r,t[r]);if(cr)for(var r of cr(t))dr.call(t,r)&&ur(e,r,t[r]);return e})({},c),{onMenuClose:l}),s.map((({key:e,descKey:t,defaultDirection:s,title:c})=>{const p=i.key===e;let d=s;p&&(d=a?a===t?mr:yr:s===mr?yr:mr);const u=d===yr;return o.createElement(or.Z,{key:e,iconComponent:u?nr.Z:ar.Z,isSelected:p,selectedIconAriaLabel:u?(0,Y.Z)("Ascending"):(0,Y.Z)("Descending"),to:_t({type:r,subtype:n,sort:u?t:e}),onPress:l},c)})))};var fr=Object.defineProperty,gr=Object.defineProperties,vr=Object.getOwnPropertyDescriptors,Pr=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,hr=Object.prototype.propertyIsEnumerable,Er=(e,t,r)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Sr=function(e){const t=e,{activeType:r,types:n,onMenuClose:a}=t,s=((e,t)=>{var r={};for(var o in e)wr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Pr)for(var o of Pr(e))t.indexOf(o)<0&&hr.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","types","onMenuClose"]);return o.createElement(rr.Z,((e,t)=>gr(e,vr(t)))(((e,t)=>{for(var r in t||(t={}))wr.call(t,r)&&Er(e,r,t[r]);if(Pr)for(var r of Pr(t))hr.call(t,r)&&Er(e,r,t[r]);return e})({},s),{onMenuClose:a}),n.map((({type:e,title:t,route:n})=>{let s;return s=e?e===r:!r,o.createElement(or.Z,{key:e||"all",isSelected:s,to:n,onMenuClose:a},t)})))};var Or=r(88413),Zr=r(85291),Dr=r(44863),Cr=r(19210),Ir=r(66088),jr=r(30544),Tr=r(89267),xr=r(74570);function Nr(e){const t=e["aria-label"],r=e.className,n=e.style,a={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-refresh-560"};a["aria-hidden"]=!t,a.style=n,a.className=xr.Z.plexIcon+(r?" "+r:"");const s=[o.createElement.apply(o,["path",{d:"M432.272,156.583C396.336,112.3 341.473,84 280,84C171.752,84 84,171.752 84,280C84,388.248 171.752,476 280,476L280,518C148.556,518 42,411.443 42,280C42,148.556 148.556,42 280,42C357.038,42 425.526,78.602 469.024,135.364L532.871,98.503L504,244.497L363.129,196.503L432.272,156.583Z"}].concat([]))];return t&&s.unshift(o.createElement("title",null,t)),o.createElement.apply(o,["svg",a].concat(s))}Nr.propTypes={"aria-label":Se().string,className:Se().string,style:Se().object};const kr=Nr;var Ar=Object.defineProperty,Mr=Object.defineProperties,Lr=Object.getOwnPropertyDescriptors,Rr=Object.getOwnPropertySymbols,Hr=Object.prototype.hasOwnProperty,zr=Object.prototype.propertyIsEnumerable,Br=(e,t,r)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ur=2*(0,Cr.Z)(Tr.Z.slowSpeed),Vr=function(e){const t=e,{isProcessingSubscriptions:r,onPress:n}=t,a=((e,t)=>{var r={};for(var o in e)Hr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Rr)for(var o of Rr(e))t.indexOf(o)<0&&zr.call(e,o)&&(r[o]=e[o]);return r})(t,["isProcessingSubscriptions","onPress"]),s=(0,jr.Z)(r,!0,Ur)||r;return o.createElement(Dr.Z,((e,t)=>Mr(e,Lr(t)))(((e,t)=>{for(var r in t||(t={}))Hr.call(t,r)&&Br(e,r,t[r]);if(Rr)for(var r of Rr(t))zr.call(t,r)&&Br(e,r,t[r]);return e})({},a),{"data-testid":"toolbarProcessSubscriptions",isDisabled:r,tooltip:(0,Y.Z)("Check for new downloads"),tooltipAttachment:Ir.OI,onPress:s?null:n}),s?o.createElement(Zr.Z,{className:"ToolbarProcessSubscriptionsButton-spinner-ymigGA Spinner-spinner-XTaskc spin-spin-H8VRGl"}):o.createElement(kr,{className:"ToolbarProcessSubscriptionsButton-icon-PTiM3B PlexIcon-plexIcon-a5zCNX"}))},$r={onRefreshDownloads:v.GX},Wr=(0,l.$j)((function(){return(0,c.P1)(K(),(0,Or.ZP)(I.l1),((e,t)=>({canShowProcessSubscriptions:e.length>0,isProcessingSubscriptions:!!t})))}),$r)((function(e){const{className:t,canShowProcessSubscriptions:r,isProcessingSubscriptions:n,onRefreshDownloads:a}=e;return o.createElement("div",{className:t},r?o.createElement(Vr,{isProcessingSubscriptions:n,onPress:a}):null)})),Fr=(0,c.P1)(ke.Z,De.Z,((e,t)=>{const{providers:r}=e;return r.reduce(((e,r)=>{const o=t[r].features.find((e=>e.type===Rt.Z.CONTENT));return o&&null!=o.storageTotal&&(e+=o.storageTotal),e}),0)})),Xr=(0,l.$j)((function(){return(0,c.P1)(((e,{activeSort:t})=>t),Fr,K(),(0,c.P1)((0,Ne.Z)(I.sC),(e=>e.reduce(((e,t)=>e+t.Context.currentSize||0),0))),((e,t,r,o)=>{const n=Kt({sort:e});return{downloadTypes:r.reduce(((t,r)=>{const{type:o,subtype:n}=r.hint;if(!(n?t.find((e=>e.subtype===n)):t.find((e=>e.type===o)))){const r=Kt({type:o,subtype:n,sort:e});t.push(r)}return t}),[n]),storageTotal:t+o}}))}))((function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,downloadTypes:s,storageTotal:i,sorts:l,size:c}=e,p=(0,Qt.Z)(),d=(0,Qt.Z)(),[u,m]=(0,o.useState)(i),[y,b]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{b(!y)}),[y]),P=(0,o.useCallback)((()=>{b(!1)}),[]),w=(0,o.useCallback)((()=>{g(!f)}),[f]),h=(0,o.useCallback)((()=>{g(!1)}),[]);(0,o.useEffect)((()=>{let e=window.setTimeout((()=>{m(i)}),100);return()=>{e=window.clearTimeout(e)}}),[i]);const E=r?(0,Y.Z)("All {typeTitle} Downloads",{typeTitle:Gt(r,!1)}):(0,Y.Z)("All Downloads");return o.createElement(er.Z,{className:"DownloadsPageHeader-pageHeader-ZXDUnB PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"},o.createElement(Jt.Z,null,o.createElement(qt.Z,{"data-testid":"downloadsTypesMenuButton",hasMenu:s.length>2,id:p,isMenuOpen:y,onPress:v},E),o.createElement(Sr,{activeType:r,isOpen:y,target:p,types:s,onMenuClose:P}),c>1?o.createElement(qt.Z,{"data-testid":"downloadsSortsMenuButton",hasMenu:!0,id:d,isMenuOpen:f,onPress:w},(0,Y.Z)("By {sortTitle}",{sortTitle:a.title})):null,c>1?o.createElement(br,{activeSort:n,activeType:r,isOpen:f,selectedSort:a,sorts:l,target:d,onMenuClose:h}):null,o.createElement(Yt.Z,null,c)),o.createElement(tr.Z,null,o.createElement("div",{className:"DownloadsPageHeader-storageTotal-zA1dwc"},(0,Y.Z)("{storageTotal} Downloaded",{storageTotal:at(u)})),o.createElement(Wr,{serverEntityID:t})))})),_r="DownloadsPage-upsell-joAmi8",Gr=function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,sorts:s,mediaSubscriptions:i,metricsPage:l,metricsProperties:c,isProvidersPending:p,isProvidersPopulated:d,isMediaSubscriptionsPending:u,canShowUpsell:m,providersError:y,mediaSubscriptionsError:b}=e,[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{g(!0)}),[]),P=(0,o.useCallback)((()=>{g(!1)}),[]);if(p&&!d||u&&!i.length)return o.createElement(de.Z,null,o.createElement(ce.Z,null));const w=y||b,h=i.length>0;return o.createElement(pe.Z,{metricsPage:l,metricsProperties:c,scrollDirection:ie.Hn},h?o.createElement(Xr,{activeSort:n,activeType:r,selectedSort:a,serverEntityID:t,size:i.length,sorts:s}):null,o.createElement("div",{className:"DownloadsPage-downloadsPageContent-kcFCsY PageContent-pageContent-rk0p0C"},w?o.createElement(me.Z,null):null,w||h?null:o.createElement(ue.Z,{description:o.createElement(ne.Z,{className:_r,message:(0,Y.Z)('Use the {downloadIcon} button or choose "Download" from the menu to download items for offline playback.'),tags:[{unpaired:"downloadIcon",children:o.createElement(re.default,{key:"downloadIcon",align:"baseline"})}]}),iconClassName:"DownloadsPage-iconDownloadUpsell-OCqLgi",iconComponent:oe.default,kind:se._8,title:(0,Y.Z)("You have no items downloaded")},m?o.createElement(ne.Z,{className:_r,message:(0,Y.Z)("An active {openPlexPassLink}Plex Pass{closePlexPassLink} is required to download from a Plex Media Server."),tags:[{open:"openPlexPassLink",close:"closePlexPassLink",component:ae.Z,kind:se._8,onPress:v}]}):null),!w&&h?o.createElement(Lt,{activeSort:n,items:i,metricsPage:l,metricsProperties:c,serverEntityID:t,size:i.length}):null,m?o.createElement(ye.Z,{isOpen:f,origin:le.Yz,onModalClose:P}):null))};var Kr=Object.defineProperty,Yr=Object.defineProperties,qr=Object.getOwnPropertyDescriptors,Jr=Object.getOwnPropertySymbols,Qr=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable,to=(e,t,r)=>t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ro=(e,t)=>{var r={};for(var o in e)Qr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Jr)for(var o of Jr(e))t.indexOf(o)<0&&eo.call(e,o)&&(r[o]=e[o]);return r};const oo={pane:"sync"};function no(e,t){return!e&&!t||d().isEqual(e,t)}const ao=(0,g.Z)((e=>{const{key:t,direction:r}=e,{DESCENDING:o}=u.Z.directions;return(e,n)=>{let a,s;return t===Q?(a=e.hint[t].toUpperCase(),s=n.hint[t].toUpperCase()):(a=e[t],s=n[t]),a>s?r===o?-1:1:a<s?r===o?1:-1:0}})),so={dispatchFetchProvidersWithStorage:X,dispatchInitDownloadsPage:W,dispatchRefreshDownloads:v.GX,dispatchResetDownloadsPage:F,dispatchSaveDownloadsParams:_};class io extends o.Component{componentDidMount(){this.props.dispatchInitDownloadsPage(),this.props.dispatchFetchProvidersWithStorage(),this.props.dispatchRefreshDownloads(),this.props.shouldSaveParams&&this._saveDownloadsDefaultParams(this.props)}componentDidUpdate(e){this.props.shouldSaveParams&&!no(e.params,this.props.params)&&this._saveDownloadsDefaultParams(this.props)}componentWillUnmount(){this.props.dispatchResetDownloadsPage()}_saveDownloadsDefaultParams(e){no(e.params,e.savedDownloadsParams)||e.dispatchSaveDownloadsParams(e.params)}render(){const e=this.props,{params:t,savedDownloadsParams:r,dispatchFetchProvidersWithStorage:n,dispatchRefreshDownloads:a,dispatchInitDownloadsPage:s,dispatchResetDownloadsPage:i,dispatchSaveDownloadsParams:l}=e,c=ro(e,["params","savedDownloadsParams","dispatchFetchProvidersWithStorage","dispatchRefreshDownloads","dispatchInitDownloadsPage","dispatchResetDownloadsPage","dispatchSaveDownloadsParams"]);return o.createElement(Gr,((e,t)=>Yr(e,qr(t)))(((e,t)=>{for(var r in t||(t={}))Qr.call(t,r)&&to(e,r,t[r]);if(Jr)for(var r of Jr(t))eo.call(t,r)&&to(e,r,t[r]);return e})({},c),{metricsPage:b.Q_,metricsProperties:oo}))}}const lo=(0,l.$j)((function(){return(0,c.P1)(((e,{params:t})=>t),(e=>e.ui.downloadsPage),(e=>e.downloads),y.Z,K(),(0,m.Z)(f.iU),(0,m.Z)(f.Ed),((e,t,r,o,n,a,s)=>{const{sort:i=""}=e;let{type:l,subtype:c}=e;const{isProvidersPending:p,isProvidersPopulated:d,providersError:u}=t,{isSubscriptionsPending:m,subscriptionsError:y}=r,b=[{key:Q,descKey:`${Q}:desc`,defaultDirection:q,title:(0,Y.Z)("Title")},{key:ee,descKey:`${ee}:desc`,defaultDirection:J,title:(0,Y.Z)("Date Downloaded"),isDefault:!0},{key:te,descKey:`${te}:desc`,defaultDirection:J,title:(0,Y.Z)("Size on Disk")}],f=i.split(":");let g=f[0];const v=f[1];let P=b.find((e=>e.key===g));P||(P=b.find((e=>e.isDefault))),g||(g=P.key),v&&(P.direction=v);let w=[...n];if((l||c)&&(w=n.reduce(((e,t)=>{const r=t.hint.subtype===c,o=t.hint.type===l;let n=!1;return c?r&&(n=!0):o&&!t.hint.subtype&&(n=!0),n&&e.push(t),e}),[]),n.length&&!w.length)){const t=e,{type:r,subtype:o}=t;w=n,e=ro(t,["type","subtype"]),l=null,c=null}const h=ao(P);return w.sort(h),{selectedSort:P,sorts:b,mediaSubscriptions:w.map((e=>e.entityID)),isProvidersPending:p,isProvidersPopulated:d,isMediaSubscriptionsPending:m,canShowUpsell:!a&&!s,providersError:u,mediaSubscriptionsError:y,savedDownloadsParams:o.downloads,params:e,activeType:l,activeSubtype:c,activeSort:i}}))}),so)(io);var co=r(20500),po=r(68576);const uo=function(e){const{children:t,isWaitingForEmbeddedServer:r,embeddedServerEntityID:n}=e;return r?o.createElement(de.Z,null,o.createElement(ce.Z,null)):n?o.createElement(co.Z,{serverEntityID:n},t(n)):o.createElement(po.Z,null)};var mo=Object.defineProperty,yo=Object.defineProperties,bo=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,vo=Object.prototype.propertyIsEnumerable,Po=(e,t,r)=>t in e?mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const wo=(0,c.P1)(ke.Z,((e={})=>{const{entityID:t,isProvidersPopulated:r=!1}=e;return{embeddedServerEntityID:t,isProvidersPopulated:r}})),ho=(0,l.$j)(wo)((function(e){const t=e,{isProvidersPopulated:r}=t,n=((e,t)=>{var r={};for(var o in e)go.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&fo)for(var o of fo(e))t.indexOf(o)<0&&vo.call(e,o)&&(r[o]=e[o]);return r})(t,["isProvidersPopulated"]);return o.createElement(uo,((e,t)=>yo(e,bo(t)))(((e,t)=>{for(var r in t||(t={}))go.call(t,r)&&Po(e,r,t[r]);if(fo)for(var r of fo(t))vo.call(t,r)&&Po(e,r,t[r]);return e})({},n),{isWaitingForEmbeddedServer:!r}))}));function Eo(){const e=(0,a.Z)(),t=(0,o.useMemo)((()=>({context:(0,i.Z)(e.context),type:(0,i.Z)(e.type),sort:(0,i.Z)(e.sort),save:(0,s.Z)(e.save)})),[e]);return o.createElement(n.Z,{metricsContext:t.context},o.createElement(ho,null,(e=>o.createElement(lo,{params:t,serverEntityID:e,shouldSaveParams:t.save}))))}},48285:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(67294),n=r(26606);const a=function({children:e}){return o.createElement(n.Z,{className:"PrimaryPageHeaderRight-pageHeaderRight-PLi1N6 PageHeaderRight-pageHeaderRight-hBWIio"},e)}},14838:(e,t,r)=>{r.d(t,{Z:()=>u});var o=r(67294),n=r(90653),a=r(68576),s=r(95105),i=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var o in e)c.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&p.call(e,o)&&(r[o]=e[o]);return r})(t,["children"]);return o.createElement(a.Z,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&d(e,r,t[r]);if(l)for(var r of l(t))p.call(t,r)&&d(e,r,t[r]);return e})({className:s.Z.innerEmptyPage,contentClassName:s.Z.innerEmptyPageContent,scrollDirection:n.Hn},i),r)}},90087:(e,t,r)=>{r.d(t,{Z:()=>n});var o=r(80126);function n(e,t){switch((0,o.n3)(e,t)){case o.oz:return 114;case o.s4:return 64;case o.Zp:return 74}}},88282:(e,t,r)=>{r.d(t,{Z:()=>l});var o=r(45697),n=r.n(o),a=r(67294),s=r(74570);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-ascending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.Z.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m280 80l-200 200h160v200h80v-200h160l-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i},96923:(e,t,r)=>{r.d(t,{Z:()=>l});var o=r(45697),n=r.n(o),a=r(67294),s=r(74570);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-descending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.Z.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m80 280h160v-200h80v200h160l-200 200-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i}}]);