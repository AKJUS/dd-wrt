"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[3884,9312,4440],{79572:(e,t,r)=>{r.d(t,{c:()=>a});var o=r(57864),n=r(16200);function a(){return(0,o.M3)(((e,{mediaSubscriptionEntityID:t})=>t),n.c,((e,t)=>t[e]))}},66532:(e,t,r)=>{r.d(t,{c:()=>g});var o=r(11504),n=r(71500),a=r(76485),s=r(95292);const i={toolbarButton:"ToolbarButton-toolbarButton-PCjB_g",bottomLeft:"ToolbarButton-bottomLeft-V3a71x Tooltip-bottomLeft-ZA9QOY Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipLeftAlignArrow-SYYsix",bottomCenter:"ToolbarButton-bottomCenter-PX024r Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",bottomRight:"ToolbarButton-bottomRight-FvoCX0 Tooltip-bottomRight-wLkq3G Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipRightAlignArrow-jFr4_J",hasFocus:"ToolbarButton-hasFocus-A6zj9p"};var l,c,d,p=Object.defineProperty,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class f extends o.Component{render(){const e=this.props,{children:t,tooltip:r,className:s,hasLabel:l,tooltipAttachment:c,hideOnPress:d,onPress:p}=e,f=((e,t)=>{var r={};for(var o in e)m.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&u)for(var o of u(e))t.indexOf(o)<0&&y.call(e,o)&&(r[o]=e[o]);return r})(e,["children","tooltip","className","hasLabel","tooltipAttachment","hideOnPress","onPress"]),g=i[c],v=`${g} ${i.hasFocus}`;return o.createElement(a.c,((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&b(e,r,t[r]);if(u)for(var r of u(t))y.call(t,r)&&b(e,r,t[r]);return e})({"aria-label":r,className:s,component:n.c,hideOnPress:d,tooltip:r,tooltipClassName:g,tooltipFocusedClassName:v,onPress:p},f),t)}}l=f,c="defaultProps",d={className:i.toolbarButton,tooltipAttachment:s.Cc},b(l,c+"",d);const g=f},84136:(e,t,r)=>{r.d(t,{c:()=>p});var o=r(11504),n=r(59372),a=Object.defineProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){return o.createElement(n.c,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))l.call(t,r)&&c(e,r,t[r]);return e})({},e))}d.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const p=d},79048:(e,t,r)=>{r.d(t,{c:()=>c});var o=r(3268),n=r.n(o),a=r(11504),s=Object.defineProperty,i=(e,t,r)=>(((e,t,r)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class l extends a.Component{constructor(e,t){super(e,t),i(this,"metricsContext"),this.metricsContext=e.metricsContext}getChildContext(){return{metricsContext:this.metricsContext}}render(){return this.props.children?a.Children.only(this.props.children):null}}i(l,"propTypes",{children:n().node,metricsContext:n().string}),i(l,"childContextTypes",{metricsContext:n().string});const c=l},91396:(e,t,r)=>{r.d(t,{c:()=>s});var o=r(57864),n=r(85180);function a(e,t){const{playQueueItems:r,currentIndex:o}=e,n=t[r[o]];return n&&n.metadataItem}function s(){return(0,o.M3)((({ui:e})=>e.audioVideoPlayer&&e.audioVideoPlayer.playQueue),(({ui:e})=>e.photoPlayer&&e.photoPlayer.playQueue),((e,{metadataItemEntityID:t})=>t),n.c,((e,t,r,o)=>{if(!r)return!1;let n,s;return e&&(n=a(e,o)),t&&(s=a(t,o)),n===r||s===r}))}},23884:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Oo});var o=r(11504),n=r(79048),a=r(39968),s=r(37008),i=r(75536),l=r(27876),c=r(57864),d=r(95720),p=r.n(d),u=r(59508),m=r(64744),y=r(92608),b=r(56960),f=r(42728),g=r(57288),v=r(38140),P=r(37588),w=r.n(P),h=r(76400),E=r(55340),S=r(76800),O=r(54268),D=r(72528),C=r(72496),I=r(38828),j=r(66308),x=r(89448),T=r(96504),M=r(84676),N=Object.defineProperty,L=Object.defineProperties,k=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z=(e,t)=>{for(var r in t||(t={}))R.call(t,r)&&H(e,r,t[r]);if(A)for(var r of A(t))B.call(t,r)&&H(e,r,t[r]);return e};const U="ui/downloadsPage/initDownloadsPage",V="ui/downloadsPage/resetDownloadsPage",F="ui/downloadsPage/fetchProvidersWithStorage",W="ui/downloadsPage/saveDownloadsParams",G=(0,E.c)(U),K=(0,E.c)(V),X=(0,E.c)(F),$=(0,E.c)(W);(0,S.c)({[U](e,t){},[V](e,t){},[F](e,t,r){const o=function(e){return e.get("ui").get("downloadsPage")}(e),n=e.get("embeddedServer");(0,x.SS)((()=>{o.set({isProvidersPending:!0,providersError:null})}));const a=n.getXHROptions(T.c.join("/media/providers",{includeStorage:1}),{headers:{Accept:h.qS.accept}});(0,I.c)("[Downloads] Updating offline file size"),w().ajax(a).then((e=>{n.get("providers").add(e,{parse:!0,merge:!0}),o.set({isProvidersPending:!1,isProvidersPopulated:!0})}),(e=>{o.set({isProvidersPending:!1,providersError:(0,M.c)(e)})}))},[W](e,t,r){const o=e.get("user").get("experienceSettings").get("savedPivotParams");var n,a;r((0,D.SI)({savedPivotParams:(n=z({},o),a={downloads:t},L(n,k(a)))}))},[O.uI](e,t,r){const{activity:o}=t;(function(e,t){const r=e.get("embeddedServer");return!!r&&r.entityID()===t.serverEntityID})(e,t)&&o.type===j.y8&&o.Response.status===C.eq&&r(X())}});var _=r(16200);function q(){return(0,c.M3)((e=>e.downloads.subscriptions),_.c,((e=[],t)=>e.map((e=>t[e]))))}var Y=r(59396);const{ASCENDING:Z,DESCENDING:J}=u.default.directions,Q="title",ee="createdAt",te="storageTotal";var re=r(54464),oe=r(69112),ne=r(98772),ae=r(71500),se=r(24808),ie=r(8212),le=r(60712),ce=r(75372),de=r(85332),pe=r(53728),ue=r(57344),me=r(89984),ye=r(95392),be=r(43880),fe=r(85612),ge=r(49579),ve=r(93864),Pe=r(95156);const we=parseInt(Pe.c.downloadCellHeight,10),he=(0,ve.c)(we,5);var Ee=r(3268),Se=r.n(Ee),Oe=r(12488),De=r(94952),Ce=r(92076),Ie=r(61500),je=r(85328),xe=r(79572),Te=r(12612),Me=r(58756),Ne=r(38595),Le=r(62200);var ke=r(92156),Ae=r(33356),Re=r(39172),Be=r(89080),He=r.n(Be),ze=r(58660),Ue=r(87396),Ve=r(99312),Fe=r(45676),We=r(3008),Ge=r(96856),Ke=r(50684),Xe=r(83052),$e=r(37156),_e=r(79988),qe=r(17068),Ye=r(82188),Ze=r(55268),Je=r(63300),Qe=r(854),et=r(86108),tt=r(44440),rt=r(91396);const ot=(0,l.Ul)((function(){return(0,c.M3)(((e,{isDisabled:t})=>t),(0,rt.c)(),((e,t)=>({isDisabled:e||t})))}))((e=>{const{isDisabled:t,title:r,onPress:n}=e;return o.createElement(Ge.o,{tooltip:(0,Y.c)("Delete")},o.createElement(ze.wP,{accessibilityLabel:(0,Y.c)("Delete {title}",{title:r}),disabled:t,icon:tt.default,iconSize:"m",size:"s",testID:"downloadSubscriptionRemoveButton",transparent:!0,onPress:n}))}));var nt=r(96588);const at=function(e){return(0,nt.c)(e||0,e>=1e9?2:0)};var st=r(6996),it=r(32716);var lt=Object.defineProperty,ct=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mt=Object.defineProperty,yt=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Pt=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const wt=(0,c.M3)(Le.c,(e=>(0,je.W)(e))),ht=(0,c.M3)(Le.c,Ce.c,((e,t)=>e&&e.providers.map((e=>t[e])))),Et=new RegExp(ee),St=new RegExp(te),Ot=(0,l.Ul)((function(){return(0,c.M3)(((e,{activeSort:t})=>t),((e,{listContext:t})=>t),wt,(0,Oe.c)((0,c.M3)((0,xe.c)(),ht,((e,t)=>{const{source:r}=e.hint,o=t.find((e=>e.source===r));return(0,Ie.s)(o)})),(e=>e)),(0,xe.c)(),(0,c.M3)(De.c,(0,xe.c)(),((e,t)=>t.target?e[t.target.metadata]:null)),(e=j.ay,(0,c.M3)((0,xe.c)(),(0,Ne.c)(e),((e,t)=>t.find((({Context:t})=>t.subscriptionID===e.key))))),((e,t,r,o,n,a,s)=>{const{grabOperations:i,hint:l}=n,{type:c}=l,d=function(e,t,r){const{type:o}=e,n=(0,ke.c)(o,t);return(0,Ae.c)(n,null,o,r||{},t)}(l,t,a),p=c!==Te.UJ,u=a&&p?(0,Re.c)(r,o,a.key,void 0,a.playlistType):void 0,m=i&&i.find((e=>e.status===C._b));return{grabError:m&&(m.error||(0,Y.c)("An unexpected error occurred")),isRefreshing:!!s,isDownloadPending:!a&&!!s&&null==s.Context.completed,isDownloading:!!s&&null!=s.Context.total&&null!=s.progress,mediaSubscription:n,imageWidth:d.width,imageHeight:d.height,imageUrl:d.url,metadataItemEntityID:a?a.entityID:null,providerEntityID:o.entityID,route:u,progress:s?s.progress:null,completed:s?s.Context.completed:null,total:s?s.Context.total:null,showEdit:(y=c,y===Te.M7),showCreatedAt:Et.test(e),showStorageTotal:!!a&&St.test(e)};var y}));var e}),(function(e,t){const{mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n}=t,a={mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n};return{onEditItem(){e((0,Me.KY)(a))},onDeleteItem(){e((0,v.Mi)(a))},onRetryItem(){e((0,v.eB)(a))}}}))((function(e){const{cellIndex:t,grabError:r,imageHeight:n,imageUrl:a,imageWidth:s,mediaSubscription:i,metadataItemEntityID:l,providerEntityID:c,route:d,progress:p,completed:u,total:m,showStorageTotal:y,showCreatedAt:f,showEdit:g,serverEntityID:v,isDownloadPending:P,isDownloading:w,isRefreshing:h,onEditItem:E,onRetryItem:S,onDeleteItem:O}=e,D=(0,Ze.c)(e),[C,I]=(0,o.useState)(!1),[j,x]=(0,Ye.c)(),T=(0,o.useCallback)((()=>{I(!0)}),[]),M=(0,o.useCallback)((()=>{I(!1),O()}),[O]),N=(0,o.useCallback)((()=>{I(!1)}),[]),{hint:L,target:k}=i,{title:A,type:R,subtype:B}=L;let H,z;P?H=(0,Y.c)("Waiting to download"):w&&(H=m>1?(0,Y.c)("Downloading {completed} of {total}",{completed:u+1,total:m}):(0,Y.c)("Downloading")),y?z=at(i.storageTotal):f&&(z=(0,Ke.c)(i.createdAt)),z=z?` ${qe.i} ${z}`:z;const U=!1,V=!h&&r,F=function(e){const{parentTitle:t,grandparentTitle:r,type:o,index:n}=e,a=o===Te.UJ;let s;return o===Te.SEASON?s=(0,$e.c)({seasonIndex:n,noLeadingZero:!0,useLongName:!0}):o===Te.EPISODE?s=r:a&&r&&t?s=`${r} ${qe.i} ${t}`:a&&r&&(s=r),s}(L);return o.createElement("div",((e,t)=>{for(var r in t||(t={}))dt.call(t,r)&&ut(e,r,t[r]);if(ct)for(var r of ct(t))pt.call(t,r)&&ut(e,r,t[r]);return e})({className:t%2?"DownloadSubscriptionSummaryCell-alternateItem-yWeXKH MetadataSummaryCell-alternateItem-qJRho9 MetadataSummaryCell-item-zizwY0":"DownloadSubscriptionSummaryCell-item-PN24EO MetadataSummaryCell-item-zizwY0",style:D.style},x),d?o.createElement(ae.c,{"aria-label":A,className:"DownloadSubscriptionSummaryCell-underlay-AQEjGK MetadataSummaryCell-underlay-lVQ3U2",tabIndex:"0",to:d}):null,o.createElement("div",{className:"DownloadSubscriptionSummaryCell-overlay-dgruv9 MetadataSummaryCell-overlay-pNGHay"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-posterContainer-kdVgru MetadataSummaryCell-posterContainer-agLI_B"},D.isPlaceholder?o.createElement(et.c,{imageHeight:n,imageWidth:s}):o.createElement(Qe.c,{imageHeight:n,imageUrl:a,imageWidth:s,isOffscreen:!1,metadataItemEntityID:l,metadataKey:i.hint.source,providerEntityID:c,route:d,serverEntityID:v,showEdit:U,showLink:U,showMore:U,showOverlay:!!k,showSelect:U,subtype:B,title:A,type:R})),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summaryContainer-BIjOtH MetadataSummaryCell-summaryContainer-vKIYSr"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-titleContainer-dDHjDA MetadataSummaryCell-titleContainer-iJUBIV"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-title-n1itJC MetadataSummaryCell-title-oz7jL8"},function(e){const{title:t,parentTitle:r,grandparentTitle:o,type:n,index:a,parentIndex:s,originallyAvailableAt:i}=e;let l=o||r||t;return n===Te.EPISODE?l=`${(0,Xe.c)({episodeIndex:a,seasonIndex:s,date:i,noLeadingZero:!0,separator:" · "})} ${qe.i} ${t}`:n===Te.UJ&&(l=t),l}(L))),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summary-HplPrA MetadataSummaryCell-summary-tXxX2g"},F?o.createElement("div",null,F):null,V?o.createElement(We.YR,{gap:"s",verticalAlign:"center"},o.createElement(Ue.default,{color:"alert"}),r):o.createElement("div",null,function(e){const{guid:t,type:r}=e,{MOVIE:o,SEASON:n,EPISODE:a}=Te;return r===o&&t.includes(st.KE)?(0,Y.c)("Video"):r===n?(0,Y.c)("TV Show Season"):r===a?(0,Y.c)("TV Show Episode"):Te.GG(r).title}(L),z))),P||w?o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusContainer-kZsCwk"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusText-Uhpnlt"},H),o.createElement(_e.c,{lineWidth:2,progress:p,showIndeterminate:P,showProgressText:!1,size:20,strokeColor:it.c.selectedColor,trackColor:it.c.defaultLinkDisabledLinkColor})):null,o.createElement("div",{className:He()("DownloadSubscriptionSummaryCell-actions-niNn1E MetadataSummaryCell-actions-HnEQtT",j&&"DownloadSubscriptionSummaryCell-isHovered-Ol85EI")},V?o.createElement(Ge.o,{tooltip:(0,Y.c)("Retry")},o.createElement(ze.wP,{accessibilityLabel:(0,Y.c)("Retry {title}",{title:A}),icon:Ve.default,iconSize:"m",size:"s",transparent:!0,onPress:S})):null,g?o.createElement(Ge.o,{tooltip:(0,Y.c)("Edit")},o.createElement(ze.wP,{accessibilityLabel:(0,Y.c)("Edit download details for {title}",{title:A}),icon:Fe.default,iconSize:"m",size:"s",transparent:!0,onPress:E})):null,o.createElement(ot,{metadataItemEntityID:l,title:A,onPress:T}),o.createElement(Je.c,{isOpen:C,message:(0,Y.c)("Are you sure you want to delete this download?"),metricsPage:b._U,title:(0,Y.c)("Delete Download"),onCancel:N,onConfirm:M}))))}));var Dt;Ot.propTypes=(Dt=((e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&Pt(e,r,t[r]);if(ft)for(var r of ft(t))vt.call(t,r)&&Pt(e,r,t[r]);return e})({},Ot.propTypes),yt(Dt,bt({mediaSubscriptionEntityID:Se().string.isRequired,metricsPage:Se().string.isRequired,metricsProperties:Se().object.isRequired})));const Ct=Ot;var It=Object.defineProperty,jt=Object.defineProperties,xt=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Lt=(e,t,r)=>t in e?It(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kt=(e,t)=>{for(var r in t||(t={}))Mt.call(t,r)&&Lt(e,r,t[r]);if(Tt)for(var r of Tt(t))Nt.call(t,r)&&Lt(e,r,t[r]);return e},At=(e,t)=>jt(e,xt(t));const Rt=function(e){const t=e,{activeSort:r,metricsPage:n,metricsProperties:a,serverEntityID:s}=t,i=((e,t)=>{var r={};for(var o in e)Mt.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Tt)for(var o of Tt(e))t.indexOf(o)<0&&Nt.call(e,o)&&(r[o]=e[o]);return r})(t,["activeSort","metricsPage","metricsProperties","serverEntityID"]),l=(0,o.useMemo)((()=>e=>o.createElement(Ct,At(kt({},e),{activeSort:r,listContext:fe.wp,listType:ge.ee,metricsPage:n,metricsProperties:a,serverEntityID:s}))),[r,n,a,s]);return o.createElement(be.c,At(kt({},i),{cellRenderer:l,className:"DownloadSubscriptionSummaryList-content-XZHPvL",keyPropName:"mediaSubscriptionEntityID",layout:he,scrollPositionStorageKey:"DownloadSubscriptionSummaryList",scrollerClassName:"DownloadSubscriptionSummaryList-scroller-Aq9cpn VirtualListScroller-scroller-eDZkq_"}))};var Bt=r(90044),Ht=Object.defineProperty,zt=Object.defineProperties,Ut=Object.getOwnPropertyDescriptors,Vt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Gt=(e,t,r)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kt=(e,t)=>{for(var r in t||(t={}))Ft.call(t,r)&&Gt(e,r,t[r]);if(Vt)for(var r of Vt(t))Wt.call(t,r)&&Gt(e,r,t[r]);return e},Xt=(e,t)=>zt(e,Ut(t));let $t,_t;function qt(e,t=window.location.hash){const r=function(e){if($t===e)return _t;const t=e.split("?"),r=t.length>1?t[1]:void 0,o=r?T.c.parseParams(r):{};return $t=e,_t={url:t[0],params:o},_t}(t);return T.c.join(r.url,Xt(Kt({},r.params),{type:e.type,sort:e.sort,save:1}))}function Yt(e,t){return e?function(e,t){const r=Te.GG(e);return t?r.plural:r.title}(e,t):(0,Y.c)("All")}function Zt({type:e,sort:t}){const r={save:1};return e&&(r.type=e),t&&(r.sort=t),{type:e,title:Yt(e,!0),route:qt(r)}}var Jt=r(84136),Qt=r(5164),er=r(70592),tr=r(87440),rr=r(94968),or=r(81640),nr=r(24752),ar=r(33316),sr=r(53152),ir=r(8256),lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,pr=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable,yr=(e,t,r)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const{ASCENDING:br,DESCENDING:fr}=u.default.directions,gr=function(e){const t=e,{activeType:r,activeSubtype:n,activeSort:a,sorts:s,selectedSort:i,onMenuClose:l}=t,c=((e,t)=>{var r={};for(var o in e)ur.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&pr)for(var o of pr(e))t.indexOf(o)<0&&mr.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","activeSubtype","activeSort","sorts","selectedSort","onMenuClose"]);return o.createElement(nr.c,((e,t)=>cr(e,dr(t)))(((e,t)=>{for(var r in t||(t={}))ur.call(t,r)&&yr(e,r,t[r]);if(pr)for(var r of pr(t))mr.call(t,r)&&yr(e,r,t[r]);return e})({},c),{onMenuClose:l}),s.map((({key:e,descKey:t,defaultDirection:s,title:c})=>{const d=i.key===e;let p=s;d&&(p=a?a===t?br:fr:s===br?fr:br);const u=p===fr;return o.createElement(ar.c,{key:e,iconComponent:u?sr.c:ir.c,isSelected:d,selectedIconAriaLabel:u?(0,Y.c)("Ascending"):(0,Y.c)("Descending"),to:qt({type:r,subtype:n,sort:u?t:e}),onPress:l},c)})))};var vr=Object.defineProperty,Pr=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,hr=Object.getOwnPropertySymbols,Er=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,Or=(e,t,r)=>t in e?vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Dr=function(e){const t=e,{activeType:r,types:n,onMenuClose:a}=t,s=((e,t)=>{var r={};for(var o in e)Er.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&hr)for(var o of hr(e))t.indexOf(o)<0&&Sr.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","types","onMenuClose"]);return o.createElement(nr.c,((e,t)=>Pr(e,wr(t)))(((e,t)=>{for(var r in t||(t={}))Er.call(t,r)&&Or(e,r,t[r]);if(hr)for(var r of hr(t))Sr.call(t,r)&&Or(e,r,t[r]);return e})({},s),{onMenuClose:a}),n.map((({type:e,title:t,route:n})=>{let s;return s=e?e===r:!r,o.createElement(ar.c,{key:e||"all",isSelected:s,to:n,onMenuClose:a},t)})))};var Cr=r(18480),Ir=r(76988),jr=r(66532),xr=r(13968),Tr=r(95292),Mr=r(47284),Nr=r(57708),Lr=r(52908);function kr(e){const t=e["aria-label"],r=e.className,n=e.style,a={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-refresh-560"};a["aria-hidden"]=!t,a.style=n,a.className=Lr.c.plexIcon+(r?" "+r:"");const s=[o.createElement.apply(o,["path",{d:"M432.272,156.583C396.336,112.3 341.473,84 280,84C171.752,84 84,171.752 84,280C84,388.248 171.752,476 280,476L280,518C148.556,518 42,411.443 42,280C42,148.556 148.556,42 280,42C357.038,42 425.526,78.602 469.024,135.364L532.871,98.503L504,244.497L363.129,196.503L432.272,156.583Z"}].concat([]))];return t&&s.unshift(o.createElement("title",null,t)),o.createElement.apply(o,["svg",a].concat(s))}kr.propTypes={"aria-label":Se().string,className:Se().string,style:Se().object};const Ar=kr;var Rr=Object.defineProperty,Br=Object.defineProperties,Hr=Object.getOwnPropertyDescriptors,zr=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,Fr=(e,t,r)=>t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Wr=2*(0,xr.c)(Nr.c.slowSpeed),Gr=function(e){const t=e,{isProcessingSubscriptions:r,onPress:n}=t,a=((e,t)=>{var r={};for(var o in e)Ur.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&zr)for(var o of zr(e))t.indexOf(o)<0&&Vr.call(e,o)&&(r[o]=e[o]);return r})(t,["isProcessingSubscriptions","onPress"]),s=(0,Mr.c)(r,!0,Wr)||r;return o.createElement(jr.c,((e,t)=>Br(e,Hr(t)))(((e,t)=>{for(var r in t||(t={}))Ur.call(t,r)&&Fr(e,r,t[r]);if(zr)for(var r of zr(t))Vr.call(t,r)&&Fr(e,r,t[r]);return e})({},a),{"data-testid":"toolbarProcessSubscriptions",isDisabled:r,tooltip:(0,Y.c)("Check for new downloads"),tooltipAttachment:Tr.gb,onPress:s?null:n}),s?o.createElement(Ir.c,{className:"ToolbarProcessSubscriptionsButton-spinner-ymigGA Spinner-spinner-XTaskc spin-spin-H8VRGl"}):o.createElement(Ar,{className:"ToolbarProcessSubscriptionsButton-icon-PTiM3B PlexIcon-plexIcon-a5zCNX"}))},Kr={onRefreshDownloads:v.CM},Xr=(0,l.Ul)((function(){return(0,c.M3)(q(),(0,Cr.cp)(j.h4),((e,t)=>({canShowProcessSubscriptions:e.length>0,isProcessingSubscriptions:!!t})))}),Kr)((function(e){const{className:t,canShowProcessSubscriptions:r,isProcessingSubscriptions:n,onRefreshDownloads:a}=e;return o.createElement("div",{className:t},r?o.createElement(Gr,{isProcessingSubscriptions:n,onPress:a}):null)})),$r=(0,c.M3)(Le.c,Ce.c,((e,t)=>{const{providers:r}=e;return r.reduce(((e,r)=>{const o=t[r].features.find((e=>e.type===Bt.c.CONTENT));return o&&null!=o.storageTotal&&(e+=o.storageTotal),e}),0)})),_r=(0,l.Ul)((function(){return(0,c.M3)(((e,{activeSort:t})=>t),$r,q(),(0,c.M3)((0,Ne.c)(j.y8),(e=>e.reduce(((e,t)=>e+t.Context.currentSize||0),0))),((e,t,r,o)=>{const n=Zt({sort:e});return{downloadTypes:r.reduce(((t,r)=>{const{type:o,subtype:n}=r.hint;if(!(n?t.find((e=>e.subtype===n)):t.find((e=>e.type===o)))){const r=Zt({type:o,subtype:n,sort:e});t.push(r)}return t}),[n]),storageTotal:t+o}}))}))((function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,downloadTypes:s,storageTotal:i,sorts:l,size:c}=e,d=(0,tr.c)(),p=(0,tr.c)(),[u,m]=(0,o.useState)(i),[y,b]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{b(!y)}),[y]),P=(0,o.useCallback)((()=>{b(!1)}),[]),w=(0,o.useCallback)((()=>{g(!f)}),[f]),h=(0,o.useCallback)((()=>{g(!1)}),[]);(0,o.useEffect)((()=>{let e=window.setTimeout((()=>{m(i)}),100);return()=>{e=window.clearTimeout(e)}}),[i]);const E=r?(0,Y.c)("All {typeTitle} Downloads",{typeTitle:Yt(r,!1)}):(0,Y.c)("All Downloads");return o.createElement(rr.c,{className:"DownloadsPageHeader-pageHeader-ZXDUnB PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"},o.createElement(er.c,null,o.createElement(Qt.c,{"data-testid":"downloadsTypesMenuButton",hasMenu:s.length>2,id:d,isMenuOpen:y,onPress:v},E),o.createElement(Dr,{activeType:r,isOpen:y,target:d,types:s,onMenuClose:P}),c>1?o.createElement(Qt.c,{"data-testid":"downloadsSortsMenuButton",hasMenu:!0,id:p,isMenuOpen:f,onPress:w},(0,Y.c)("By {sortTitle}",{sortTitle:a.title})):null,c>1?o.createElement(gr,{activeSort:n,activeType:r,isOpen:f,selectedSort:a,sorts:l,target:p,onMenuClose:h}):null,o.createElement(Jt.c,null,c)),o.createElement(or.c,null,o.createElement("div",{className:"DownloadsPageHeader-storageTotal-zA1dwc"},(0,Y.c)("{storageTotal} Downloaded",{storageTotal:at(u)})),o.createElement(Xr,{serverEntityID:t})))})),qr="DownloadsPage-upsell-joAmi8",Yr=function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,sorts:s,mediaSubscriptions:i,metricsPage:l,metricsProperties:c,isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:u,canShowUpsell:m,providersError:y,mediaSubscriptionsError:b}=e,[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{g(!0)}),[]),P=(0,o.useCallback)((()=>{g(!1)}),[]);if(d&&!p||u&&!i.length)return o.createElement(pe.c,null,o.createElement(ce.c,null));const w=y||b,h=i.length>0;return o.createElement(de.c,{metricsPage:l,metricsProperties:c,scrollDirection:ie.KE},h?o.createElement(_r,{activeSort:n,activeType:r,selectedSort:a,serverEntityID:t,size:i.length,sorts:s}):null,o.createElement("div",{className:"DownloadsPage-downloadsPageContent-kcFCsY PageContent-pageContent-rk0p0C"},w?o.createElement(me.c,null):null,w||h?null:o.createElement(ue.c,{description:o.createElement(ne.c,{className:qr,message:(0,Y.c)('Use the {downloadIcon} button or choose "Download" from the menu to download items for offline playback.'),tags:[{unpaired:"downloadIcon",children:o.createElement(re.default,{key:"downloadIcon",align:"baseline"})}]}),iconClassName:"DownloadsPage-iconDownloadUpsell-OCqLgi",iconComponent:oe.default,kind:se.ac,title:(0,Y.c)("You have no items downloaded")},m?o.createElement(ne.c,{className:qr,message:(0,Y.c)("An active {openPlexPassLink}Plex Pass{closePlexPassLink} is required to download from a Plex Media Server."),tags:[{open:"openPlexPassLink",close:"closePlexPassLink",component:ae.c,kind:se.ac,onPress:v}]}):null),!w&&h?o.createElement(Rt,{activeSort:n,items:i,metricsPage:l,metricsProperties:c,serverEntityID:t,size:i.length}):null,m?o.createElement(ye.c,{isOpen:f,origin:le.El,onModalClose:P}):null))};var Zr=Object.defineProperty,Jr=Object.defineProperties,Qr=Object.getOwnPropertyDescriptors,eo=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,ro=Object.prototype.propertyIsEnumerable,oo=(e,t,r)=>t in e?Zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,no=(e,t)=>{var r={};for(var o in e)to.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&eo)for(var o of eo(e))t.indexOf(o)<0&&ro.call(e,o)&&(r[o]=e[o]);return r};const ao={pane:"sync"};function so(e,t){return!e&&!t||p().isEqual(e,t)}const io=(0,g.c)((e=>{const{key:t,direction:r}=e,{DESCENDING:o}=u.default.directions;return(e,n)=>{let a,s;return t===Q?(a=e.hint[t].toUpperCase(),s=n.hint[t].toUpperCase()):(a=e[t],s=n[t]),a>s?r===o?-1:1:a<s?r===o?1:-1:0}})),lo={dispatchFetchProvidersWithStorage:X,dispatchInitDownloadsPage:G,dispatchRefreshDownloads:v.CM,dispatchResetDownloadsPage:K,dispatchSaveDownloadsParams:$};class co extends o.Component{componentDidMount(){this.props.dispatchInitDownloadsPage(),this.props.dispatchFetchProvidersWithStorage(),this.props.dispatchRefreshDownloads(),this.props.shouldSaveParams&&this._saveDownloadsDefaultParams(this.props)}componentDidUpdate(e){this.props.shouldSaveParams&&!so(e.params,this.props.params)&&this._saveDownloadsDefaultParams(this.props)}componentWillUnmount(){this.props.dispatchResetDownloadsPage()}_saveDownloadsDefaultParams(e){so(e.params,e.savedDownloadsParams)||e.dispatchSaveDownloadsParams(e.params)}render(){const e=this.props,{params:t,savedDownloadsParams:r,dispatchFetchProvidersWithStorage:n,dispatchRefreshDownloads:a,dispatchInitDownloadsPage:s,dispatchResetDownloadsPage:i,dispatchSaveDownloadsParams:l}=e,c=no(e,["params","savedDownloadsParams","dispatchFetchProvidersWithStorage","dispatchRefreshDownloads","dispatchInitDownloadsPage","dispatchResetDownloadsPage","dispatchSaveDownloadsParams"]);return o.createElement(Yr,((e,t)=>Jr(e,Qr(t)))(((e,t)=>{for(var r in t||(t={}))to.call(t,r)&&oo(e,r,t[r]);if(eo)for(var r of eo(t))ro.call(t,r)&&oo(e,r,t[r]);return e})({},c),{metricsPage:b.bL,metricsProperties:ao}))}}const po=(0,l.Ul)((function(){return(0,c.M3)(((e,{params:t})=>t),(e=>e.ui.downloadsPage),(e=>e.downloads),y.c,q(),(0,m.c)(f.kF),(0,m.c)(f.EL),((e,t,r,o,n,a,s)=>{const{sort:i=""}=e;let{type:l,subtype:c}=e;const{isProvidersPending:d,isProvidersPopulated:p,providersError:u}=t,{isSubscriptionsPending:m,subscriptionsError:y}=r,b=[{key:Q,descKey:`${Q}:desc`,defaultDirection:Z,title:(0,Y.c)("Title")},{key:ee,descKey:`${ee}:desc`,defaultDirection:J,title:(0,Y.c)("Date Downloaded"),isDefault:!0},{key:te,descKey:`${te}:desc`,defaultDirection:J,title:(0,Y.c)("Size on Disk")}],f=i.split(":");let g=f[0];const v=f[1];let P=b.find((e=>e.key===g));P||(P=b.find((e=>e.isDefault))),g||(g=P.key),v&&(P.direction=v);let w=[...n];if((l||c)&&(w=n.reduce(((e,t)=>{const r=t.hint.subtype===c,o=t.hint.type===l;let n=!1;return c?r&&(n=!0):o&&!t.hint.subtype&&(n=!0),n&&e.push(t),e}),[]),n.length&&!w.length)){const t=e,{type:r,subtype:o}=t;w=n,e=no(t,["type","subtype"]),l=null,c=null}const h=io(P);return w.sort(h),{selectedSort:P,sorts:b,mediaSubscriptions:w.map((e=>e.entityID)),isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:m,canShowUpsell:!a&&!s,providersError:u,mediaSubscriptionsError:y,savedDownloadsParams:o.downloads,params:e,activeType:l,activeSubtype:c,activeSort:i}}))}),lo)(co);var uo=r(95e3),mo=r(97488);const yo=function(e){const{children:t,isWaitingForEmbeddedServer:r,embeddedServerEntityID:n}=e;return r?o.createElement(pe.c,null,o.createElement(ce.c,null)):n?o.createElement(uo.c,{serverEntityID:n},t(n)):o.createElement(mo.c,null)};var bo=Object.defineProperty,fo=Object.defineProperties,go=Object.getOwnPropertyDescriptors,vo=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,ho=(e,t,r)=>t in e?bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Eo=(0,c.M3)(Le.c,((e={})=>{const{entityID:t,isProvidersPopulated:r=!1}=e;return{embeddedServerEntityID:t,isProvidersPopulated:r}})),So=(0,l.Ul)(Eo)((function(e){const t=e,{isProvidersPopulated:r}=t,n=((e,t)=>{var r={};for(var o in e)Po.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&vo)for(var o of vo(e))t.indexOf(o)<0&&wo.call(e,o)&&(r[o]=e[o]);return r})(t,["isProvidersPopulated"]);return o.createElement(yo,((e,t)=>fo(e,go(t)))(((e,t)=>{for(var r in t||(t={}))Po.call(t,r)&&ho(e,r,t[r]);if(vo)for(var r of vo(t))wo.call(t,r)&&ho(e,r,t[r]);return e})({},n),{isWaitingForEmbeddedServer:!r}))}));function Oo(){const e=(0,a.c)(),t=(0,o.useMemo)((()=>({context:(0,i.c)(e.context),type:(0,i.c)(e.type),sort:(0,i.c)(e.sort),save:(0,s.c)(e.save)})),[e]);return o.createElement(n.c,{metricsContext:t.context},o.createElement(So,null,(e=>o.createElement(po,{params:t,serverEntityID:e,shouldSaveParams:t.save}))))}},81640:(e,t,r)=>{r.d(t,{c:()=>a});var o=r(11504),n=r(93964);const a=function({children:e}){return o.createElement(n.c,{className:"PrimaryPageHeaderRight-pageHeaderRight-PLi1N6 PageHeaderRight-pageHeaderRight-hBWIio"},e)}},89984:(e,t,r)=>{r.d(t,{c:()=>u});var o=r(11504),n=r(8212),a=r(97488),s=r(41420),i=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var o in e)c.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&d.call(e,o)&&(r[o]=e[o]);return r})(t,["children"]);return o.createElement(a.c,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&p(e,r,t[r]);return e})({className:s.c.innerEmptyPage,contentClassName:s.c.innerEmptyPageContent,scrollDirection:n.KE},i),r)}},92156:(e,t,r)=>{r.d(t,{c:()=>n});var o=r(49852);function n(e,t){switch((0,o.u2)(e,t)){case o.cr:return 114;case o.Aj:return 64;case o.eg:return 74}}},53152:(e,t,r)=>{r.d(t,{c:()=>l});var o=r(3268),n=r.n(o),a=r(11504),s=r(52908);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-ascending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.c.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m280 80l-200 200h160v200h80v-200h160l-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i},8256:(e,t,r)=>{r.d(t,{c:()=>l});var o=r(3268),n=r.n(o),a=r(11504),s=r(52908);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-descending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.c.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m80 280h160v-200h80v200h160l-200 200-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i},99312:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var o=r(11504),n=r(40660);const a=(0,o.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:s},i){return o.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:a}),"data-testid":s,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M36.0208 10.3995L26.1213 0.5L24 2.62132L30.3787 9H24C20.4399 9 16.9598 10.0557 13.9997 12.0335C11.0397 14.0114 8.73255 16.8226 7.37018 20.1117C6.0078 23.4008 5.65134 27.02 6.34587 30.5116C7.04041 34.0033 8.75474 37.2106 11.2721 39.7279C13.7894 42.2453 16.9967 43.9596 20.4884 44.6541C23.98 45.3487 27.5992 44.9922 30.8883 43.6298C34.1774 42.2675 36.9886 39.9604 38.9665 37.0003C40.9443 34.0402 42 30.5601 42 27H39C39 29.9667 38.1203 32.8668 36.4721 35.3336C34.8238 37.8003 32.4812 39.7229 29.7403 40.8582C26.9994 41.9935 23.9834 42.2906 21.0737 41.7118C18.1639 41.133 15.4912 39.7044 13.3934 37.6066C11.2956 35.5088 9.86701 32.8361 9.28823 29.9264C8.70945 27.0166 9.0065 24.0006 10.1418 21.2598C11.2771 18.5189 13.1997 16.1762 15.6665 14.528C18.1332 12.8797 21.0333 12 24 12H30.1777L24 18.1777L26.1213 20.299L36.0208 10.3995Z",fill:"currentColor"}))}))},44440:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var o=r(11504),n=r(40660);const a=(0,o.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:s},i){return o.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:a}),"data-testid":s,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{clipRule:"evenodd",d:"M3 24C3 12.45 12.45 3 24 3C35.55 3 45 12.45 45 24C45 35.55 35.55 45 24 45C12.45 45 3 35.55 3 24ZM31.4246 34.253L34.253 31.4246L26.8284 24L34.253 16.5754L31.4246 13.7469L24 21.1716L16.5754 13.7469L13.7469 16.5754L21.1716 24L13.7469 31.4246L16.5754 34.253L24 26.8284L31.4246 34.253Z",fill:"currentColor",fillRule:"evenodd"}))}))}}]);