"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[824,9292,3048],{84136:(e,t,r)=>{r.d(t,{c:()=>m});var l=r(11504),n=r(59372),a=Object.defineProperty,c=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function u(e){return l.createElement(n.c,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(c)for(var r of c(t))o.call(t,r)&&s(e,r,t[r]);return e})({},e))}u.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const m=u},14292:(e,t,r)=>{r.d(t,{c:()=>i});var l=r(57864),n=r(8047),a=r(87512),c=r(41267);const i=(0,a.c)((function(e){return(0,l.M3)((0,c.c)(e),(e=>e.accounts.slice().sort(n.c)))}))},8047:(e,t,r)=>{r.d(t,{c:()=>n});const l=1;function n(e,t){if(e.id===l)return-1;if(t.id===l)return 1;const r=e.name.trim().toUpperCase(),n=t.name.trim().toUpperCase();return r<n?-1:r>n?1:0}},86008:(e,t,r)=>{r.d(t,{c:()=>o});var l=r(11504),n=r(39292),a=r(13048),c=r(59396);const i={sortDirectionIcon:"IconTableHeaderSortDirection-sortDirectionIcon-lpcD5T"};function o({isAscending:e=!0}){const t=e?n.default:a.default;return l.createElement("div",{className:i.sortDirectionIcon},l.createElement(t,{accessibilityLabel:e?(0,c.c)("Ascending"):(0,c.c)("Descending")}))}},62284:(e,t,r)=>{r.d(t,{c:()=>f});var l=r(11504);const n={tableCell:"TableCell-tableCell-eytlAB",activeTableCell:"TableCell-activeTableCell-KGqIi8 TableCell-tableCell-eytlAB",title:"TableCell-title-swrhIF"};var a=Object.defineProperty,c=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(o)for(var r of o(t))u.call(t,r)&&m(e,r,t[r]);return e},d=(e,t)=>c(e,i(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.title,cellClassName:a=n.tableCell,activeCellClassName:c=n.activeTableCell,style:i,component:o,type:s,isActiveSort:u}=t,m=y(t,["className","cellClassName","activeCellClassName","style","component","type","isActiveSort"]);return l.createElement("div",{className:u?c:a,style:i},l.createElement(o,d(p({},m),{className:r})))}},16812:(e,t,r)=>{r.d(t,{c:()=>f});var l=r(11504);const n={tableHeader:"TableHeader-tableHeader-DV7Uvw"};var a=Object.defineProperty,c=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(o)for(var r of o(t))u.call(t,r)&&m(e,r,t[r]);return e},d=(e,t)=>c(e,i(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.tableHeader}=t,a=y(t,["className"]);return l.createElement("div",d(p({},a),{className:r}))}},28500:(e,t,r)=>{r.d(t,{c:()=>f});var l=r(11504);const n={tableHeaderCell:"TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB",activeTableHeaderCell:"TableHeaderCell-activeTableHeaderCell-jjqwYB TableHeaderCell-tableHeaderCell-LXfAh8 TableCell-tableCell-eytlAB"};var a=Object.defineProperty,c=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(o)for(var r of o(t))u.call(t,r)&&m(e,r,t[r]);return e},d=(e,t)=>c(e,i(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.tableHeaderCell,activeClassName:a=n.activeTableHeaderCell,children:c,isActive:i=!1}=t,o=y(t,["className","activeClassName","children","isActive"]);const s=i?a:r;return l.createElement("span",d(p({},o),{className:s}),c)}},88588:(e,t,r)=>{r.d(t,{c:()=>v});var l=r(11504),n=r(22916);const a={tableHeaderLink:"TableHeaderLink-tableHeaderLink-ZM1qnf Link-link-vSsQW1"};var c=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&p(e,r,t[r]);if(s)for(var r of s(t))m.call(t,r)&&p(e,r,t[r]);return e},y=(e,t)=>i(e,o(t)),f=(e,t)=>{var r={};for(var l in e)u.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&s)for(var l of s(e))t.indexOf(l)<0&&m.call(e,l)&&(r[l]=e[l]);return r};function v(e){var t=e,{className:r=a.tableHeaderLink,children:c}=t,i=f(t,["className","children"]);return l.createElement(n.c,y(d({},i),{className:r}),c)}},18376:(e,t,r)=>{r.d(t,{c:()=>f});var l=r(11504);const n={tableHeaderTitle:"TableHeaderTitle-tableHeaderTitle-YBbHuP"};var a=Object.defineProperty,c=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&m(e,r,t[r]);if(o)for(var r of o(t))u.call(t,r)&&m(e,r,t[r]);return e},d=(e,t)=>c(e,i(t)),y=(e,t)=>{var r={};for(var l in e)s.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&o)for(var l of o(e))t.indexOf(l)<0&&u.call(e,l)&&(r[l]=e[l]);return r};function f(e){var t=e,{className:r=n.tableHeaderTitle,children:a}=t,c=y(t,["className","children"]);return l.createElement("span",d(p({},c),{className:r}),a)}},90824:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Jt});var l=r(11504),n=r(56960),a=r(37984),c=r(39968),i=r(29208),o=r(18730),s=r(75536),u=r(50249),m=r(27876),p=r(95720),d=r.n(p),y=r(23228);r(79268);const f="boolean",v="other";var b=Object.defineProperty,g=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&w(e,r,t[r]);if(g)for(var r of g(t))h.call(t,r)&&w(e,r,t[r]);return e},I=r(99344),E=r(13687);const C=`([^&!=<>]+)(${I.cp.sort(((e,t)=>t.length-e.length)).map(y.c).join("|")})([^&]+)?`,k=new RegExp(C,"g"),T=new RegExp(C),j={unwatched:!0,unwatchedLeaves:!0,unmatched:!0,duplicate:!0,inProgress:!0,hdonly:!0,hdr:!0};var S=r(89448),H=r(11364),N=r(16872),x=r(96420),M=r(76400),A=r(96504),D=r(71684);const L=H.c.extend({name:"PlayHistoryListItemModel",syncedAttrs:{key:N.c.string,parentKey:N.c.string,grandparentKey:N.c.string,title:N.c.string,parentTitle:N.c.string,grandparentTitle:N.c.string,type:N.c.string,thumb:N.c.string,parentThumb:N.c.string,grandparentThumb:N.c.string,grandparentArt:N.c.string,index:N.c.integer,parentIndex:N.c.integer,originallyAvailableAt:N.c.string,viewedAt:N.c.integer,accountID:N.c.integer,deviceID:N.c.integer},derivedAttrs:{itemKey(){return this.get("key")},id(){return this.cid}}}),R=D.c.extend({name:"PlayHistoryListItemCollection",context:["server"],model:L}),F="viewedAt:desc";H.c.extend({mixins:[x.c],collectionName:"items",name:"PlayHistoryListModel",context:["server","accountID","filters","sort","limit"],responseType:M.qS,url(){const e=this.filters.reduce(((e,t)=>(e[t.key]=t.value,e)),{});null!=this.accountID&&(e.accountID=this.accountID),null!=this.sort&&(e.sort=this.sort),null!=this.limit&&(e.limit=this.limit);let t=A.c.join("/status/sessions/history/all",e);return t=t.replace("viewedAt=","viewedAt>="),this.getPaginatedUrl(t)},sessionAttrs:{currentPageStart:N.c.integer,currentPageSize:N.c.integer,populatedRange:N.c.object},syncedAttrs:{totalSize:N.c.integer},syncedRelations:{items:{relationClass:R,rootPropertyName:"Metadata",setOptions:e=>({remove:e.remove,at:e.at})}},defaults:()=>({populatedRange:{start:0,end:0,size:0}}),initialize(){this.startPopulatedRangeMonitor()}});var q=r(96744),z=r(31004),U=r(91320),$=r(66984),B=r(27256),K=r(71040);function V(e,t){return!!e&&e.some((e=>e.key===t))}var G=r(59396),Y=r(17544);var Z=r(57864),Q=r(41267);var _=r(66844),W=r(12612),J=r(672),X=r(12500),ee=r(23564);const te={key:"user",title:()=>(0,G.c)("User"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c$)(),{accountID:n}=t,c=(0,l.useMemo)((()=>((e,t)=>(0,Z.M3)((0,Q.c)(e),(e=>e.accounts.find((e=>e.id===t)))))(r.machineIdentifier,n)),[n,r.machineIdentifier]),i=(0,m.w1)(c);return i?l.createElement("span",{className:e,title:i.name},i.name):l.createElement("span",{className:e},(0,G.c)("Unknown User"))},style:{flex:"1 1 250px"}},re={key:"type",title:()=>(0,G.c)("Type"),component:function({className:e,playHistoryItem:t}){const{type:r}=t,n=(0,W.GG)(r);return n?l.createElement("span",{className:e,title:n.title},n.title):null},style:{flex:"0 1 120px"}},le={key:"title",title:()=>(0,G.c)("Title"),component:function({className:e,playHistoryItem:t}){const r=(0,Y.c)(t);return l.createElement("span",{className:e},l.createElement("div",{className:"PlayHistoryTableTitle-titleContainer-vVYJ11"},l.createElement("span",{className:"PlayHistoryTableTitle-title-KfbuOe",title:r},r)))},style:{flex:"2 0 350px"}},ne={key:"viewedAt",ascKey:"viewedAt",descKey:"viewedAt:desc",title:()=>(0,G.c)("Played"),component:function({className:e,playHistoryItem:t}){const{viewedAt:r}=t,n=(0,m.w1)(X.c),a=(0,J.c)(1e3*r,`${n} MMM d, yyyy`);return l.createElement("span",{className:e,title:a},a)},style:{flex:"1 1 150px"}},ae={key:"player",title:()=>(0,G.c)("Player"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c$)(),{deviceID:n}=t,c=(0,m.w1)((0,_.c)(r.machineIdentifier)).devices.find((e=>e.id===n));return c?l.createElement("span",{className:e,title:c.name},c.name):l.createElement("span",{className:e},(0,G.c)("Unknown"))},style:{flex:"1 1 150px"}},ce={key:"platform",title:()=>(0,G.c)("Platform"),component:function({className:e,playHistoryItem:t}){const[r]=(0,a.c$)(),{deviceID:n}=t,c=(0,m.w1)((0,_.c)(r.machineIdentifier)).devices.find((e=>e.id===n));return c?l.createElement("span",{className:e,title:c.platform},c.platform):l.createElement("span",{className:e},(0,G.c)("Unknown"))},style:{flex:"1 1 150px"}},ie=[ne];var oe=r(40376),se=r(37008),ue=r(49956),me=r(95156),pe=r(82228);const de=parseInt(me.c.tableRowHeight,10),ye=(0,pe.c)({rowHeight:de,overscan:20});var fe=r(16416),ve=r(77872),be=r(94644),ge=r(23748),Oe=r(2100);const he=(0,Z.M3)(Oe.c,(e=>e.playHistory));var we=r(89080),Pe=r.n(we),Ie=r(22916),Ee=r(62284),Ce=r(46896),ke=r(39172);const Te=l.forwardRef((({style:e,cellIndex:t},r)=>l.createElement("div",{ref:r,className:t%2?"PlayHistoryTableRowLoading-alternateLoadingItem-mBL8aM PlayHistoryTableRowLoading-loadingItem-ztQZqS":"PlayHistoryTableRowLoading-loadingItem-ztQZqS",style:e},(0,G.c)("Loading...")))),je={clickableItem:"PlayHistoryTableRow-clickableItem-k3zmEO",alternateItem:"PlayHistoryTableRow-alternateItem-l9Zpev",columns:"PlayHistoryTableRow-columns-RnVGEQ Link-link-vSsQW1"};var Se=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,xe=(e,t)=>{var r={};for(var l in e)He.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&Se)for(var l of Se(e))t.indexOf(l)<0&&Ne.call(e,l)&&(r[l]=e[l]);return r};function Me(e){var t=e,{item:r,activeTableColumns:n}=t,c=xe(t,["item","activeTableColumns"]);const[i]=(0,a.c$)(),o=(0,Ce.c)(c);let s;if(null==r?void 0:r.key){const e=n.some((e=>"title"===e.key)),t=r.type===W.UJ?r.parentKey:r.key;s=e?(0,ke.c)(i,{isLibraryProvider:!0},t):void 0}return r?l.createElement("div",{ref:o.cellRef,className:Pe()(c.cellIndex%2&&je.alternateItem,s&&je.clickableItem),style:o.style},l.createElement(Ie.c,{"aria-label":r.title,className:je.columns,isDisabled:!s,to:s},n.map((({style:e,component:t},n)=>l.createElement(Ee.c,{key:n,component:t,playHistoryItem:r,style:e}))))):l.createElement(Te,{ref:o.cellRef,cellIndex:c.cellIndex,style:o.style})}const Ae={playHistoryListPageContent:"PlayHistoryList-playHistoryListPageContent-ebUqYI PageContent-pageContentScroller-dvaH3C Scroller-scroller-S6_dko"};var De=Object.defineProperty,Le=Object.defineProperties,Re=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Ue=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))qe.call(t,r)&&Ue(e,r,t[r]);if(Fe)for(var r of Fe(t))ze.call(t,r)&&Ue(e,r,t[r]);return e},Be=(e,t)=>Le(e,Re(t));function Ke({activeTableColumns:e,activeFilters:t,activeSort:r}){const n=(0,m.OY)(),[c]=(0,a.c$)(),i=(0,m.w1)(he),o=(0,m.w1)((0,_.c)(c.machineIdentifier)),{items:s,totalSize:u,isPopulated:p,error:d}=i,{isPopulated:y,error:f}=o,v=(0,l.useCallback)((e=>{n(K.c.actions.fetchRangeRequested(Be($e({},e),{server:c,filters:t,sort:r})))}),[n,c,t,r]),b=(0,l.useMemo)((()=>t=>l.createElement(Me,Be($e({},t),{activeTableColumns:e}))),[e]);return p&&u&&(y||f)?l.createElement(be.c,{cellComponentFactory:b,className:Ae.playHistoryListPageContent,items:s,layout:ye,totalSize:u,onPageRequest:v}):p&&!u?l.createElement(fe.c,{description:(0,G.c)("Snuggle up on the couch and play something!"),title:(0,G.c)("Nothing to see here")}):d?l.createElement(ve.c,null):l.createElement(fe.c,null,l.createElement(ge.c,null))}var Ve=r(84136),Ge=r(5164),Ye=r(70592),Ze=r(92796),Qe=r(55383),_e=Object.defineProperty,We=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,et=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,rt=(e,t,r)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lt=(e,t)=>{for(var r in t||(t={}))et.call(t,r)&&rt(e,r,t[r]);if(Xe)for(var r of Xe(t))tt.call(t,r)&&rt(e,r,t[r]);return e},nt=(e,t)=>We(e,Je(t));function at(e,t,r){if(null==r)return e.filter((e=>e.key!==t));const l=[...e];let n=l.length;for(;n-- >0;){const e=l[n],a=e.key,c=e.value;if(t===a&&r===c)l.splice(n,1);else if(t===a&&Array.isArray(c)){const t=c.indexOf(r);t>-1&&(c.splice(t,1),1===c.length?l.splice(n,1,nt(lt({},e),{value:c[0]})):c.length||l.splice(n,1))}}return l}var ct=Object.defineProperty,it=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mt=(e,t)=>{for(var r in t||(t={}))ot.call(t,r)&&ut(e,r,t[r]);if(it)for(var r of it(t))st.call(t,r)&&ut(e,r,t[r]);return e};function pt(e,t,r){const l=[...e],n=l.findIndex((e=>e.key===t)),a=-1===n?0:n,c=mt({key:t},r);return-1===n?l.push(c):l.splice(a,1,c),l}var dt=r(24752),yt=r(55588),ft=r(87440),vt=r(14292),bt=r(81180),gt=r(61240),Ot=Object.defineProperty,ht=Object.defineProperties,wt=Object.getOwnPropertyDescriptors,Pt=Object.getOwnPropertySymbols,It=Object.prototype.hasOwnProperty,Et=Object.prototype.propertyIsEnumerable,Ct=(e,t,r)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kt=(e,t)=>{for(var r in t||(t={}))It.call(t,r)&&Ct(e,r,t[r]);if(Pt)for(var r of Pt(t))Et.call(t,r)&&Ct(e,r,t[r]);return e},Tt=(e,t)=>ht(e,wt(t));let jt,St;function Ht(e,t=window.location.hash){const r=function(e){if(jt===e)return St;const t=e.split("?"),r=t.length>1?t[1]:void 0,l=r?A.c.parseParams(r):{};return jt=e,St={url:t[0],params:l},St}(t);return A.c.join(r.url,Tt(kt({},r.params),{filters:(0,gt.c)(e.filters),activeTimePeriod:e.activeTimePeriod,sort:e.sort}))}var Nt=r(33316);function xt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n]=(0,a.c$)(),c=(0,ft.c)(),i=(0,bt.c)(),o=(0,l.useMemo)((()=>({key:"",title:(0,G.c)("All Users")})),[]),s=(0,m.w1)((0,vt.c)(n.machineIdentifier)),u=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:String(t.id),title:t.name}),e)),[o])),[s,o]),p=(0,l.useMemo)((()=>{const t=e.find((e=>"accountID"===e.key));return t?u.find((e=>e.key===t.value)):o}),[e,u,o]),d=(0,l.useCallback)((l=>{let n;n=l?pt(e,ee.I.AccountID,{value:String(l),type:v}):at(e,ee.I.AccountID),window.location.hash=Ht({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return p&&u.length?l.createElement(l.Fragment,null,l.createElement(Ge.c,{hasMenu:!0,id:c,isMenuOpen:i.isOpen,onPress:i.onToggle},p.title),l.createElement(dt.c,{isOpen:i.isOpen,target:c,onMenuClose:i.onClose},u.map((e=>l.createElement(Nt.c,{key:e.key,isSelected:p.key===e.key,value:e.key,onSelect:(0,yt.c)(d,i.onClose)},e.title))))):null}var Mt=r(87512),At=r(80948);const Dt=(0,Mt.c)((function(e,t){return(0,Z.M3)((0,At.c)(e,t),(e=>e.filter((e=>{const t=e.type?W.GG(e.type):null;return t&&t.typeString!==W.yy}))))})),Lt="all";function Rt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const[n,c]=(0,a.c$)(),i=(0,ft.c)(),o=(0,bt.c)(),s=(0,m.w1)(Dt(n.machineIdentifier,c.identifier)),u=(0,l.useMemo)((()=>({key:Lt,title:(0,G.c)("All Libraries")})),[]),p=(0,l.useMemo)((()=>s.reduce(((e,t)=>(e.push({key:t.id,title:t.title}),e)),[u])),[s,u]),d=(0,l.useMemo)((()=>{const t=e.find((e=>"librarySectionID"===e.key));return t&&p.length?p.find((e=>String(e.key)===t.value)):u}),[e,p,u]),y=(0,l.useCallback)((l=>{let n;n=l!==Lt?pt(e,ee.I.LibrarySectionID,{value:l,type:v}):at(e,ee.I.LibrarySectionID),window.location.hash=Ht({filters:n,activeTimePeriod:t,sort:r})}),[e,t,r]);return d&&s.length?l.createElement(l.Fragment,null,l.createElement(Ge.c,{hasMenu:!0,id:i,isMenuOpen:o.isOpen,onPress:o.onToggle},d.title),l.createElement(dt.c,{isOpen:o.isOpen,target:i,onMenuClose:o.onClose},p.map((e=>l.createElement(Nt.c,{key:e.key,isSelected:d.key===e.key,value:e.key,onSelect:(0,yt.c)(y,o.onClose)},e.title))))):null}var Ft=r(66912);function qt(){const[e]=(0,a.c$)(),t=(0,ft.c)(),r=(0,bt.c)(),n=(0,m.w1)(Ft.c),c=(0,l.useMemo)((()=>n.reduce(((e,t)=>(t.isFullOwnedServer&&t.isConnected&&e.push({key:t.machineIdentifier,title:t.friendlyName}),e)),[])),[n]),i=(0,l.useMemo)((()=>c.find((t=>t.key===e.machineIdentifier))),[e,c]),o=(0,l.useCallback)((e=>{window.location.hash=(0,Qe.c)(e)}),[]);return i?l.createElement(l.Fragment,null,l.createElement(Ge.c,{hasMenu:!0,id:t,isMenuOpen:r.isOpen,onPress:r.onToggle},i.title),l.createElement(dt.c,{isOpen:r.isOpen,target:t,onMenuClose:r.onClose},c.map((e=>l.createElement(Nt.c,{key:e.key,isSelected:i.key===e.key,value:e.key,onSelect:(0,yt.c)(o,r.onClose)},e.title))))):null}function zt({activeFilters:e,activeTimePeriod:t,activeSort:r}){const n=(0,ft.c)(),a=(0,bt.c)(),c=[ue.qo.Week,ue.qo.Month,ue.qo.NinetyDays,ue.qo.Year,ue.qo.AllTime],i=(0,l.useCallback)((t=>{const l=pt(e,ee.I.ViewedAt,{value:String((0,ue.GV)(t)),type:v});window.location.hash=Ht({filters:l,activeTimePeriod:t,sort:r})}),[e,r]);return l.createElement(l.Fragment,null,l.createElement(Ge.c,{hasMenu:!0,id:n,isMenuOpen:a.isOpen,onPress:a.onToggle},(0,ue.OA)(t)),l.createElement(dt.c,{isOpen:a.isOpen,target:n,onMenuClose:a.onClose},c.map((e=>l.createElement(Nt.c,{key:e,isSelected:t===e,value:e,onSelect:(0,yt.c)(i,a.onClose)},(0,ue.OA)(e))))))}const Ut=(0,Z.M3)(he,(e=>e.totalSize));function $t({activeFilters:e,activeFilterTitle:t,activeTimePeriod:r,activeSort:n}){const[c]=(0,a.c$)(),i=(0,m.w1)(Ut),o=!V(e,ee.I.MetadataItemID);return l.createElement(Ze.c,null,l.createElement(Ye.c,null,l.createElement(Ge.c,{to:(0,Qe.c)(c.machineIdentifier)},(0,G.c)("Play History")),t?l.createElement(Ge.c,null,t):null,o?l.createElement(qt,null):null,o?l.createElement(l.Fragment,null,l.createElement(Rt,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(xt,{activeFilters:e,activeSort:n,activeTimePeriod:r}),l.createElement(zt,{activeFilters:e,activeSort:n,activeTimePeriod:r})):null,l.createElement(Ve.c,null,i)))}var Bt=r(86008),Kt=r(16812),Vt=r(28500),Gt=r(88588),Yt=r(18376);const Zt={tableHeader:"PlayHistoryTableHeader-tableHeader-SpG2fq"};function Qt({activeTableColumns:e,activeFilters:t,activeTimePeriod:r,activeSort:n}){return l.createElement(Kt.c,null,e.map((({style:e,title:a,ascKey:c,descKey:i,key:o})=>{if(!c)return l.createElement("div",{key:o,className:Zt.tableHeader,style:e},l.createElement(Vt.c,null,l.createElement(Yt.c,null,a())));const s=n===c||n===i,u=n===c;return l.createElement(Gt.c,{key:o,style:e,to:Ht({filters:t,activeTimePeriod:r,sort:u?i:c})},l.createElement(Vt.c,{isActive:s},l.createElement(Yt.c,null,a()),s?l.createElement(Bt.c,{isAscending:!u}):null))})))}const _t=100;function Wt(){var e;const t=(0,m.OY)(),[r]=(0,a.c$)(),n=(0,c.c)(),i=function(e){if(!e)return[];const t=decodeURIComponent(e).match(k);return t?t.reduce(((e,t)=>{const r=t.match(T),[,l,n,a]=r||[];let c=a?d().uniq(a.split(E.OR)):"";return 1===c.length&&(c=c[0]),function(e,t,r){const l=[...e];if(r.type===f){const e=d().findIndex(l,(e=>e.key===t)),n=-1===e?0:e,a=P({key:t},r);-1===e?l.push(a):l.splice(n,1,a)}else d().findWhere(l,{key:t,value:r.value})||l.push(P({key:t},r));return l}(e,l,{value:c,type:j[l]?f:v,operator:n})}),[]):[]}(n.filters),o=(0,s.c)(n.filterTitle),u=null!=(e=(0,oe.es)(ue.qo).find((e=>e===(0,s.c)(n.activeTimePeriod))))?e:ue.qo.AllTime,p=n.sort?(0,s.c)(n.sort):F,y=(0,se.c)(n.isParentType),b=function(e,t){let r=[ae,ce,...ie];return!t&&V(e,ee.I.MetadataItemID)||(r=[le,...r]),V(e,ee.I.LibrarySectionID)||V(e,ee.I.MetadataItemID)||(r=[re,...r]),V(e,ee.I.AccountID)||(r=[te,...r]),r}(i,y);return(0,U.c)(),(0,l.useEffect)((()=>{t(z.c.actions.populateRequested({server:r})),t(q.c.actions.populateRequested({server:r}))}),[t,r]),(0,l.useEffect)((()=>((0,S.SS)((()=>{t(K.c.actions.fetchRangeRequested({server:r,filters:i,sort:p,startIndex:0,size:_t}))})),()=>{t(K.c.actions.reset())})),[i,p,t,r]),l.createElement($.c,{scrollDirection:B.y.None},l.createElement($t,{activeFilterTitle:o,activeFilters:i,activeSort:p,activeTimePeriod:u}),l.createElement(Qt,{activeFilters:i,activeSort:p,activeTableColumns:b,activeTimePeriod:u}),l.createElement(Ke,{activeFilters:i,activeSort:p,activeTableColumns:b}))}function Jt(){const{machineIdentifier:e,providerIdentifier:t}=(0,o.c)(),r=(0,c.c)();return l.createElement(a.cp,{machineIdentifier:e,providerIdentifier:t},l.createElement(u.c,{machineIdentifier:e,providerIdentifier:t},l.createElement(i.cp,{metricsContext:(0,s.c)(r.context),metricsPage:n.gR},l.createElement(Wt,null))))}},39292:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var l=r(11504),n=r(40660);const a=(0,l.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:c},i){return l.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:a}),"data-testid":c,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{clipRule:"evenodd",d:"M24 4.5C24.8284 4.5 25.5 5.17157 25.5 6V37.3787L29.4393 33.4393C30.0251 32.8536 30.9749 32.8536 31.5607 33.4393C32.1464 34.0251 32.1464 34.9749 31.5607 35.5607L25.0607 42.0607C24.4749 42.6464 23.5251 42.6464 22.9393 42.0607L16.4393 35.5607C15.8536 34.9749 15.8536 34.0251 16.4393 33.4393C17.0251 32.8536 17.9749 32.8536 18.5607 33.4393L22.5 37.3787V6C22.5 5.17157 23.1716 4.5 24 4.5Z",fill:"currentColor",fillRule:"evenodd"}))}))},13048:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var l=r(11504),n=r(40660);const a=(0,l.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:c},i){return l.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:a}),"data-testid":c,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{clipRule:"evenodd",d:"M24 42.5C24.8284 42.5 25.5 41.8284 25.5 41V9.62132L29.4393 13.5607C30.0251 14.1464 30.9749 14.1464 31.5607 13.5607C32.1464 12.9749 32.1464 12.0251 31.5607 11.4393L25.0607 4.93934C24.4749 4.35355 23.5251 4.35355 22.9393 4.93934L16.4393 11.4393C15.8536 12.0251 15.8536 12.9749 16.4393 13.5607C17.0251 14.1464 17.9749 14.1464 18.5607 13.5607L22.5 9.62132V41C22.5 41.8284 23.1716 42.5 24 42.5Z",fill:"currentColor",fillRule:"evenodd"}))}))}}]);