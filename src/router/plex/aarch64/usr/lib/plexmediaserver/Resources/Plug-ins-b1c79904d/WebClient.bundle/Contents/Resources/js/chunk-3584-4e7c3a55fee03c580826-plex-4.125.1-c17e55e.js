(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[3584,8332,6756,9292,3048,4440],{70444:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$r});var i=r(11504),n=r(56960),s=r(85052),o=r(37660),a=r(85712),l=r(39968),c=r(29208),u=r(27876),d=r(70508),p=r(84508),m=r(85976),y=r(89448),h=r(96504),f=r(42728),v=r(67532),P=r(4644),E=r(37984),w=r(66984),I=r(86672),g=r(27256),b=r(16556),D=r(31632),O=r(26688),S=r(54456),M=r(26340),T=r(4992),A=r(51912),L=r(57892),C=r(22816),x=r(39528),k=r(85040),j=r(55e3),R=r(57864),H=r(12348),N=r(62704),K=r(46800),U=r(85328),z=r(32516),V=r(45272),_=r(16396),G=r(95924),Q=r(59396),B=r(4012),F=r(8212),W=r(33372),Z=r(75372),q=r(85332),Y=r(92796),$=r(94968),X=r(81640),J=r(89344),ee=r(46058),te=r(92048),re=r(76812),ie=r(45416),ne=Object.defineProperty,se=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,le=(e,t,r)=>t in e?ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const ce=function(e){const t=e,{serverEntityID:r,providerEntityID:n,pivot:s,sourceDirectory:o,directoryKey:a,showSecondHeader:l,children:c}=t,u=((e,t)=>{var r={};for(var i in e)oe.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&se)for(var i of se(e))t.indexOf(i)<0&&ae.call(e,i)&&(r[i]=e[i]);return r})(t,["serverEntityID","providerEntityID","pivot","sourceDirectory","directoryKey","showSecondHeader","children"]);return i.createElement(re.c,((e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&le(e,r,t[r]);if(se)for(var r of se(t))ae.call(t,r)&&le(e,r,t[r]);return e})({className:ie.c.page},u),i.createElement($.c,null,i.createElement(ee.c,{providerEntityID:n,serverEntityID:r,sourceDirectory:o}),s?i.createElement(J.c,{directoryKey:a,providerEntityID:n,serverEntityID:r,sourceDirectory:o}):null,i.createElement(X.c,null)),l?i.createElement(Y.c,null):null,i.createElement(te.c,null,c))};var ue=r(57344),de=r(89984),pe=r(95720),me=r.n(pe),ye=r(43976);function he({items:e,gap:t=0,existingItems:r=[]}){const i=me().sortBy(r,"position"),n=me().sortBy(e,"position");let s=-1/0;return n.forEach((e=>{const n=me().sortedIndex(r,e,"position"),o=r[n-1],a=r[n],l=e.position>s+t,c=!o||e.position>o.position+t,u=!a||e.position<a.position-t;l&&c&&u&&(i.push(e),s=e.position)})),me().sortBy(i,"position")}const fe="minor",ve="major",Pe={container:"TickMarks-container-frZO0i",ticks:"TickMarks-ticks-qo5YPE",tick:"TickMarks-tick-A3yNkp",minor:"TickMarks-minor-ChSTCs TickMarks-tick-A3yNkp",major:"TickMarks-major-4a9f2K TickMarks-tick-A3yNkp",label:"TickMarks-label-PYLVQK"};var Ee,we=Object.defineProperty;function Ie(e){const{ticks:t,pixelProportion:r,majorTickGap:i,minorTickGap:n}=e,s=me().where(t,{type:ve}),o=me().where(t,{type:fe}),a=he({items:s,gap:r*i});return he({items:o,existingItems:a,gap:r*n})}class ge extends i.Component{constructor(e,t){super(e,t),this.state={ticks:Ie(e)}}UNSAFE_componentWillReceiveProps(e){const{ticks:t,pixelProportion:r,majorTickGap:i,minorTickGap:n}=e,s=this.props.ticks!==t,o=this.props.pixelProportion!==r,a=this.props.majorTickGap!==i,l=this.props.minorTickGap!==n;(s||o||a||l)&&this.setState({ticks:Ie(e)})}render(){return i.createElement("div",{className:Pe.container},i.createElement("div",{className:Pe.ticks},this.state.ticks.map((({type:e,position:t,label:r})=>i.createElement("div",{key:t,className:Pe[e],style:{top:100*t+"%"}},r&&"major"===e?i.createElement("div",{className:Pe.label},r):null)))))}}((e,t,r)=>{t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(ge,"symbol"!=typeof(Ee="defaultProps")?Ee+"":Ee,{majorTickGap:20,minorTickGap:5});const be=ge;var De=r(36324),Oe=r(94952),Se=r(12612),Me=r(37704),Te=r(29432),Ae=r(9940),Le=r(29372),Ce=r(89080),xe=r.n(Ce),ke=r(96704),je=r(41832),Re=r(86852),He=r(55524),Ne=r(14176),Ke=r(4968),Ue=r(55268);const ze=function(e){const t=(0,Ue.c)(e);return i.createElement("div",{style:t.style},e.children)};var Ve=Object.defineProperty,_e=(e,t,r)=>(((e,t,r)=>{t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Ge extends i.Component{constructor(e,t){super(e,t),_e(this,"onSelectPress",(()=>{const{isSelected:e,items:t,onSelectItems:r,onDeselectItems:i}=this.props;e?i(t):r(t)})),this.state={layout:this._createLayout(e),cellRenderer:this._createCellRenderer(e)}}UNSAFE_componentWillReceiveProps(e){const t=e.aspectRatios!==this.props.aspectRatios,r=e.columns!==this.props.columns,i=e.viewportWidth!==this.props.viewportWidth,n=e.viewportHeight!==this.props.viewportHeight,s=e.serverEntityID!==this.props.serverEntityID,o=e.providerEntityID!==this.props.providerEntityID,a=e.metadataListEntityID!==this.props.metadataListEntityID,l=t||r||n||i,c=s||o||a;if(l||c){const t={};l&&(t.layout=this._createLayout(e)),c&&(t.cellRenderer=this._createCellRenderer(e)),this.setState(t)}}_createLayout(e){const t=(0,Ne.c)({aspectRatios:e.aspectRatios,columns:e.columns});return(0,He.c)({columns:e.columns,rows:t,maximumHeight:e.cellHeight-(e.footerHeight+e.headerHeight)})}_createCellRenderer(e){const{serverEntityID:t,providerEntityID:r,metadataListEntityID:i,containerKey:n,listType:s}=e;return(0,Ke.c)({serverEntityID:t,providerEntityID:r,metadataListEntityID:i,containerKey:n,listType:s},Re.c)}render(){const{cellIndex:e,cellX:t,cellY:r,cellWidth:n,cellHeight:s,isVirtual:o,title:a,items:l,size:c,viewportHeight:u,scrollTop:d,isSelected:p,hasSelection:m}=this.props,{layout:y,cellRenderer:h}=this.state;return i.createElement(ze,{cellHeight:s,cellIndex:e,cellWidth:n,cellX:t,cellY:r,isVirtual:o},i.createElement("div",{className:xe()(m&&"MetadataMomentCell-hasSelection-pp54EB","MetadataMomentCell-header-oKQGsr")},i.createElement("div",{className:"MetadataMomentCell-actions-L_WAU3"},i.createElement(je.c,{className:"MetadataMomentCell-selectButton-sHo8jO SelectButton-selectButton-_goGWp",isSelected:p,title:a,onPress:this.onSelectPress})),i.createElement("div",{className:"MetadataMomentCell-title-spuo5n"},a)),i.createElement(ke.c,{cellRenderer:h,items:l,keyPropName:"metadataItemEntityID",layout:y,scrollTop:d-r,size:c,viewportHeight:u,viewportWidth:n}))}}_e(Ge,"defaultProps",{headerHeight:0,footerHeight:0});const Qe=Ge;function Be(){return(0,R.M3)(((e,{start:t})=>t),((e,{end:t})=>t),(0,De.c)(),((e,t,r)=>{const{populatedRange:i,metadataItems:n}=r;return e<i.start||t>i.end?me().times(t-e,(()=>null)):n.slice(e-i.start,t-i.start)}))}function Fe(){return(0,R.M3)(Be(),Oe.c,((e,t)=>e.map((e=>t[e]))))}const We=(0,u.Ul)((function(){return(0,R.M3)((0,De.c)(),Be(),(0,R.M3)(((e,{avgAR:t})=>t),Fe(),((e,t)=>t.map((t=>t?(0,Me.c)(t,e):e)))),(0,R.M3)(Fe(),Ae.c,((e,t)=>e.every((e=>e&&(0,Le.c)(t,e.ratingKey))))),G.c,((e,t,r,i,n)=>({containerKey:e.containerKey,listType:"photo",aspectRatios:r,items:t,isSelected:i,hasSelection:n.activeSelectionItems.length>0})))}),(function(e,t){return{onSelectItems(t){e((0,Te.Yp)({type:Se.Ww,ids:t}))},onDeselectItems(t){e((0,Te.gt)({ids:t}))}}}))(Qe);var Ze=r(43880),qe=r(61652),Ye=Object.defineProperty,$e=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var tt=Object.defineProperty,rt=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,st=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class ot extends i.Component{constructor(e,t){super(e,t),this.state={layout:this._createLayout(e)}}UNSAFE_componentWillReceiveProps(e){const t=e.items!==this.props.items,r=e.columns!==this.props.columns;(t||r)&&this.setState({layout:this._createLayout(e)})}_createLayout(e){return function(e){const t=e,{columns:r=1,areas:i=[],innerPaddingTop:n=0,innerPaddingBottom:s=0}=t,o=((e,t)=>{var r={};for(var i in e)Xe.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&$e)for(var i of $e(e))t.indexOf(i)<0&&Je.call(e,i)&&(r[i]=e[i]);return r})(t,["columns","areas","innerPaddingTop","innerPaddingBottom"]);return(0,qe.c)(((e,t)=>{for(var r in t||(t={}))Xe.call(t,r)&&et(e,r,t[r]);if($e)for(var r of $e(t))Je.call(t,r)&&et(e,r,t[r]);return e})({getCellHeights:function(e){return i.map((t=>function(e,t){return Math.max(1,Math.round(e/r))*t+(n+s)}(t,e/r)))}},o))}({columns:e.columns,areas:e.items.map((e=>e.area)),innerPaddingTop:e.headerHeight,innerPaddingBottom:e.footerHeight,outerPaddingTop:e.listPadding,outerPaddingRight:e.listPadding-e.listGutter,outerPaddingBottom:e.listPadding,outerPaddingLeft:e.listPadding})}render(){const{serverEntityID:e,providerEntityID:t,metadataListEntityID:r,columns:n,headerHeight:s,footerHeight:o,cellComponent:a}=this.props;return i.createElement(Ze.c,((e,t)=>{for(var r in t||(t={}))it.call(t,r)&&st(e,r,t[r]);if(rt)for(var r of rt(t))nt.call(t,r)&&st(e,r,t[r]);return e})({cellRenderer:(0,Ke.c)({serverEntityID:e,providerEntityID:t,metadataListEntityID:r,columns:n,headerHeight:s,footerHeight:o},a),layout:this.state.layout},this.props))}}const at=ot;var lt=Object.defineProperty,ct=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,pt=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const mt={dispatchPopulateMetadataListRange:Te.k1,dispatchDeselectAllMetadataListItems:Te.ee,dispatchResetMetadataList:Te.y4};class yt extends i.Component{constructor(){super(...arguments),((e,t,r)=>{pt(this,t+"",r)})(0,"onPageRequest",(({startIndex:e,endIndex:t})=>{const{metadataListEntityID:r,disableReloadThreshold:i,items:n,dispatchPopulateMetadataListRange:s}=this.props;s({metadataListEntityID:r,disableReloadThreshold:i,startIndex:n[e].start,endIndex:n[t].end-1,pages:1})}))}componentWillUnmount(){const{metadataListEntityID:e}=this.props;this.props.dispatchDeselectAllMetadataListItems({metadataListEntityID:e}),this.props.dispatchResetMetadataList({metadataListEntityID:e})}render(){const e=this.props,{dispatchPopulateMetadataListRange:t,dispatchDeselectAllMetadataListItems:r,dispatchResetMetadataList:n}=e,s=((e,t)=>{var r={};for(var i in e)ut.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&ct)for(var i of ct(e))t.indexOf(i)<0&&dt.call(e,i)&&(r[i]=e[i]);return r})(e,["dispatchPopulateMetadataListRange","dispatchDeselectAllMetadataListItems","dispatchResetMetadataList"]);return i.createElement(at,((e,t)=>{for(var r in t||(t={}))ut.call(t,r)&&pt(e,r,t[r]);if(ct)for(var r of ct(t))dt.call(t,r)&&pt(e,r,t[r]);return e})({onPageRequest:this.onPageRequest},s))}}const ht=(0,u.Ul)((function(){return(0,R.M3)(G.c,(e=>({disableReloadThreshold:!!e.activeSelectionType})))}),mt)(yt);var ft=r(672),vt=r(95156);var Pt=Object.defineProperty,Et=(e,t,r)=>(((e,t,r)=>{t in e?Pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const wt=Math.max(0,parseInt(vt.c.timelineGutter,10)-40);class It extends i.Component{constructor(e,t){super(e,t),Et(this,"_landmarks"),Et(this,"onListUpdate",(e=>{const t=e.landmarks,r=e.listStyle&&e.listStyle.height;if(t!==this._landmarks){this._landmarks=t;const e=function(e,t){const r={},i={};return e.reduce(((e,{index:n,position:s})=>{const o=(0,ft.c)(1e3*t[n],"yyyy MM"),a=o.slice(0,4);return r[a]?i[o]||(i[o]=!0,e.push({position:s,type:fe})):(r[a]=!0,i[o]=!0,e.push({position:s,type:ve,label:a})),e}),[])}(t,me().pluck(this.props.moments,"startsAt"));this.setState({ticks:e,listHeight:r})}})),this.state={ticks:null,listHeight:null}}render(){const{serverEntityID:e,providerEntityID:t,metadataListEntityID:r,moments:n,columns:s,height:o,onMomentScrollIndexChange:a}=this.props,{ticks:l,listHeight:c}=this.state,u=1/o,d=c&&c>o;return n.length?i.createElement("div",{className:"TimelinePageContent-container-mvQDHr"},i.createElement(ht,{cellComponent:We,className:"TimelinePageContent-stack-vNqxhP PageContent-pageContent-rk0p0C",columns:s,footerHeight:59,hasNestedList:!0,items:n,keyPropName:"id",listGutter:wt,listPadding:55,metadataListEntityID:r,providerEntityID:t,scrollPositionStorageKey:"TimelinePageContent",scrollerClassName:"TimelinePageContent-scroller-Kg90e8",serverEntityID:e,size:n.length,onListScrollIndexChange:a,onListUpdate:this.onListUpdate}),i.createElement("div",{className:"TimelinePageContent-adornment-QvGJVk"},l&&d?i.createElement(be,{pixelProportion:u,ticks:l}):null)):i.createElement(te.c,null,i.createElement(ue.c,{iconComponent:ye.c.photo,title:(0,Q.c)("There are no events in this library")}))}}const gt=It;var bt=r(49579),Dt=r(84136),Ot=r(5164),St=r(47392),Mt=r(70968),Tt=r(89876),At=r(35688),Lt=r(61500),Ct=r(19264),xt=r(51796),kt=r(79268),jt=r(42336);const Rt={showPlayAll:Nt,showShuffle:function({server:e,provider:t,stableUser:r,metadataList:i}){return Nt({server:e,provider:t,stableUser:r,metadataList:i})&&!!t.features.playqueue},showQueue:function({server:e,provider:t,stableUser:r,metadataList:i}){return Nt({server:e,provider:t,stableUser:r,metadataList:i})},showAddToPlaylist:function({server:e,provider:t,stableUser:r,metadataList:i}){return!(!e.isFullServer||!i.isFirstItemLibraryItem)},showOptimize:function({server:e,provider:t,stableUser:r,metadataList:i}){return!!(e.isFullOwnedServer&&e.transcoderVideo&&i.isFirstItemLibraryItem)}},Ht={mixed:[],movie:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],show:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],season:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],episode:["showPlayAll","showShuffle","showQueue","showAddToPlaylist","showOptimize"],artist:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],album:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],track:["showPlayAll","showShuffle","showQueue","showAddToPlaylist"],photoalbum:["showPlayAll","showShuffle","showAddToPlaylist"],photo:["showPlayAll","showShuffle","showAddToPlaylist"],clip:["showPlayAll","showShuffle","showAddToPlaylist","showOptimize"],genre:[]};function Nt({server:e,provider:t,stableUser:r,metadataList:i}){return(0,jt.c)(e,t,r.features,i)}var Kt=r(32636),Ut=r(21248),zt=r(49340),Vt=r(24752),_t=r(36728),Gt=r(7396),Qt=Object.defineProperty,Bt=(e,t,r)=>(((e,t,r)=>{t in e?Qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class Ft extends i.Component{constructor(e,t){super(e,t),Bt(this,"onAddToPlaylistPress",(()=>{this.setState({isAddToPlaylistModalOpen:!0})})),Bt(this,"onAddToPlaylistClose",(()=>{this.setState({isAddToPlaylistModalOpen:!1}),this.props.onMenuClose()})),this.state={isAddToPlaylistModalOpen:!1}}createOnPress(e){return()=>{e(),this.props.onMenuClose()}}render(){const e=this.props,{isAddToPlaylistModalOpen:t}=this.state;return i.createElement("div",null,e.showPlayAll?i.createElement(_t.c,{onPress:this.createOnPress(e.onPlayAllPress)},(0,Q.c)("Play All")):null,e.showShuffle?i.createElement(_t.c,{onPress:this.createOnPress(e.onShufflePress)},(0,Q.c)("Shuffle")):null,e.showQueue?i.createElement(_t.c,{onPress:this.createOnPress(e.onPlayNextPress)},(0,Q.c)("Play Next")):null,e.showQueue?i.createElement(_t.c,{onPress:this.createOnPress(e.onAddToQueuePress)},(0,Q.c)("Add to Queue")):null,e.showAddToPlaylist?i.createElement(_t.c,{onPress:this.createOnPress(this.onAddToPlaylistPress)},(0,Q.c)("Add to Playlist...")):null,e.showOptimize?i.createElement(_t.c,{onPress:this.createOnPress(e.onOptimizePress)},(0,Q.c)("Optimize...")):null,e.showAddToPlaylist?i.createElement(Gt.c,{isOpen:t,metadataListEntityID:e.metadataListEntityID,providerEntityID:e.providerEntityID,serverEntityID:e.serverEntityID,onModalClose:this.onAddToPlaylistClose}):null)}}const Wt=Ft;var Zt=Object.defineProperty,qt=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,Xt=(e,t,r)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Jt=function(e){const t=e,{target:r,isOpen:n}=t,s=((e,t)=>{var r={};for(var i in e)Yt.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&qt)for(var i of qt(e))t.indexOf(i)<0&&$t.call(e,i)&&(r[i]=e[i]);return r})(t,["target","isOpen"]);return i.createElement(Vt.c,{isOpen:e.isOpen,target:e.target,onMenuClose:e.onMenuClose},i.createElement(Wt,((e,t)=>{for(var r in t||(t={}))Yt.call(t,r)&&Xt(e,r,t[r]);if(qt)for(var r of qt(t))$t.call(t,r)&&Xt(e,r,t[r]);return e})({},s)))};var er=r(12332),tr=r(24356),rr=r(24476),ir=r(56588),nr=r(22320),sr=r(59436),or=Object.defineProperty,ar=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,dr=Object.prototype.propertyIsEnumerable,pr=(e,t,r)=>t in e?or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mr=(e,t,r)=>(pr(e,"symbol"!=typeof t?t+"":t,r),r);class yr extends i.Component{constructor(e,t){super(e,t),mr(this,"_moreButtonID"),mr(this,"onPlayShortcut",(()=>{this.props.showPlayAll&&this.props.onPlayAllPress()})),mr(this,"onAddToPlaylistPress",(()=>{this.setState({isAddToPlaylistModalOpen:!0,isSmartPlaylist:!1})})),mr(this,"onAddToSmartPlaylistPress",(()=>{this.setState({isAddToPlaylistModalOpen:!0,isSmartPlaylist:!0})})),mr(this,"onAddToPlaylistClose",(()=>{this.setState({isAddToPlaylistModalOpen:!1})})),mr(this,"onActionsPress",(e=>{this.setState({isActionsMenuOpen:!this.state.isActionsMenuOpen})})),mr(this,"onActionsMenuClose",(()=>{this.setState({isActionsMenuOpen:!1})})),this.state={isActionsMenuOpen:!1,isAddToPlaylistModalOpen:!1,isSmartPlaylist:!1},this._moreButtonID=(0,zt.c)()}componentDidMount(){Ut.c.on("shortcut:playSelected",this.onPlayShortcut)}componentWillUnmount(){Ut.c.off("shortcut:playSelected",this.onPlayShortcut)}render(){const{className:e,serverEntityID:t,providerEntityID:r,metadataListEntityID:n,customFilterRoute:s,showPlayAll:o,showPlayAllOverflow:a,showShuffle:l,showShuffleOverflow:c,showAddToPlaylist:u,showAddToPlaylistOverflow:d,showAddToSmartPlaylist:p,showOverflow:m,onPlayAllPress:y,onShufflePress:h}=this.props,{isActionsMenuOpen:f,isAddToPlaylistModalOpen:v,isSmartPlaylist:P}=this.state;return i.createElement("div",{className:e},o?i.createElement(nr.c,{playLabel:(0,Q.c)("Play All"),onPress:y}):null,l?i.createElement(sr.c,{onPress:h}):null,u?i.createElement(rr.c,{customFilterRoute:s,metadataListEntityID:n,providerEntityID:r,serverEntityID:t,showAddToSmartPlaylist:p,onAddToPlaylistPress:this.onAddToPlaylistPress,onAddToSmartPlaylistPress:this.onAddToSmartPlaylistPress}):null,m?i.createElement(ir.c,{iconComponent:tr.c,id:this._moreButtonID,isMenuOpen:f,label:(0,Q.c)("More..."),onPress:this.onActionsPress}):null,i.createElement(Jt,(E=((e,t)=>{for(var r in t||(t={}))ur.call(t,r)&&pr(e,r,t[r]);if(cr)for(var r of cr(t))dr.call(t,r)&&pr(e,r,t[r]);return e})({},this.props),w={isOpen:f,showAddToPlaylist:d,showPlayAll:a,showShuffle:c,target:this._moreButtonID,onMenuClose:this.onActionsMenuClose},ar(E,lr(w)))),u?i.createElement(Gt.c,{isOpen:v,metadataListEntityID:n,providerEntityID:r,serverEntityID:t,smart:P,onModalClose:this.onAddToPlaylistClose}):null);var E,w}}const hr=(0,er.cp)(yr,["showPlayAll","showShuffle","showAddToPlaylist"],["showOptimize","showQueue"]);var fr=Object.defineProperty,vr=Object.defineProperties,Pr=Object.getOwnPropertyDescriptors,Er=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,gr=(e,t,r)=>t in e?fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,br=(e,t)=>{for(var r in t||(t={}))wr.call(t,r)&&gr(e,r,t[r]);if(Er)for(var r of Er(t))Ir.call(t,r)&&gr(e,r,t[r]);return e},Dr=(e,t)=>vr(e,Pr(t));const Or=(0,xt.c)((function(){return(0,R.M3)(((e,{listType:t})=>t),U.c,Lt.c,Ct.c,(0,De.c)(),((e,t,r,i,n)=>function({server:e,provider:t,stableUser:r,metadataList:i,listType:n}){const s=n||i.firstItemType||"mixed",o=Ht[s];return o?o.reduce(((n,o)=>{const a=Rt[o];return(0,kt.c)(me().isFunction(a),`getMetadataListActionProps: Invalid action, ${o}, for ${s}`),n[o]=!!(e&&t&&i)&&a({server:e,provider:t,stableUser:r,metadataList:i}),n}),{}):{}}({server:t,provider:r,stableUser:i,metadataList:n,listType:e})))}),(function(e,t){const r={serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,metadataListEntityID:t.metadataListEntityID,listType:t.listType,metricsPage:t.metricsPage,metricsProperties:{context:t.metricsContext||p.LIST}};return{onPlayAllPress(){e(At.wb(r))},onShufflePress(){e(At.WI(r))},onPlayNextPress(){e(At.gV(Dr(br({},r),{options:{playAll:!0,next:!0}})))},onAddToQueuePress(){e(At.gV(Dr(br({},r),{options:{playAll:!0,next:!1}})))},onOptimizePress(){e(Te.Yj(r))}}}),Kt.c)(hr);var Sr=r(72884);const Mr=(0,u.Ul)((function(){return(0,R.M3)((0,De.c)(),(e=>({totalSize:e.totalSize,listType:bt.Ww,listStyle:Sr.MOSAIC,allListStyles:[Sr.MOSAIC]})))}))((function(e){const{serverEntityID:t,providerEntityID:r,metadataListEntityID:n,sourceDirectory:s,title:o,totalSize:a,listType:l,listStyle:c,allListStyles:u}=e;return i.createElement(i.Fragment,null,i.createElement($.c,null,i.createElement(ee.c,{providerEntityID:r,serverEntityID:t,sourceDirectory:s}),i.createElement(J.c,{directoryKey:W.eo.TIMELINE,providerEntityID:r,serverEntityID:t,sourceDirectory:s}),i.createElement(X.c,null,i.createElement(Tt.c,{allListStyles:u,selectedListStyle:c}))),i.createElement(Y.c,null,i.createElement(Mt.c,null,i.createElement(Ot.c,null,o),i.createElement(Dt.c,null,a)),i.createElement(St.c,null,i.createElement(Or,{listType:l,metadataListEntityID:n,providerEntityID:r,serverEntityID:t}))))}));var Tr=r(30032);var Ar=Object.defineProperty,Lr=Object.defineProperties,Cr=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,jr=Object.prototype.propertyIsEnumerable,Rr=(e,t,r)=>t in e?Ar(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Hr=(e,t)=>{for(var r in t||(t={}))kr.call(t,r)&&Rr(e,r,t[r]);if(xr)for(var r of xr(t))jr.call(t,r)&&Rr(e,r,t[r]);return e},Nr=(e,t,r)=>(Rr(e,"symbol"!=typeof t?t+"":t,r),r);class Kr extends i.Component{constructor(e,t){super(e,t),Nr(this,"onMeasure",(({width:e,height:t})=>{this.setState({isMeasured:!0,width:e,height:t})})),Nr(this,"onMomentScrollIndexChange",(e=>{this.setState({currentMomentTitle:this.props.moments[e].title})})),this.state={isMeasured:!1,currentMomentTitle:"",width:0,height:0}}componentWillUnmount(){this.props.onCloseTimelinePage()}render(){const{serverEntityID:e,providerEntityID:t,providerMetricsIdentifier:r,metadataListEntityID:s,sourceDirectory:o,pivot:a,isMomentListPending:l,isMomentListPopulated:c,moments:u,activeSelectionType:d,columnAdjustment:p}=this.props,{isMeasured:m,width:y,height:h,currentMomentTitle:f}=this.state,v=200-100*p,P=12+p,E=Math.min(Math.ceil(y/v),P);if(c)return i.createElement(q.c,{metricsPage:n.ii,metricsProperties:{identifier:r,mode:"timeline",type:"photo",style:Sr.MOSAIC},scrollDirection:F.KE},d?i.createElement(Tr.c,{providerEntityID:t,serverEntityID:e}):i.createElement(Mr,{metadataListEntityID:s,providerEntityID:t,serverEntityID:e,sourceDirectory:o,title:f}),i.createElement(B.c,{className:"TimelinePage-measured-KwtybV",ignorePosition:!0,onMeasure:this.onMeasure},m?i.createElement(gt,{columns:E,height:h,metadataListEntityID:s,moments:u,providerEntityID:t,serverEntityID:e,onMomentScrollIndexChange:this.onMomentScrollIndexChange}):null));const w={serverEntityID:e,providerEntityID:t,sourceDirectory:o,pivot:a,directoryKey:W.eo.TIMELINE,scrollDirection:F.KE};if(l)return i.createElement(ce,(I=Hr({},w),Lr(I,Cr({showSecondHeader:!0}))),i.createElement(ue.c,null,i.createElement(Z.c,null)));var I;const g={title:(0,Q.c)("There was an error loading the timeline for this library")};return i.createElement(ce,Hr({},w),i.createElement(de.c,Hr({},g)))}}const Ur=Kr,zr=(0,R.M3)((e=>e.ui.timelinePage.momentList),(e=>{if(!e)return[];let t=0;return e.moments.map((e=>{const r=t;t+=e.size;const{id:i,title:n,size:s,avgAR:o,startsAt:a}=e,l=e.size*(e.avgAR||1);return{start:r,end:t,area:l,id:i,title:n,size:s,avgAR:o,startsAt:a}}))})),Vr=(0,V.c)(Ur,(function(e){const t=e.ui.timelinePage;return{serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,momentKey:t.momentKey}}),(function(e,t){e(_._e({serverEntityID:t.serverEntityID,providerEntityID:t.providerEntityID,libraryKey:t.libraryKey,momentKey:t.momentKey})),e(_.s1())})),_r=(0,u.Ul)((function(){return(0,R.M3)(((e,{libraryKey:t})=>t),(e=>e.ui.timelinePage),zr,U.c,(0,K.c)(),(0,H.c)(),(0,R.M3)(((e,{directoryKey:t})=>t),(0,H.c)(),((e,t)=>(0,N.c)(t,e))),G.c,z.c,((e,t,r,i,n,s,o,a,l)=>{const{containerKey:c,isMomentListPending:u,isMomentListPopulated:d}=t;return{metadataListEntityID:t.metadataList,providerMetricsIdentifier:n.metricsIdentifier,sourceDirectory:s,pivot:o,moments:r,isMomentListPending:u,isMomentListPopulated:d,containerKey:c,momentKey:h.c.join(e,"cluster?clusterZoomLevel=1"),activeSelectionType:a.activeSelectionType,disableReloadThreshold:!!a.activeSelectionType,columnAdjustment:l.columnAdjustment,serverVersion:i.version}}))}),(function(e){return{onCloseTimelinePage(){e(_.uA({}))}}}))(Vr);function Gr({pivotType:e,directorySourceURI:t,directoryKey:r,selectedPivot:n}){const[s,o,l]=(0,E.c$)(),m=(0,u.w1)(d.c);if(function(e,t){return e===f.S0&&t}(null==n?void 0:n.requires,m))return i.createElement(S.c,null);switch(e){case a.Qf.Hub:return i.createElement(c.cp,{name:null==n?void 0:n.context},i.createElement(D.c,{sourceURI:t}));case a.Qf.List:return i.createElement(c.cp,{name:null==n?void 0:n.context},i.createElement(O.c,{directoryKey:r,directorySourceURI:t,selectedPivot:n}));case a.Qf.View:switch(null==n?void 0:n.key){case a.OG.SharedItems:return i.createElement(c.cp,{name:null==n?void 0:n.context},i.createElement(O.c,{directoryKey:r,directorySourceURI:t,listStyle:v.y.SharedItems,selectedPivot:n}));case a.OG.Timeline:{const e=(0,P.c)(o,a.Aj.Content);return i.createElement(_r,{directoryKey:a.OG.Timeline,libraryKey:h.c.join([null==e?void 0:e.key,null==l?void 0:l.id,"cluster"],{clusterZoomLevel:1}),providerEntityID:o.entityID,serverEntityID:s.entityID,sourceDirectoryID:null==l?void 0:l.id})}case a.OG.DiscoverProfile:return i.createElement(c.cp,{metricsContextParam:p.SELF},i.createElement(k.c,{showHeader:!1}));case a.OG.DiscoverFriends:return i.createElement(c.cp,{metricsContextParam:p.FRIEND},i.createElement(x.c,{showHeader:!1}));case a.OG.DiscoverActivity:return i.createElement(c.cp,{metricsContextParam:p.DISCOVER},i.createElement(b.c,null));case a.OG.DiscoverPeople:return i.createElement(c.cp,{metricsContextParam:p.DISCOVER},i.createElement(C.c,null))}}return i.createElement(j.c,null)}const Qr=[a.OG.Guide,a.OG.RecordingSchedule,a.OG.Timeline];function Br({className:e,directoryKey:t,pageType:r,machineIdentifier:n,providerIdentifier:s,contentDirectoryID:o,pivotID:l}){const c=(0,u.OY)(),d=(0,A.c)({machineIdentifier:n,providerIdentifier:s,contentDirectoryID:o,pageType:r,pivotID:l,directoryKey:t}),p=d?d.type:null!=r?r:a.Qf.List,h=(0,L.c)(d),f=function(e,t){return(null==e?void 0:e.key)===a.OG.SharedItems?null!=t?t:(0,L.c)(e):t}(d,t),v=null!=h?h:t,P=v?(0,m.c)({serverIdentifier:n,providerIdentifier:s,key:v}):void 0;return(0,i.useEffect)((()=>()=>{(0,y.SS)((()=>{c(T.c.actions.resetMeta())}))}),[c]),P?i.createElement(E.cp,{contentDirectoryID:o,machineIdentifier:n,providerIdentifier:s,selectedPivot:d},i.createElement(w.c,{className:e,scrollDirection:g.y.None},d&&p===a.Qf.View&&Qr.includes(d.key)?null:i.createElement(M.c,{selectedPivot:d,sourceURI:P}),i.createElement(Gr,{directoryKey:f,directorySourceURI:P,pivotType:p,selectedPivot:d}))):i.createElement(w.c,{className:e},i.createElement(I.c,null))}var Fr=r(18730),Wr=r(40376),Zr=r(75536),qr=r(50249);function Yr(e,t){switch(e.source){case o.qU:switch(null==t?void 0:t.id){case s.gz:return n.Mz;case s.ik:return n.ox;case s.YD:return n.W4;default:return n.Im}case o._w:return(null==t?void 0:t.id)===s.sV?n.QV:n._w;default:return n.wh}}function $r(){const e=(0,l.c)(),t=e.key?(0,Zr.c)(e.key):void 0,{machineIdentifier:r,providerIdentifier:n}=(0,Fr.c)(),s=(0,A.c)({machineIdentifier:r,providerIdentifier:n,contentDirectoryID:e.source?(0,Zr.c)(e.source):void 0,pivotID:e.pivot?(0,Zr.c)(e.pivot):void 0,pageType:void 0,directoryKey:void 0}),o=e.pageType?(0,Zr.c)(e.pageType):void 0,u=(0,Wr.es)(a.Qf).find((e=>e===o));return i.createElement(c.cp,{metricsContextParam:(0,Zr.c)(e.context),metricsPage:Yr(e,s)},i.createElement(qr.c,{machineIdentifier:r,providerIdentifier:n},t||(0,Zr.c)(e.source)?i.createElement(Br,{contentDirectoryID:(0,Zr.c)(e.source),directoryKey:t,machineIdentifier:r,pageType:u,pivotID:(0,Zr.c)(e.pivot),providerIdentifier:n}):i.createElement(j.c,null)))}},20448:e=>{var t="undefined"!=typeof Element,r="function"==typeof Map,i="function"==typeof Set,n="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(!s(e[l],o[l]))return!1;return!0}if(r&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!s(l.value[1],o.get(l.value[0])))return!1;return!0}if(i&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=a;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!s(e[c[l]],o[c[l]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return s(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},60036:(e,t,r)=>{"use strict";r.d(t,{W:()=>u});var i=r(11504),n=r(95352),s=r(20448),o=r.n(s),a=function(e){return e.reduce((function(e,t){var r=t[0],i=t[1];return e[r]=i,e}),{})},l="undefined"!=typeof window&&window.document&&window.document.createElement?i.useLayoutEffect:i.useEffect,c=[],u=function(e,t,r){void 0===r&&(r={});var s=i.useRef(null),u={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||c},d=i.useState({styles:{popper:{position:u.strategy,left:"0",top:"0"}},attributes:{}}),p=d[0],m=d[1],y=i.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,r=Object.keys(t.elements);m({styles:a(r.map((function(e){return[e,t.styles[e]||{}]}))),attributes:a(r.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),h=i.useMemo((function(){var e={onFirstUpdate:u.onFirstUpdate,placement:u.placement,strategy:u.strategy,modifiers:[].concat(u.modifiers,[y,{name:"applyStyles",enabled:!1}])};return o()(s.current,e)?s.current||e:(s.current=e,e)}),[u.onFirstUpdate,u.placement,u.strategy,u.modifiers,y]),f=i.useRef();return l((function(){f.current&&f.current.setOptions(h)}),[h]),l((function(){if(null!=e&&null!=t){var i=(r.createPopper||n.uV)(e,t,h);return f.current=i,function(){i.destroy(),f.current=null}}}),[e,t,r.createPopper]),{state:f.current?f.current.state:null,styles:p.styles,attributes:p.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}}},18332:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(11504),n=r(40660);const s=(0,i.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:s="inherit",testID:o},a){return i.createElement("svg",{ref:a,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M9 6H12V42H9V6Z",fill:"currentColor"}),i.createElement("path",{clipRule:"evenodd",d:"M27 6H21C20.2044 6 19.4413 6.31607 18.8787 6.87868C18.3161 7.44129 18 8.20435 18 9V39C18 39.7957 18.3161 40.5587 18.8787 41.1213C19.4413 41.6839 20.2044 42 21 42H27C27.7956 42 28.5587 41.6839 29.1213 41.1213C29.6839 40.5587 30 39.7957 30 39V9C30 8.20435 29.6839 7.44129 29.1213 6.87868C28.5587 6.31607 27.7956 6 27 6ZM27 9V39H21V9H27Z",fill:"currentColor",fillRule:"evenodd"}),i.createElement("path",{d:"M39 6H36V42H39V6Z",fill:"currentColor"}))}))},86756:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(11504),n=r(40660);const s=(0,i.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:s="inherit",testID:o},a){return i.createElement("svg",{ref:a,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M40.5 22.5H7.5V25.5H40.5V22.5Z",fill:"currentColor"}))}))},39292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(11504),n=r(40660);const s=(0,i.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:s="inherit",testID:o},a){return i.createElement("svg",{ref:a,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{clipRule:"evenodd",d:"M24 4.5C24.8284 4.5 25.5 5.17157 25.5 6V37.3787L29.4393 33.4393C30.0251 32.8536 30.9749 32.8536 31.5607 33.4393C32.1464 34.0251 32.1464 34.9749 31.5607 35.5607L25.0607 42.0607C24.4749 42.6464 23.5251 42.6464 22.9393 42.0607L16.4393 35.5607C15.8536 34.9749 15.8536 34.0251 16.4393 33.4393C17.0251 32.8536 17.9749 32.8536 18.5607 33.4393L22.5 37.3787V6C22.5 5.17157 23.1716 4.5 24 4.5Z",fill:"currentColor",fillRule:"evenodd"}))}))},13048:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(11504),n=r(40660);const s=(0,i.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:s="inherit",testID:o},a){return i.createElement("svg",{ref:a,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{clipRule:"evenodd",d:"M24 42.5C24.8284 42.5 25.5 41.8284 25.5 41V9.62132L29.4393 13.5607C30.0251 14.1464 30.9749 14.1464 31.5607 13.5607C32.1464 12.9749 32.1464 12.0251 31.5607 11.4393L25.0607 4.93934C24.4749 4.35355 23.5251 4.35355 22.9393 4.93934L16.4393 11.4393C15.8536 12.0251 15.8536 12.9749 16.4393 13.5607C17.0251 14.1464 17.9749 14.1464 18.5607 13.5607L22.5 9.62132V41C22.5 41.8284 23.1716 42.5 24 42.5Z",fill:"currentColor",fillRule:"evenodd"}))}))},44440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(11504),n=r(40660);const s=(0,i.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:s="inherit",testID:o},a){return i.createElement("svg",{ref:a,"aria-hidden":!t,"aria-label":t,className:(0,n.w)({align:e,color:r,size:s}),"data-testid":o,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{clipRule:"evenodd",d:"M3 24C3 12.45 12.45 3 24 3C35.55 3 45 12.45 45 24C45 35.55 35.55 45 24 45C12.45 45 3 35.55 3 24ZM31.4246 34.253L34.253 31.4246L26.8284 24L34.253 16.5754L31.4246 13.7469L24 21.1716L16.5754 13.7469L13.7469 16.5754L21.1716 24L13.7469 31.4246L16.5754 34.253L24 26.8284L31.4246 34.253Z",fill:"currentColor",fillRule:"evenodd"}))}))}}]);