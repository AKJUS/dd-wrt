"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[3345],{88201:(e,t,r)=>{function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{A:()=>n})},98618:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(46772);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.A)("Needs Update"):t.relay?(0,n.A)("Indirect"):t.isPrivate?(0,n.A)("Nearby"):(0,n.A)("Remote"):e.isRelayed?r=(0,n.A)("Indirect"):e.isUnavailable?r=(0,n.A)("Unavailable"):e.isUnauthorized?r=(0,n.A)("Unauthorized"):(s=!0,r=(0,n.A)("Connecting")),{isConnecting:s,status:r}}},93345:(e,t,r)=>{r.r(t),r.d(t,{default:()=>yt});var n=r(96540),s=r(520),i=r(57347),o=r(61225),a=r(1081),c=r(28031),l=r(62876);const p=(0,c.A)((0,a.Mz)(l.A,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var d=r(43930),m=r(65468),h=r(59753),f=r(99844),v=r(69182),S=r(75732),y=r(53310),b=r(25473),P=r(81724),I=r(3339),E=r(93788),g=r(50905),x=r(71811),A=r(1250);const N=(0,x.A)(A.A,(({homeSettings:e})=>e)),C=(0,a.Mz)(N,(e=>e.servers),g.A,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}));var O=r(20163),D=r(34041),B=r(80305),w=r(65184),j=r(19549),F=r(88050),k=r(46772),R=r(8282),T=r(55730),H=r(92658),M=r(37925),U=Object.defineProperty,z=Object.defineProperties,_=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,K=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,q=(e,t)=>{for(var r in t||(t={}))K.call(t,r)&&X(e,r,t[r]);if(W)for(var r of W(t))V.call(t,r)&&X(e,r,t[r]);return e},J=(e,t)=>z(e,_(t)),Q=(e,t,r)=>(X(e,"symbol"!=typeof t?t+"":t,r),r);class Y extends n.Component{constructor(e,t){super(e,t),Q(this,"store"),Q(this,"unsubscribe"),Q(this,"onChange",(e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=q({},t);r.forEach((t=>{const r=n[t];n[t]=J(q({},r),{value:e})})),this.store.dispatch(R.o1.replaceState(n))})),Q(this,"onFormStoreChange",(()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})})),this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)K.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&W)for(var n of W(e))t.indexOf(n)<0&&V.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(T.A,J(q({},s),{value:this.state.value,onChange:(0,H.A)(this.onChange,r)})):null}}Q(Y,"contextTypes",{formStore:M.A});const G=Y;function L(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:a,children:c}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),a),n.createElement(f.A,{className:i},c))}L.defaultProps={className:"FirstRunExperienceActionsContainer-container-ny0mbu",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-VHybrq",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-jyPdKj",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-y2WlYD Scroller-vertical-nKq0Q8"};const Z=L;var $=r(39439),ee=r(37423),te=r(4590),re=r(94507);const ne={container:"FirstRunExperienceStep-container-CS60ox",actions:"FirstRunExperienceStep-actions-gY3hXF",stepContainer:"FirstRunExperienceStep-stepContainer-wQawUg",stepText:"FirstRunExperienceStep-stepText-NTZbsm",stepHeading:"FirstRunExperienceStep-stepHeading-J6noxn",stepBody:"FirstRunExperienceStep-stepBody-gJiLmC",stepIcon:"FirstRunExperienceStep-stepIcon-Nw5HXA",activeStepIcon:"FirstRunExperienceStep-activeStepIcon-SxIbcv FirstRunExperienceStep-stepIcon-Nw5HXA",stepButton:"FirstRunExperienceStep-stepButton-yDEnXT"};var se=Object.defineProperty,ie=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,ce=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,le=(e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&ce(e,r,t[r]);if(ie)for(var r of ie(t))ae.call(t,r)&&ce(e,r,t[r]);return e},pe=(e,t)=>{var r={};for(var n in e)oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ie)for(var n of ie(e))t.indexOf(n)<0&&ae.call(e,n)&&(r[n]=e[n]);return r};function ue(e){const{step:t,isActive:r,onPress:s}=e,i=(0,n.useCallback)((()=>{s(t)}),[s,t]);return n.createElement(te.A,{className:r?ne.activeStepIcon:ne.stepIcon,onPress:i},t)}function de(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:a,stepHeadingText:c,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:d,component:m,onButtonBackPress:h,onButtonNextPress:f,onStepPress:v}=t,S=pe(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),y=$.A.prop("X-Plex-Product");return n.createElement(m,le({className:r},S),n.createElement("div",{className:s},d),n.createElement("div",{className:i},n.createElement("div",{className:ne.stepText},(0,k.A)("{productName} Setup",{productName:y}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(ue,{key:e,isActive:a===e,step:e,onPress:v})))),n.createElement("h3",{className:ne.stepHeading},c),n.createElement("p",{className:ne.stepBody},l),p?n.createElement(ee.A,{className:ne.stepButton,onPress:h},p):null,n.createElement(ee.A,{className:ne.stepButton,kind:re.jd,type:"submit",onPress:f},u)))}de.defaultProps={className:ne.container,actionsClassName:ne.actions,stepContainerClassName:ne.stepContainer,component:function(e){var t=e,{children:r}=t,s=pe(t,["children"]);return n.createElement("div",le({},s),r)},steps:2,step:1};const me=de;var he=r(48724),fe=r(69652);var ve=Object.defineProperty,Se=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Pe=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ie=(0,he.A)((function(e){const t=e,{source:r,name:s}=t,i=((e,t)=>{var r={};for(var n in e)ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Se)for(var n of Se(e))t.indexOf(n)<0&&be.call(e,n)&&(r[n]=e[n]);return r})(t,["source","name"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-ZECmgr",htmlFor:s},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-lbHYK9"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-hvrz7k"},n.createElement(fe.A,{source:r})),r.title),n.createElement(T.A,((e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&Pe(e,r,t[r]);if(Se)for(var r of Se(t))be.call(t,r)&&Pe(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-luiKcA CheckInput-input-dUDRsF",name:s},i)))})),Ee=function(e){const{isPending:t,steps:r,sources:s,hiddenDirectoryIDs:i,onSubmit:o,onButtonBackPress:a,onStepPress:c}=e;return t?n.createElement(v.A,null):n.createElement(me,{component:R.Ay,step:2,stepBodyText:(0,k.A)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,k.A)("Go Back"):void 0,stepButtonNextText:(0,k.A)("Finish Setup"),stepHeadingText:(0,k.A)("Customize your Media"),steps:r,onButtonBackPress:a,onStepPress:c,onSubmit:o},n.createElement(Z,{rightTitle:s.length?n.createElement(G,{inputClassName:"SelectNavigationStep-input-HAIipV CheckInput-input-dUDRsF",name:"allSources",names:s.map((e=>e.key))}):null,title:(0,k.A)("Pinned Sources")},s.map((e=>n.createElement(Ie,{key:e.key,initialValue:!i.includes(e.directoryID),name:e.key,source:e})))))};var ge=Object.defineProperty,xe=Object.defineProperties,Ae=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,De=(e,t,r)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Be=(0,a.Mz)(C,b.A,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),we=(0,a.Mz)(I.A,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function je(e){return t=this,null,r=function*(){try{return(yield F.A.get("/library/sections",{server:(0,j.A)(e),params:{includePreferences:1}})).data.MediaContainer.Directory.reduce(((e,t)=>(t.Preferences.Setting.some((e=>"hidden"===e.id&&"0"!==e.value))&&e.push(t.key),e)),[])}catch(e){return[]}},new Promise(((e,n)=>{var s=e=>{try{o(r.next(e))}catch(e){n(e)}},i=e=>{try{o(r.throw(e))}catch(e){n(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,i);o((r=r.apply(t,null)).next())}));var t,r}function Fe(e,t,r){return t.reduce(((t,n)=>{const s=(0,w.A)(n),i=(0,B.A)({sourceServer:e,sourceProvider:n,directories:s&&s.directories,hasHybridGuide:r});return t.push(...i),t}),[])}const ke={dispatchSetupSources:m.mc};class Re extends n.Component{constructor(e){var t,r;super(e),r=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})},De(this,"symbol"!=typeof(t="onSubmit")?t+"":t,r),this.state={isFetchingHiddenDirectoryIDs:!0,hiddenDirectoryIDs:{}}}componentDidMount(){this.props.server&&je(this.props.server).then((e=>{this.setState({isFetchingHiddenDirectoryIDs:!1,hiddenDirectoryIDs:e})}))}componentDidUpdate(){this.state.isFetchingHiddenDirectoryIDs&&this.props.server&&je(this.props.server).then((e=>{this.setState({isFetchingHiddenDirectoryIDs:!1,hiddenDirectoryIDs:e})})),this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)Ce.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ne)for(var n of Ne(e))t.indexOf(n)<0&&Oe.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(Ee,(a=((e,t)=>{for(var r in t||(t={}))Ce.call(t,r)&&De(e,r,t[r]);if(Ne)for(var r of Ne(t))Oe.call(t,r)&&De(e,r,t[r]);return e})({hiddenDirectoryIDs:this.state.hiddenDirectoryIDs,isPending:t||this.state.isFetchingHiddenDirectoryIDs||0===r.length,sources:r},o),c={onSubmit:this.onSubmit},xe(a,Ae(c))));var a,c}}const Te=(0,o.Ng)((function(){return(0,a.Mz)(C,Be,E.A,we,A.A,P.A,((e,t,r,n,s,i)=>{const o=Fe(e,t,i),a=Fe(r,n,i),{sidebarSettings:{hasCompletedSetup:c}}=s,{watchlistSources:l,otherCloudSources:p}=a.reduce(((e,t)=>(t.providerIdentifier===D.OB&&t.directoryID===O.Ou?e.watchlistSources.push(t):e.otherCloudSources.push(t),e)),{watchlistSources:[],otherCloudSources:[]});return{server:e,isPending:!(!e||e.connectionTestResult!==y.xg.PENDING),sources:[...l,...o,...p],hasCompletedSetup:c}}))}),ke)(Re);var He=r(5556),Me=r.n(He),Ue=r(11361),ze=r(55826),_e=r(32485),We=r.n(_e),Ke=r(45315),Ve=r(88201),Xe=r(98618),qe=r(75154),Je=r(24139);var Qe=Object.defineProperty,Ye=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tt=(0,o.Ng)((function(){return(0,Ue.A)((0,ze.A)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,Ve.A)((0,Ke.A)(e),(0,Xe.A)(e).status);return n.createElement(te.A,{className:We()("SelectPreferredServerItem-serverButton-VmKM_j",t&&"SelectPreferredServerItem-isSelected-aZkc14",r&&"SelectPreferredServerItem-isUnavailable-govWpw"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-AsWJhf"},n.createElement("span",{className:"SelectPreferredServerItem-title-IPFLVg"},(0,qe.A)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-QN4Qet"},i)),t?n.createElement(Je.A,{"aria-label":(0,k.A)("Selected"),className:"SelectPreferredServerItem-serverMenuIcon-mbWPsv"}):null)}));var rt;tt.propTypes=(rt=((e,t)=>{for(var r in t||(t={}))Ze.call(t,r)&&et(e,r,t[r]);if(Le)for(var r of Le(t))$e.call(t,r)&&et(e,r,t[r]);return e})({},tt.propTypes),Ye(rt,Ge({machineIdentifier:Me().string.isRequired,serverEntityID:Me().string.isRequired})));const nt=tt,st=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(me,{step:1,stepBodyText:(0,k.A)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,k.A)("Continue"),stepHeadingText:(0,k.A)("Choose your Preferred Server"),onButtonNextPress:i,onStepPress:o},n.createElement(Z,{title:(0,k.A)("Plex Media Servers")},r.map((e=>n.createElement(nt,{key:e.entityID,isSelected:t&&t.machineIdentifier===e.machineIdentifier,machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,onPress:s})))))};var it=Object.defineProperty,ot=Object.defineProperties,at=Object.getOwnPropertyDescriptors,ct=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t,r)=>(ut(e,"symbol"!=typeof t?t+"":t,r),r);function mt(e,t){return!e&&t.length>0}class ht extends n.Component{constructor(e,t){super(e,t),dt(this,"onNextStepPress",(()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))})),dt(this,"onBackStepPress",(()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))})),dt(this,"onStepPress",(e=>{this.setState({step:e})})),dt(this,"onEndFirstRunExperience",(()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})})),this.state={step:1}}componentDidMount(){(0,h.Cc)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(((e,t)=>ot(e,at({preferredServerIdentifiers:null})))(((e,t)=>{for(var r in t||(t={}))lt.call(t,r)&&ut(e,r,t[r]);if(ct)for(var r of ct(t))pt.call(t,r)&&ut(e,r,t[r]);return e})({},this.props)))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),mt(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||mt(t,r)?n.createElement(S.A,null,n.createElement(v.A,null)):n.createElement(f.A,{className:"FirstRunExperiencePage-container-dTL3Ek"},1!==i||o?n.createElement(Te,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience,onStepPress:this.onStepPress}):n.createElement(st,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onSavePreferredServer:s,onStepPress:this.onStepPress}))}}const ft=ht,vt={onSavePreferredServer:m.HJ,onEndFirstRunExperience:m.tS,onResetCustomization:m.a5},St=(0,o.Ng)((function(){return(0,a.Mz)(d.A,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),vt)(ft);function yt(){return n.createElement("div",{className:s.c},n.createElement(i.A,null,n.createElement(St,null)))}}}]);