"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[7971,1755,6686],{71284:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(1081),n=r(17469);function a(){return(0,o.Mz)(((e,{mediaSubscriptionEntityID:t})=>t),n.A,((e,t)=>t[e]))}},35518:(e,t,r)=>{r.d(t,{A:()=>g});var o=r(96540),n=r(4590),a=r(20934),s=r(54409);const i={toolbarButton:"ToolbarButton-toolbarButton-PCjB_g",bottomLeft:"ToolbarButton-bottomLeft-V3a71x Tooltip-bottomLeft-ZA9QOY Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipLeftAlignArrow-SYYsix",bottomCenter:"ToolbarButton-bottomCenter-PX024r Tooltip-bottomCenter-kGnBM4 Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipCenterAlignArrow-Y8ToMu",bottomRight:"ToolbarButton-bottomRight-FvoCX0 Tooltip-bottomRight-wLkq3G Tooltip-tooltip-VFBXza Tooltip-tooltipArrow-rrJjO7 Tooltip-tooltipTopArrow-zHVo6b Tooltip-tooltipRightAlignArrow-jFr4_J",hasFocus:"ToolbarButton-hasFocus-A6zj9p"};var l,c,d,p=Object.defineProperty,u=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class f extends o.Component{render(){const e=this.props,{children:t,tooltip:r,className:s,hasLabel:l,tooltipAttachment:c,hideOnPress:d,onPress:p}=e,f=((e,t)=>{var r={};for(var o in e)m.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&u)for(var o of u(e))t.indexOf(o)<0&&y.call(e,o)&&(r[o]=e[o]);return r})(e,["children","tooltip","className","hasLabel","tooltipAttachment","hideOnPress","onPress"]),g=i[c],v=`${g} ${i.hasFocus}`;return o.createElement(a.A,((e,t)=>{for(var r in t||(t={}))m.call(t,r)&&b(e,r,t[r]);if(u)for(var r of u(t))y.call(t,r)&&b(e,r,t[r]);return e})({"aria-label":r,className:s,component:n.A,hideOnPress:d,tooltip:r,tooltipClassName:g,tooltipFocusedClassName:v,onPress:p},f),t)}}l=f,c="defaultProps",d={className:i.toolbarButton,tooltipAttachment:s.Kl},b(l,c+"",d);const g=f},57956:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(96540),n=r(85243),a=Object.defineProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function d(e){return o.createElement(n.A,((e,t)=>{for(var r in t||(t={}))i.call(t,r)&&c(e,r,t[r]);if(s)for(var r of s(t))l.call(t,r)&&c(e,r,t[r]);return e})({},e))}d.defaultProps={className:"PageHeaderBadge-badge-Odac7M"};const p=d},59147:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(5556),n=r.n(o),a=r(96540),s=Object.defineProperty,i=(e,t,r)=>(((e,t,r)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class l extends a.Component{constructor(e,t){super(e,t),i(this,"metricsContext"),this.metricsContext=e.metricsContext}getChildContext(){return{metricsContext:this.metricsContext}}render(){return this.props.children?a.Children.only(this.props.children):null}}i(l,"propTypes",{children:n().node,metricsContext:n().string}),i(l,"childContextTypes",{metricsContext:n().string});const c=l},43313:(e,t,r)=>{r.d(t,{A:()=>s});var o=r(1081),n=r(23498);function a(e,t){const{playQueueItems:r,currentIndex:o}=e,n=t[r[o]];return n&&n.metadataItem}function s(){return(0,o.Mz)((({ui:e})=>e.audioVideoPlayer&&e.audioVideoPlayer.playQueue),(({ui:e})=>e.photoPlayer&&e.photoPlayer.playQueue),((e,{metadataItemEntityID:t})=>t),n.A,((e,t,r,o)=>{if(!r)return!1;let n,s;return e&&(n=a(e,o)),t&&(s=a(t,o)),n===r||s===r}))}},67971:(e,t,r)=>{r.r(t),r.d(t,{default:()=>So});var o=r(96540),n=r(59147),a=r(94772),s=r(5571),i=r(57122),l=r(61225),c=r(1081),d=r(74125),p=r.n(d),u=r(34792),m=r(55567),y=r(80222),b=r(84593),f=r(22701),g=r(98004),v=r(45974),P=r(74692),w=r.n(P),h=r(14345),A=r(26471),E=r(99187),S=r(81131),D=r(79947),O=r(24229),C=r(6055),I=r(36588),j=r(59753),x=r(93915),T=r(58335),N=Object.defineProperty,M=Object.defineProperties,L=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,H=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&H(e,r,t[r]);if(k)for(var r of k(t))R.call(t,r)&&H(e,r,t[r]);return e};const V="ui/downloadsPage/initDownloadsPage",K="ui/downloadsPage/resetDownloadsPage",U="ui/downloadsPage/fetchProvidersWithStorage",W="ui/downloadsPage/saveDownloadsParams",F=(0,A.A)(V),q=(0,A.A)(K),X=(0,A.A)(U),Z=(0,A.A)(W);(0,E.A)({[V](e,t){},[K](e,t){},[U](e,t,r){const o=function(e){return e.get("ui").get("downloadsPage")}(e),n=e.get("embeddedServer");(0,j.Cc)((()=>{o.set({isProvidersPending:!0,providersError:null})}));const a=n.getXHROptions(x.A.join("/media/providers",{includeStorage:1}),{headers:{Accept:h.Pq.accept}});(0,C.A)("[Downloads] Updating offline file size"),w().ajax(a).then((e=>{n.get("providers").add(e,{parse:!0,merge:!0}),o.set({isProvidersPending:!1,isProvidersPopulated:!0})}),(e=>{o.set({isProvidersPending:!1,providersError:(0,T.A)(e)})}))},[W](e,t,r){const o=e.get("user").get("experienceSettings").get("savedPivotParams");var n,a;r((0,D.hg)({savedPivotParams:(n=B({},o),a={downloads:t},M(n,L(a)))}))},[S.CP](e,t,r){const{activity:o}=t;(function(e,t){const r=e.get("embeddedServer");return!!r&&r.entityID()===t.serverEntityID})(e,t)&&o.type===I.vQ&&o.Response.status===O.Wz&&r(X())}});var $=r(17469);function _(){return(0,c.Mz)((e=>e.downloads.subscriptions),$.A,((e=[],t)=>e.map((e=>t[e]))))}var Y=r(46772);const{ASCENDING:G,DESCENDING:Q}=u.A.directions,J="title",ee="createdAt",te="storageTotal";var re=r(94564),oe=r(19780),ne=r(44018),ae=r(4590),se=r(94507),ie=r(90817),le=r(41149),ce=r(69182),de=r(49184),pe=r(75732),ue=r(92838),me=r(51208),ye=r(8373),be=r(48127),fe=r(80292),ge=r(26622),ve=r(33742),Pe=r(84230);const we=parseInt(Pe.A.downloadCellHeight,10),he=(0,ve.A)(we,5);var Ae=r(5556),Ee=r.n(Ae),Se=r(71811),De=r(84074),Oe=r(25473),Ce=r(72688),Ie=r(36836),je=r(71284),xe=r(38176),Te=r(9374),Ne=r(51730),Me=r(91979);var Le=r(13004),ke=r(39369),ze=r(89663),Re=r(32485),He=r.n(Re),Be=r(40500),Ve=r(7828),Ke=r(31755),Ue=r(82974),We=r(20140),Fe=r(55574),qe=r(77339),Xe=r(38309),Ze=r(15348),$e=r(98160),_e=r(5292),Ye=r(23006),Ge=r(19514),Qe=r(28008),Je=r(37549),et=r(39121),tt=r(56686),rt=r(43313);const ot=(0,l.Ng)((function(){return(0,c.Mz)(((e,{isDisabled:t})=>t),(0,rt.A)(),((e,t)=>({isDisabled:e||t})))}))((e=>{const{isDisabled:t,title:r,onPress:n}=e;return o.createElement(Fe.m,{tooltip:(0,Y.A)("Delete")},o.createElement(Be.K0,{accessibilityLabel:(0,Y.A)("Delete {title}",{title:r}),disabled:t,icon:tt.default,iconSize:"m",size:"s",testID:"downloadSubscriptionRemoveButton",transparent:!0,onPress:n}))}));var nt=r(25886);const at=function(e){return(0,nt.A)(e||0,e>=1e9?2:0)};var st=r(11127),it=r(78375);var lt=Object.defineProperty,ct=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var mt=Object.defineProperty,yt=Object.defineProperties,bt=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Pt=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const wt=(0,c.Mz)(Me.A,(e=>(0,Ie.p)(e))),ht=(0,c.Mz)(Me.A,Oe.A,((e,t)=>e&&e.providers.map((e=>t[e])))),At=new RegExp(ee),Et=new RegExp(te),St=(0,l.Ng)((function(){return(0,c.Mz)(((e,{activeSort:t})=>t),((e,{listContext:t})=>t),wt,(0,Se.A)((0,c.Mz)((0,je.A)(),ht,((e,t)=>{const{source:r}=e.hint,o=t.find((e=>e.source===r));return(0,Ce.B)(o)})),(e=>e)),(0,je.A)(),(0,c.Mz)(De.A,(0,je.A)(),((e,t)=>t.target?e[t.target.metadata]:null)),(e=I.qY,(0,c.Mz)((0,je.A)(),(0,Ne.A)(e),((e,t)=>t.find((({Context:t})=>t.subscriptionID===e.key))))),((e,t,r,o,n,a,s)=>{const{grabOperations:i,hint:l}=n,{type:c}=l,d=function(e,t,r){const{type:o}=e,n=(0,Le.A)(o,t);return(0,ke.A)(n,null,o,r||{},t)}(l,t,a),p=c!==xe.Kq,u=a&&p?(0,ze.A)(r,o,a.key,void 0,a.playlistType):void 0,m=i&&i.find((e=>e.status===O.ff));return{grabError:m&&(m.error||(0,Y.A)("An unexpected error occurred")),isRefreshing:!!s,isDownloadPending:!a&&!!s&&null==s.Context.completed,isDownloading:!!s&&null!=s.Context.total&&null!=s.progress,mediaSubscription:n,imageWidth:d.width,imageHeight:d.height,imageUrl:d.url,metadataItemEntityID:a?a.entityID:null,providerEntityID:o.entityID,route:u,progress:s?s.progress:null,completed:s?s.Context.completed:null,total:s?s.Context.total:null,showEdit:(y=c,y===xe._O),showCreatedAt:At.test(e),showStorageTotal:!!a&&Et.test(e)};var y}));var e}),(function(e,t){const{mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n}=t,a={mediaSubscriptionEntityID:r,metricsPage:o,metricsProperties:n};return{onEditItem(){e((0,Te.HI)(a))},onDeleteItem(){e((0,v.bY)(a))},onRetryItem(){e((0,v._u)(a))}}}))((function(e){const{cellIndex:t,grabError:r,imageHeight:n,imageUrl:a,imageWidth:s,mediaSubscription:i,metadataItemEntityID:l,providerEntityID:c,route:d,progress:p,completed:u,total:m,showStorageTotal:y,showCreatedAt:f,showEdit:g,serverEntityID:v,isDownloadPending:P,isDownloading:w,isRefreshing:h,onEditItem:A,onRetryItem:E,onDeleteItem:S}=e,D=(0,Ge.A)(e),[O,C]=(0,o.useState)(!1),[I,j]=(0,Ye.A)(),x=(0,o.useCallback)((()=>{C(!0)}),[]),T=(0,o.useCallback)((()=>{C(!1),S()}),[S]),N=(0,o.useCallback)((()=>{C(!1)}),[]),{hint:M,target:L}=i,{title:k,type:z,subtype:R}=M;let H,B;P?H=(0,Y.A)("Waiting to download"):w&&(H=m>1?(0,Y.A)("Downloading {completed} of {total}",{completed:u+1,total:m}):(0,Y.A)("Downloading")),y?B=at(i.storageTotal):f&&(B=(0,qe.A)(i.createdAt)),B=B?` ${_e.w} ${B}`:B;const V=!1,K=!h&&r,U=function(e){const{parentTitle:t,grandparentTitle:r,type:o,index:n}=e,a=o===xe.Kq;let s;return o===xe.SEASON?s=(0,Ze.A)({seasonIndex:n,noLeadingZero:!0,useLongName:!0}):o===xe.EPISODE?s=r:a&&r&&t?s=`${r} ${_e.w} ${t}`:a&&r&&(s=r),s}(M);return o.createElement("div",((e,t)=>{for(var r in t||(t={}))dt.call(t,r)&&ut(e,r,t[r]);if(ct)for(var r of ct(t))pt.call(t,r)&&ut(e,r,t[r]);return e})({className:t%2?"DownloadSubscriptionSummaryCell-alternateItem-yWeXKH MetadataSummaryCell-alternateItem-qJRho9 MetadataSummaryCell-item-zizwY0":"DownloadSubscriptionSummaryCell-item-PN24EO MetadataSummaryCell-item-zizwY0",style:D.style},j),d?o.createElement(ae.A,{"aria-label":k,className:"DownloadSubscriptionSummaryCell-underlay-AQEjGK MetadataSummaryCell-underlay-lVQ3U2",tabIndex:"0",to:d}):null,o.createElement("div",{className:"DownloadSubscriptionSummaryCell-overlay-dgruv9 MetadataSummaryCell-overlay-pNGHay"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-posterContainer-kdVgru MetadataSummaryCell-posterContainer-agLI_B"},D.isPlaceholder?o.createElement(et.A,{imageHeight:n,imageWidth:s}):o.createElement(Je.A,{imageHeight:n,imageUrl:a,imageWidth:s,isOffscreen:!1,metadataItemEntityID:l,metadataKey:i.hint.source,providerEntityID:c,route:d,serverEntityID:v,showEdit:V,showLink:V,showMore:V,showOverlay:!!L,showSelect:V,subtype:R,title:k,type:z})),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summaryContainer-BIjOtH MetadataSummaryCell-summaryContainer-vKIYSr"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-titleContainer-dDHjDA MetadataSummaryCell-titleContainer-iJUBIV"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-title-n1itJC MetadataSummaryCell-title-oz7jL8"},function(e){const{title:t,parentTitle:r,grandparentTitle:o,type:n,index:a,parentIndex:s,originallyAvailableAt:i}=e;let l=o||r||t;return n===xe.EPISODE?l=`${(0,Xe.A)({episodeIndex:a,seasonIndex:s,date:i,noLeadingZero:!0,separator:" · "})} ${_e.w} ${t}`:n===xe.Kq&&(l=t),l}(M))),o.createElement("div",{className:"DownloadSubscriptionSummaryCell-summary-HplPrA MetadataSummaryCell-summary-tXxX2g"},U?o.createElement("div",null,U):null,K?o.createElement(We.I1,{gap:"s",verticalAlign:"center"},o.createElement(Ve.default,{color:"alert"}),r):o.createElement("div",null,function(e){const{guid:t,type:r}=e,{MOVIE:o,SEASON:n,EPISODE:a}=xe;return r===o&&t.includes(st.x3)?(0,Y.A)("Video"):r===n?(0,Y.A)("TV Show Season"):r===a?(0,Y.A)("TV Show Episode"):xe.AU(r).title}(M),B))),P||w?o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusContainer-kZsCwk"},o.createElement("div",{className:"DownloadSubscriptionSummaryCell-statusText-Uhpnlt"},H),o.createElement($e.A,{lineWidth:2,progress:p,showIndeterminate:P,showProgressText:!1,size:20,strokeColor:it.A.selectedColor,trackColor:it.A.defaultLinkDisabledLinkColor})):null,o.createElement("div",{className:He()("DownloadSubscriptionSummaryCell-actions-niNn1E MetadataSummaryCell-actions-HnEQtT",I&&"DownloadSubscriptionSummaryCell-isHovered-Ol85EI")},K?o.createElement(Fe.m,{tooltip:(0,Y.A)("Retry")},o.createElement(Be.K0,{accessibilityLabel:(0,Y.A)("Retry {title}",{title:k}),icon:Ke.default,iconSize:"m",size:"s",transparent:!0,onPress:E})):null,g?o.createElement(Fe.m,{tooltip:(0,Y.A)("Edit")},o.createElement(Be.K0,{accessibilityLabel:(0,Y.A)("Edit download details for {title}",{title:k}),icon:Ue.default,iconSize:"m",size:"s",transparent:!0,onPress:A})):null,o.createElement(ot,{metadataItemEntityID:l,title:k,onPress:x}),o.createElement(Qe.A,{isOpen:O,message:(0,Y.A)("Are you sure you want to delete this download?"),metricsPage:b.Lz,title:(0,Y.A)("Delete Download"),onCancel:N,onConfirm:T}))))}));var Dt;St.propTypes=(Dt=((e,t)=>{for(var r in t||(t={}))gt.call(t,r)&&Pt(e,r,t[r]);if(ft)for(var r of ft(t))vt.call(t,r)&&Pt(e,r,t[r]);return e})({},St.propTypes),yt(Dt,bt({mediaSubscriptionEntityID:Ee().string.isRequired,metricsPage:Ee().string.isRequired,metricsProperties:Ee().object.isRequired})));const Ot=St;var Ct=Object.defineProperty,It=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Tt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Mt=(e,t,r)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lt=(e,t)=>{for(var r in t||(t={}))Tt.call(t,r)&&Mt(e,r,t[r]);if(xt)for(var r of xt(t))Nt.call(t,r)&&Mt(e,r,t[r]);return e},kt=(e,t)=>It(e,jt(t));const zt=function(e){const t=e,{activeSort:r,metricsPage:n,metricsProperties:a,serverEntityID:s}=t,i=((e,t)=>{var r={};for(var o in e)Tt.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&xt)for(var o of xt(e))t.indexOf(o)<0&&Nt.call(e,o)&&(r[o]=e[o]);return r})(t,["activeSort","metricsPage","metricsProperties","serverEntityID"]),l=(0,o.useMemo)((()=>e=>o.createElement(Ot,kt(Lt({},e),{activeSort:r,listContext:fe.iJ,listType:ge.oV,metricsPage:n,metricsProperties:a,serverEntityID:s}))),[r,n,a,s]);return o.createElement(be.A,kt(Lt({},i),{cellRenderer:l,className:"DownloadSubscriptionSummaryList-content-XZHPvL",keyPropName:"mediaSubscriptionEntityID",layout:he,scrollPositionStorageKey:"DownloadSubscriptionSummaryList",scrollerClassName:"DownloadSubscriptionSummaryList-scroller-Aq9cpn VirtualListScroller-scroller-eDZkq_"}))};var Rt=r(75734),Ht=Object.defineProperty,Bt=Object.defineProperties,Vt=Object.getOwnPropertyDescriptors,Kt=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Ft=(e,t,r)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qt=(e,t)=>{for(var r in t||(t={}))Ut.call(t,r)&&Ft(e,r,t[r]);if(Kt)for(var r of Kt(t))Wt.call(t,r)&&Ft(e,r,t[r]);return e},Xt=(e,t)=>Bt(e,Vt(t));let Zt,$t;function _t(e,t=window.location.hash){const r=function(e){if(Zt===e)return $t;const t=e.split("?"),r=t.length>1?t[1]:void 0,o=r?x.A.parseParams(r):{};return Zt=e,$t={url:t[0],params:o},$t}(t);return x.A.join(r.url,Xt(qt({},r.params),{type:e.type,sort:e.sort,save:1}))}function Yt(e,t){return e?function(e,t){const r=xe.AU(e);return t?r.plural:r.title}(e,t):(0,Y.A)("All")}function Gt({type:e,sort:t}){const r={save:1};return e&&(r.type=e),t&&(r.sort=t),{type:e,title:Yt(e,!0),route:_t(r)}}var Qt=r(57956),Jt=r(45091),er=r(75331),tr=r(62321),rr=r(79555),or=r(44874),nr=r(60710),ar=r(14890),sr=r(14422),ir=r(57567),lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,pr=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,mr=Object.prototype.propertyIsEnumerable,yr=(e,t,r)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const{ASCENDING:br,DESCENDING:fr}=u.A.directions,gr=function(e){const t=e,{activeType:r,activeSubtype:n,activeSort:a,sorts:s,selectedSort:i,onMenuClose:l}=t,c=((e,t)=>{var r={};for(var o in e)ur.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&pr)for(var o of pr(e))t.indexOf(o)<0&&mr.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","activeSubtype","activeSort","sorts","selectedSort","onMenuClose"]);return o.createElement(nr.A,((e,t)=>cr(e,dr(t)))(((e,t)=>{for(var r in t||(t={}))ur.call(t,r)&&yr(e,r,t[r]);if(pr)for(var r of pr(t))mr.call(t,r)&&yr(e,r,t[r]);return e})({},c),{onMenuClose:l}),s.map((({key:e,descKey:t,defaultDirection:s,title:c})=>{const d=i.key===e;let p=s;d&&(p=a?a===t?br:fr:s===br?fr:br);const u=p===fr;return o.createElement(ar.A,{key:e,iconComponent:u?sr.A:ir.A,isSelected:d,selectedIconAriaLabel:u?(0,Y.A)("Ascending"):(0,Y.A)("Descending"),to:_t({type:r,subtype:n,sort:u?t:e}),onPress:l},c)})))};var vr=Object.defineProperty,Pr=Object.defineProperties,wr=Object.getOwnPropertyDescriptors,hr=Object.getOwnPropertySymbols,Ar=Object.prototype.hasOwnProperty,Er=Object.prototype.propertyIsEnumerable,Sr=(e,t,r)=>t in e?vr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Dr=function(e){const t=e,{activeType:r,types:n,onMenuClose:a}=t,s=((e,t)=>{var r={};for(var o in e)Ar.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&hr)for(var o of hr(e))t.indexOf(o)<0&&Er.call(e,o)&&(r[o]=e[o]);return r})(t,["activeType","types","onMenuClose"]);return o.createElement(nr.A,((e,t)=>Pr(e,wr(t)))(((e,t)=>{for(var r in t||(t={}))Ar.call(t,r)&&Sr(e,r,t[r]);if(hr)for(var r of hr(t))Er.call(t,r)&&Sr(e,r,t[r]);return e})({},s),{onMenuClose:a}),n.map((({type:e,title:t,route:n})=>{let s;return s=e?e===r:!r,o.createElement(ar.A,{key:e||"all",isSelected:s,to:n,onMenuClose:a},t)})))};var Or=r(58315),Cr=r(73466),Ir=r(35518),jr=r(99557),xr=r(54409),Tr=r(9219),Nr=r(85756),Mr=r(31182);function Lr(e){const t=e["aria-label"],r=e.className,n=e.style,a={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-toolbar-refresh-560"};a["aria-hidden"]=!t,a.style=n,a.className=Mr.A.plexIcon+(r?" "+r:"");const s=[o.createElement.apply(o,["path",{d:"M432.272,156.583C396.336,112.3 341.473,84 280,84C171.752,84 84,171.752 84,280C84,388.248 171.752,476 280,476L280,518C148.556,518 42,411.443 42,280C42,148.556 148.556,42 280,42C357.038,42 425.526,78.602 469.024,135.364L532.871,98.503L504,244.497L363.129,196.503L432.272,156.583Z"}].concat([]))];return t&&s.unshift(o.createElement("title",null,t)),o.createElement.apply(o,["svg",a].concat(s))}Lr.propTypes={"aria-label":Ee().string,className:Ee().string,style:Ee().object};const kr=Lr;var zr=Object.defineProperty,Rr=Object.defineProperties,Hr=Object.getOwnPropertyDescriptors,Br=Object.getOwnPropertySymbols,Vr=Object.prototype.hasOwnProperty,Kr=Object.prototype.propertyIsEnumerable,Ur=(e,t,r)=>t in e?zr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Wr=2*(0,jr.A)(Nr.A.slowSpeed),Fr=function(e){const t=e,{isProcessingSubscriptions:r,onPress:n}=t,a=((e,t)=>{var r={};for(var o in e)Vr.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&Br)for(var o of Br(e))t.indexOf(o)<0&&Kr.call(e,o)&&(r[o]=e[o]);return r})(t,["isProcessingSubscriptions","onPress"]),s=(0,Tr.A)(r,!0,Wr)||r;return o.createElement(Ir.A,((e,t)=>Rr(e,Hr(t)))(((e,t)=>{for(var r in t||(t={}))Vr.call(t,r)&&Ur(e,r,t[r]);if(Br)for(var r of Br(t))Kr.call(t,r)&&Ur(e,r,t[r]);return e})({},a),{"data-testid":"toolbarProcessSubscriptions",isDisabled:r,tooltip:(0,Y.A)("Check for new downloads"),tooltipAttachment:xr.ZD,onPress:s?null:n}),s?o.createElement(Cr.A,{className:"ToolbarProcessSubscriptionsButton-spinner-ymigGA Spinner-spinner-XTaskc spin-spin-H8VRGl"}):o.createElement(kr,{className:"ToolbarProcessSubscriptionsButton-icon-PTiM3B PlexIcon-plexIcon-a5zCNX"}))},qr={onRefreshDownloads:v.DN},Xr=(0,l.Ng)((function(){return(0,c.Mz)(_(),(0,Or.Ay)(I.bE),((e,t)=>({canShowProcessSubscriptions:e.length>0,isProcessingSubscriptions:!!t})))}),qr)((function(e){const{className:t,canShowProcessSubscriptions:r,isProcessingSubscriptions:n,onRefreshDownloads:a}=e;return o.createElement("div",{className:t},r?o.createElement(Fr,{isProcessingSubscriptions:n,onPress:a}):null)})),Zr=(0,c.Mz)(Me.A,Oe.A,((e,t)=>{const{providers:r}=e;return r.reduce(((e,r)=>{const o=t[r].features.find((e=>e.type===Rt.A.CONTENT));return o&&null!=o.storageTotal&&(e+=o.storageTotal),e}),0)})),$r=(0,l.Ng)((function(){return(0,c.Mz)(((e,{activeSort:t})=>t),Zr,_(),(0,c.Mz)((0,Ne.A)(I.vQ),(e=>e.reduce(((e,t)=>e+t.Context.currentSize||0),0))),((e,t,r,o)=>{const n=Gt({sort:e});return{downloadTypes:r.reduce(((t,r)=>{const{type:o,subtype:n}=r.hint;if(!(n?t.find((e=>e.subtype===n)):t.find((e=>e.type===o)))){const r=Gt({type:o,subtype:n,sort:e});t.push(r)}return t}),[n]),storageTotal:t+o}}))}))((function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,downloadTypes:s,storageTotal:i,sorts:l,size:c}=e,d=(0,tr.A)(),p=(0,tr.A)(),[u,m]=(0,o.useState)(i),[y,b]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{b(!y)}),[y]),P=(0,o.useCallback)((()=>{b(!1)}),[]),w=(0,o.useCallback)((()=>{g(!f)}),[f]),h=(0,o.useCallback)((()=>{g(!1)}),[]);(0,o.useEffect)((()=>{let e=window.setTimeout((()=>{m(i)}),100);return()=>{e=window.clearTimeout(e)}}),[i]);const A=r?(0,Y.A)("All {typeTitle} Downloads",{typeTitle:Yt(r,!1)}):(0,Y.A)("All Downloads");return o.createElement(rr.A,{className:"DownloadsPageHeader-pageHeader-ZXDUnB PrimaryPageHeader-pageHeader-SBemrw PageHeader-pageHeader-e2k66t"},o.createElement(er.A,null,o.createElement(Jt.A,{"data-testid":"downloadsTypesMenuButton",hasMenu:s.length>2,id:d,isMenuOpen:y,onPress:v},A),o.createElement(Dr,{activeType:r,isOpen:y,target:d,types:s,onMenuClose:P}),c>1?o.createElement(Jt.A,{"data-testid":"downloadsSortsMenuButton",hasMenu:!0,id:p,isMenuOpen:f,onPress:w},(0,Y.A)("By {sortTitle}",{sortTitle:a.title})):null,c>1?o.createElement(gr,{activeSort:n,activeType:r,isOpen:f,selectedSort:a,sorts:l,target:p,onMenuClose:h}):null,o.createElement(Qt.A,null,c)),o.createElement(or.A,null,o.createElement("div",{className:"DownloadsPageHeader-storageTotal-zA1dwc"},(0,Y.A)("{storageTotal} Downloaded",{storageTotal:at(u)})),o.createElement(Xr,{serverEntityID:t})))})),_r="DownloadsPage-upsell-joAmi8",Yr=function(e){const{serverEntityID:t,activeType:r,activeSort:n,selectedSort:a,sorts:s,mediaSubscriptions:i,metricsPage:l,metricsProperties:c,isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:u,canShowUpsell:m,providersError:y,mediaSubscriptionsError:b}=e,[f,g]=(0,o.useState)(!1),v=(0,o.useCallback)((()=>{g(!0)}),[]),P=(0,o.useCallback)((()=>{g(!1)}),[]);if(d&&!p||u&&!i.length)return o.createElement(pe.A,null,o.createElement(ce.A,null));const w=y||b,h=i.length>0;return o.createElement(de.A,{metricsPage:l,metricsProperties:c,scrollDirection:ie.x3},h?o.createElement($r,{activeSort:n,activeType:r,selectedSort:a,serverEntityID:t,size:i.length,sorts:s}):null,o.createElement("div",{className:"DownloadsPage-downloadsPageContent-kcFCsY PageContent-pageContent-rk0p0C"},w?o.createElement(me.A,null):null,w||h?null:o.createElement(ue.A,{description:o.createElement(ne.A,{className:_r,message:(0,Y.A)('Use the {downloadIcon} button or choose "Download" from the menu to download items for offline playback.'),tags:[{unpaired:"downloadIcon",children:o.createElement(re.default,{key:"downloadIcon",align:"baseline"})}]}),iconClassName:"DownloadsPage-iconDownloadUpsell-OCqLgi",iconComponent:oe.default,kind:se.jd,title:(0,Y.A)("You have no items downloaded")},m?o.createElement(ne.A,{className:_r,message:(0,Y.A)("An active {openPlexPassLink}Plex Pass{closePlexPassLink} is required to download from a Plex Media Server."),tags:[{open:"openPlexPassLink",close:"closePlexPassLink",component:ae.A,kind:se.jd,onPress:v}]}):null),!w&&h?o.createElement(zt,{activeSort:n,items:i,metricsPage:l,metricsProperties:c,serverEntityID:t,size:i.length}):null,m?o.createElement(ye.A,{isOpen:f,origin:le.WK,onModalClose:P}):null))};var Gr=Object.defineProperty,Qr=Object.defineProperties,Jr=Object.getOwnPropertyDescriptors,eo=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,ro=Object.prototype.propertyIsEnumerable,oo=(e,t,r)=>t in e?Gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,no=(e,t)=>{var r={};for(var o in e)to.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&eo)for(var o of eo(e))t.indexOf(o)<0&&ro.call(e,o)&&(r[o]=e[o]);return r};const ao={pane:"sync"};function so(e,t){return!e&&!t||p().isEqual(e,t)}const io=(0,g.A)((e=>{const{key:t,direction:r}=e,{DESCENDING:o}=u.A.directions;return(e,n)=>{let a,s;return t===J?(a=e.hint[t].toUpperCase(),s=n.hint[t].toUpperCase()):(a=e[t],s=n[t]),a>s?r===o?-1:1:a<s?r===o?1:-1:0}})),lo={dispatchFetchProvidersWithStorage:X,dispatchInitDownloadsPage:F,dispatchRefreshDownloads:v.DN,dispatchResetDownloadsPage:q,dispatchSaveDownloadsParams:Z};class co extends o.Component{componentDidMount(){this.props.dispatchInitDownloadsPage(),this.props.dispatchFetchProvidersWithStorage(),this.props.dispatchRefreshDownloads(),this.props.shouldSaveParams&&this._saveDownloadsDefaultParams(this.props)}componentDidUpdate(e){this.props.shouldSaveParams&&!so(e.params,this.props.params)&&this._saveDownloadsDefaultParams(this.props)}componentWillUnmount(){this.props.dispatchResetDownloadsPage()}_saveDownloadsDefaultParams(e){so(e.params,e.savedDownloadsParams)||e.dispatchSaveDownloadsParams(e.params)}render(){const e=this.props,{params:t,savedDownloadsParams:r,dispatchFetchProvidersWithStorage:n,dispatchRefreshDownloads:a,dispatchInitDownloadsPage:s,dispatchResetDownloadsPage:i,dispatchSaveDownloadsParams:l}=e,c=no(e,["params","savedDownloadsParams","dispatchFetchProvidersWithStorage","dispatchRefreshDownloads","dispatchInitDownloadsPage","dispatchResetDownloadsPage","dispatchSaveDownloadsParams"]);return o.createElement(Yr,((e,t)=>Qr(e,Jr(t)))(((e,t)=>{for(var r in t||(t={}))to.call(t,r)&&oo(e,r,t[r]);if(eo)for(var r of eo(t))ro.call(t,r)&&oo(e,r,t[r]);return e})({},c),{metricsPage:b.XQ,metricsProperties:ao}))}}const po=(0,l.Ng)((function(){return(0,c.Mz)(((e,{params:t})=>t),(e=>e.ui.downloadsPage),(e=>e.downloads),y.A,_(),(0,m.A)(f.Ts),(0,m.A)(f.JZ),((e,t,r,o,n,a,s)=>{const{sort:i=""}=e;let{type:l,subtype:c}=e;const{isProvidersPending:d,isProvidersPopulated:p,providersError:u}=t,{isSubscriptionsPending:m,subscriptionsError:y}=r,b=[{key:J,descKey:`${J}:desc`,defaultDirection:G,title:(0,Y.A)("Title")},{key:ee,descKey:`${ee}:desc`,defaultDirection:Q,title:(0,Y.A)("Date Downloaded"),isDefault:!0},{key:te,descKey:`${te}:desc`,defaultDirection:Q,title:(0,Y.A)("Size on Disk")}],f=i.split(":");let g=f[0];const v=f[1];let P=b.find((e=>e.key===g));P||(P=b.find((e=>e.isDefault))),g||(g=P.key),v&&(P.direction=v);let w=[...n];if((l||c)&&(w=n.reduce(((e,t)=>{const r=t.hint.subtype===c,o=t.hint.type===l;let n=!1;return c?r&&(n=!0):o&&!t.hint.subtype&&(n=!0),n&&e.push(t),e}),[]),n.length&&!w.length)){const t=e,{type:r,subtype:o}=t;w=n,e=no(t,["type","subtype"]),l=null,c=null}const h=io(P);return w.sort(h),{selectedSort:P,sorts:b,mediaSubscriptions:w.map((e=>e.entityID)),isProvidersPending:d,isProvidersPopulated:p,isMediaSubscriptionsPending:m,canShowUpsell:!a&&!s,providersError:u,mediaSubscriptionsError:y,savedDownloadsParams:o.downloads,params:e,activeType:l,activeSubtype:c,activeSort:i}}))}),lo)(co);var uo=r(21141),mo=r(25378);const yo=function(e){const{children:t,isWaitingForEmbeddedServer:r,embeddedServerEntityID:n}=e;return r?o.createElement(pe.A,null,o.createElement(ce.A,null)):n?o.createElement(uo.A,{serverEntityID:n},t(n)):o.createElement(mo.A,null)};var bo=Object.defineProperty,fo=Object.defineProperties,go=Object.getOwnPropertyDescriptors,vo=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,ho=(e,t,r)=>t in e?bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ao=(0,c.Mz)(Me.A,((e={})=>{const{entityID:t,isProvidersPopulated:r=!1}=e;return{embeddedServerEntityID:t,isProvidersPopulated:r}})),Eo=(0,l.Ng)(Ao)((function(e){const t=e,{isProvidersPopulated:r}=t,n=((e,t)=>{var r={};for(var o in e)Po.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&vo)for(var o of vo(e))t.indexOf(o)<0&&wo.call(e,o)&&(r[o]=e[o]);return r})(t,["isProvidersPopulated"]);return o.createElement(yo,((e,t)=>fo(e,go(t)))(((e,t)=>{for(var r in t||(t={}))Po.call(t,r)&&ho(e,r,t[r]);if(vo)for(var r of vo(t))wo.call(t,r)&&ho(e,r,t[r]);return e})({},n),{isWaitingForEmbeddedServer:!r}))}));function So(){const e=(0,a.A)(),t=(0,o.useMemo)((()=>({context:(0,i.A)(e.context),type:(0,i.A)(e.type),sort:(0,i.A)(e.sort),save:(0,s.A)(e.save)})),[e]);return o.createElement(n.A,{metricsContext:t.context},o.createElement(Eo,null,(e=>o.createElement(po,{params:t,serverEntityID:e,shouldSaveParams:t.save}))))}},44874:(e,t,r)=>{r.d(t,{A:()=>a});var o=r(96540),n=r(75086);const a=function({children:e}){return o.createElement(n.A,{className:"PrimaryPageHeaderRight-pageHeaderRight-PLi1N6 PageHeaderRight-pageHeaderRight-hBWIio"},e)}},51208:(e,t,r)=>{r.d(t,{A:()=>u});var o=r(96540),n=r(90817),a=r(25378),s=r(17812),i=Object.defineProperty,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const u=function(e){const t=e,{children:r}=t,i=((e,t)=>{var r={};for(var o in e)c.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&d.call(e,o)&&(r[o]=e[o]);return r})(t,["children"]);return o.createElement(a.A,((e,t)=>{for(var r in t||(t={}))c.call(t,r)&&p(e,r,t[r]);if(l)for(var r of l(t))d.call(t,r)&&p(e,r,t[r]);return e})({className:s.A.innerEmptyPage,contentClassName:s.A.innerEmptyPageContent,scrollDirection:n.x3},i),r)}},13004:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(42731);function n(e,t){switch((0,o.KD)(e,t)){case o.S3:return 114;case o.Yc:return 64;case o.mH:return 74}}},14422:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(5556),n=r.n(o),a=r(96540),s=r(31182);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-ascending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.A.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m280 80l-200 200h160v200h80v-200h160l-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i},57567:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(5556),n=r.n(o),a=r(96540),s=r(31182);function i(e){const t=e["aria-label"],r=e.className,o=e.style,n={viewBox:"0 0 560 560",xmlns:"http://www.w3.org/2000/svg",strokeMiterlimit:"1.414",strokeLinejoin:"round",id:"plex-icon-sort-descending-560"};n["aria-hidden"]=!t,n.style=o,n.className=s.A.plexIcon+(r?" "+r:"");const i=[a.createElement.apply(a,["path",{d:"m80 280h160v-200h80v200h160l-200 200-200-200"}].concat([]))];return t&&i.unshift(a.createElement("title",null,t)),a.createElement.apply(a,["svg",n].concat(i))}i.propTypes={"aria-label":n().string,className:n().string,style:n().object};const l=i},31755:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var o=r(96540),n=r(53231);const a=(0,o.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:s},i){return o.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,n.C)({align:e,color:r,size:a}),"data-testid":s,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{d:"M36.0208 10.3995L26.1213 0.5L24 2.62132L30.3787 9H24C20.4399 9 16.9598 10.0557 13.9997 12.0335C11.0397 14.0114 8.73255 16.8226 7.37018 20.1117C6.0078 23.4008 5.65134 27.02 6.34587 30.5116C7.04041 34.0033 8.75474 37.2106 11.2721 39.7279C13.7894 42.2453 16.9967 43.9596 20.4884 44.6541C23.98 45.3487 27.5992 44.9922 30.8883 43.6298C34.1774 42.2675 36.9886 39.9604 38.9665 37.0003C40.9443 34.0402 42 30.5601 42 27H39C39 29.9667 38.1203 32.8668 36.4721 35.3336C34.8238 37.8003 32.4812 39.7229 29.7403 40.8582C26.9994 41.9935 23.9834 42.2906 21.0737 41.7118C18.1639 41.133 15.4912 39.7044 13.3934 37.6066C11.2956 35.5088 9.86701 32.8361 9.28823 29.9264C8.70945 27.0166 9.0065 24.0006 10.1418 21.2598C11.2771 18.5189 13.1997 16.1762 15.6665 14.528C18.1332 12.8797 21.0333 12 24 12H30.1777L24 18.1777L26.1213 20.299L36.0208 10.3995Z",fill:"currentColor"}))}))},56686:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var o=r(96540),n=r(53231);const a=(0,o.forwardRef)((function({align:e="none",accessibilityLabel:t,color:r="inherit",size:a="inherit",testID:s},i){return o.createElement("svg",{ref:i,"aria-hidden":!t,"aria-label":t,className:(0,n.C)({align:e,color:r,size:a}),"data-testid":s,fill:"currentColor",height:48,viewBox:"0 0 48 48",width:48,xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{clipRule:"evenodd",d:"M3 24C3 12.45 12.45 3 24 3C35.55 3 45 12.45 45 24C45 35.55 35.55 45 24 45C12.45 45 3 35.55 3 24ZM31.4246 34.253L34.253 31.4246L26.8284 24L34.253 16.5754L31.4246 13.7469L24 21.1716L16.5754 13.7469L13.7469 16.5754L21.1716 24L13.7469 31.4246L16.5754 34.253L24 26.8284L31.4246 34.253Z",fill:"currentColor",fillRule:"evenodd"}))}))}}]);