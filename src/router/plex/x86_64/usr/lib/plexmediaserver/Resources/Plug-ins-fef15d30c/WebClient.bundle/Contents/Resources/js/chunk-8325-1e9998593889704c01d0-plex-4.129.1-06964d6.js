"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[8325],{1604:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(32485),o=r.n(n),a=r(96540),i=r(61225),s=r(59154),d=r(63224),g=r(6055),l=r(48930),A=r(19348),u=r(1081),c=r(46256);const E=(0,u.Mz)(c.A,(e=>e.remotePlayer),((e,t)=>t?t.volume:e.volume));var f=r(61435),m=r(21045);const p=["af","am","ar","ar_eg","ar_sa","eu","be","bn","bg","ca","zh","zh_cn","zh_hk","zh_tw","hr","cs","da","nl","en","en_au","en_ca","en_gb","en_ie","en_in","en_sg","en_za","et","fa","fil","fi","fr","fr_ca","fr_ch","gl","de","de_at","el","gu","he","hi","hu","is","id","it","ja","kn","ko","lo","lv","ln","lt","ms","ml","mr","no","pl","pt","pt_br","pt_pt","ro","ru","sr","sk","sl","es","es_419","es_ar","es_cl","es_co","es_cr","es_do","es_ec","es_sv","es_gt","es_hn","es_mx","es_ni","es_pa","es_pe","es_pr","es_py","es_us","es_uy","es_ve","sw","sv","gsw","tl","ta","te","th","tr","uk","ur","vi","zu"],v=(0,u.Mz)(m.A,(e=>function(e){const t=e.toLowerCase().replace(/-/g,"_");return p.includes(t)?t:"en"}(e)));var w=r(88941),y=r(24714),T=r(93915);function M(e){const t=Math.round(e%3600),r=Math.floor(e/3600),n=Math.floor(t/60),o=t%60;return`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(o).padStart(2,"0")} (${e}s)`}function S(e){return t=>{var r,n;const o=t,a=t;try{const e=null==(r=o.getAdData)?void 0:r.call(o),t=(null==e?void 0:e.adError)||(null==(n=a.getError)?void 0:n.call(a));if(t){const e={message:t.getMessage(),errorCode:t.getErrorCode(),vastErrorCode:t.getVastErrorCode()};g.A.error("[IMA SDK] Error: %s from event %s: %o",t.getType(),o.type,e)}else(0,y.A)()&&function(e){var t,r;const n=null==(t=e.getAd)?void 0:t.call(e),o=null==(r=e.getAdData)?void 0:r.call(e),a=null==n?void 0:n.getAdPodInfo();if(a)try{const t={adPosition:a.getAdPosition(),isBumper:a.getIsBumper(),maxDuration:a.getMaxDuration(),podIndex:a.getPodIndex(),timeOffset:a.getTimeOffset(),totalAds:a.getTotalAds()};(0,g.A)("[IMA SDK] Event %s (adPodInfo): %o",e.type,t)}catch(e){g.A.warn("[IMA SDK] Cannot log adPodInfo",null==e?void 0:e.message)}if(o&&(0,g.A)("[IMA SDK] Event %s (adData): %o",e.type,o),n)try{const t={adSystem:n.getAdSystem(),advertiserName:n.getAdvertiserName(),apiFramework:n.getApiFramework(),contentType:n.getContentType(),creativeAdId:n.getCreativeAdId(),creativeId:n.getCreativeId(),dealId:n.getDealId(),description:n.getDescription(),duration:n.getDuration(),height:n.getHeight(),mediaUrl:n.getMediaUrl(),minSuggestedDuration:n.getMinSuggestedDuration(),skipTimeOffset:n.getSkipTimeOffset(),surveyUrl:n.getSurveyUrl(),title:n.getTitle(),traffickingParameters:n.getTraffickingParameters(),traffickingParametersString:n.getTraffickingParametersString(),uiElements:n.getUiElements(),universalAdIdRegistry:n.getUniversalAdIdRegistry(),universalAdIdValue:n.getUniversalAdIdValue(),vastMediaHeight:n.getVastMediaHeight(),vastMediaWidth:n.getVastMediaWidth(),width:n.getWidth(),wrapperAdIds:n.getWrapperAdIds(),wrapperAdSystems:n.getWrapperAdSystems(),wrapperCreativeIds:n.getWrapperCreativeIds(),isLinear:n.isLinear()};(0,g.A)("[IMA SDK] Event %s (ad):",e.type,t)}catch(e){g.A.warn("[IMA SDK] Cannot log ad info",null==e?void 0:e.message)}}(o)}catch(e){g.A.warn("[IMA SDK] Event:",null==o?void 0:o.type,null==e?void 0:e.message)}e(t)}}const h={adContainer:"ImaPlayer-adContainer-pyxPYF",hasAd:"ImaPlayer-hasAd-kF60Qd",hasNoAd:"ImaPlayer-hasNoAd-PDk1sC"},_=void 0,I=null,D=1009;function C({edgeGutterX:e,edgeGutterY:t,height:r,isFullscreen:n,isIdle:u,isMiniPlayer:c,isStackedAbove:m,placement:p,playerType:C,statusOverlayClassName:L,url:R,width:P,onAdChange:O,onPositionMillisecondsChange:k}){const b=(0,i.wA)(),[N,U]=(0,a.useState)(_),[V,F]=(0,a.useState)(),[x,z]=(0,a.useState)(null),[G,W]=(0,s.A)(),[K,B]=(0,a.useState)(l.kF),[$,H]=(0,a.useState)(l.O3),[j,Q]=(0,a.useState)(l.sf),q=(0,i.d4)((0,f.A)(C,"durationSeconds")),Y=(0,i.d4)((0,f.A)(C,"isPaused")),X=(0,i.d4)(v),J=(0,i.d4)((0,f.A)(C,"positionSeconds")),Z=(0,i.d4)(E),ee=function(e,t,r=!0){const n=(0,a.useRef)({currentTime:e,duration:t});return(0,a.useEffect)((()=>{r&&e>=0&&(n.current.currentTime=e)}),[r,e]),(0,a.useEffect)((()=>{r&&t>=0&&(n.current.duration=t)}),[r,t]),n.current}(J,q,!u),te=function(e){const[t,r]=(0,a.useState)();return(0,a.useEffect)((()=>{e&&((0,y.A)()&&(0,g.A)("[IMA] Creating AdDisplayContainer"),r(new window.google.ima.AdDisplayContainer(e)))}),[e]),(0,a.useEffect)((()=>(t&&((0,y.A)()&&(0,g.A)("[IMA] Initializing AdDisplayContainer"),t.initialize()),()=>{t&&((0,y.A)()&&(0,g.A)("[IMA] Destroying AdDisplayContainer"),t.destroy())})),[t]),t}(x),re=function(e){const[t,r]=(0,a.useState)();return(0,a.useEffect)((()=>{e&&((0,y.A)()&&(0,g.A)("[IMA] Creating AdsLoader"),r(new window.google.ima.AdsLoader(e)))}),[e]),(0,a.useEffect)((()=>()=>{t&&((0,y.A)()&&(0,g.A)("[IMA] Destroying AdsLoader"),t.destroy())}),[t]),t}(te),ne=function(e,t,r,n){const[o,i]=(0,a.useState)();return(0,a.useEffect)((()=>{if(!t)return;const o=S((e=>{const t=e.getError();n(new Error(t.getMessage()))})),a=S((e=>{(0,y.A)()&&(0,g.A)("[IMA] Creating AdsManager"),i(e.getAdsManager(r))})),s=new window.google.ima.AdsRequest;return s.adTagUrl=T.A.join(e,{vpaid:1}),s.forceNonLinearFullSlot=!0,s.linearAdSlotWidth=1280,s.linearAdSlotHeight=720,s.setAdWillAutoPlay(!0),s.setAdWillPlayMuted(!1),t.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,o),t.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,a),(0,y.A)()&&(0,g.A)("[IMA] Loading ads:",s.adTagUrl),t.requestAds(s),()=>{t.removeEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,o),t.removeEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,a)}}),[t,r,e,n]),(0,a.useEffect)((()=>{if(!o)return;const e=S((t=>{o.removeEventListener(t.type,e),(0,y.A)()&&(0,g.A)("[IMA] Enabling preloading");const r=new window.google.ima.AdsRenderingSettings;r.enablePreloading=!0,o.updateAdsRenderingSettings(r)}));return(0,y.A)()&&(0,g.A)("[IMA] Starting AdsManager"),(0,y.A)()&&(0,g.A)("[IMA] CuePoints:",o.getCuePoints().map(M).join(", ")),o.addEventListener(window.google.ima.AdEvent.Type.LOADED,e),o.init(1280,720,window.google.ima.ViewMode.NORMAL),o.start(),()=>{o.removeEventListener(window.google.ima.AdEvent.Type.LOADED,e),(0,y.A)()&&(0,g.A)("[IMA] Destroying AdsManager"),o.destroy()}}),[o]),o}(R,re,ee,F),oe=(0,a.useCallback)((e=>{z(e)}),[]);(0,a.useEffect)((()=>{(0,y.A)()&&(0,g.A)("[IMA] Setting locale",X),window.google.ima.settings.setLocale(X)}),[X]),(0,a.useEffect)((()=>{N!==_&&(N===I?(B(l.kF),H(l.O3),F(void 0),Q(l.sf)):(B(N.displayIndex),H(N.displayTotal)),(0,y.A)()&&(0,g.A)("[IMA] Changing ad to",N),O(N))}),[N,O]),(0,a.useEffect)((()=>{V&&(g.A.error("[IMA] Error",...function(e){if(function(e){const t=e;return!!(t.getMessage||t.getErrorCode||t.getVastErrorCode)}(e)){const t=e;let r,n,o;try{n=t.getMessage()}catch(e){g.A.error("[IMA] error getting message from AdError",e.message)}try{r=t.getErrorCode()}catch(e){g.A.error("[IMA] error getting error code from AdError",e.message)}try{o=t.getVastErrorCode()}catch(e){g.A.error("[IMA] error getting VAST error code from AdError",e.message)}return[n||"Unknown error",`(IMA:${r}, VAST:${o})`]}return[e.message]}(V)),N===I?O(I):U(I))}),[N,V,O]),(0,a.useEffect)((()=>{null==ne||ne.setVolume(Z/100)}),[ne,Z]),(0,a.useEffect)((()=>{null==ne||ne.resize(W.width||1280,W.height||720,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),[ne,n,W]),(0,a.useEffect)((()=>{Y?null==ne||ne.pause():null==ne||ne.resume()}),[ne,Y]),(0,a.useEffect)((()=>{const e=S((e=>{var t;const r=e.getAd(),n=null==r?void 0:r.getAdPodInfo();switch(e.type){case window.google.ima.AdEvent.Type.AD_BUFFERING:b((0,d.bp)({playerType:C,isBuffering:!0}));break;case window.google.ima.AdEvent.Type.AD_PROGRESS:b((0,d.bp)({playerType:C,isBuffering:!1})),k(1e3*e.getAdData().currentTime);break;case window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED:case window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:U(I);break;case window.google.ima.AdEvent.Type.LOADED:Q(null!=(t=null==n?void 0:n.getTimeOffset())?t:-1);break;case window.google.ima.AdEvent.Type.STARTED:Y&&(null==ne||ne.pause()),U(function(e){if(!e)return null;const t=e.getAdPodInfo();return{clicksThrough:!0,displayIndex:t.getAdPosition(),displayTotal:t.getTotalAds(),duration:e.getDuration(),height:e.getHeight(),mimeType:e.getContentType(),timeOffset:t.getTimeOffset(),width:e.getWidth()}}(r));break;case window.google.ima.AdEvent.Type.LOG:{const t=e.getAdData().adError;t&&t.getErrorCode()===D&&(g.A.warn("[IMA] Manually handling empty VAST"),F(t));break}}})),t=[window.google.ima.AdEvent.Type.AD_BUFFERING,window.google.ima.AdEvent.Type.AD_PROGRESS,window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,window.google.ima.AdEvent.Type.LOADED,window.google.ima.AdEvent.Type.LOG,window.google.ima.AdEvent.Type.STARTED,window.google.ima.AdEvent.Type.COMPLETE,window.google.ima.AdEvent.Type.IMPRESSION];return t.forEach((t=>{null==ne||ne.addEventListener(t,e)})),()=>{t.forEach((t=>{null==ne||ne.removeEventListener(t,e)}))}}),[ne,b,Y,k,C]),(0,a.useEffect)((()=>{const e=S((e=>{F(e.getError())}));return null==ne||ne.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,e),()=>{null==ne||ne.removeEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,e)}}),[ne]);const ae=(0,A.A)(r,P,p,e,t,m);return a.createElement("div",{style:ae},a.createElement("div",{ref:(0,w.A)(oe,G),className:o()(h.adContainer,N===I?h.hasNoAd:h.hasAd)}),c?null:a.createElement(l.Ay,{className:L,displayIndex:K,displayTotal:$,isAdCountdownTimerEnabled:!1,secondsUntilAd:j-J}))}}}]);