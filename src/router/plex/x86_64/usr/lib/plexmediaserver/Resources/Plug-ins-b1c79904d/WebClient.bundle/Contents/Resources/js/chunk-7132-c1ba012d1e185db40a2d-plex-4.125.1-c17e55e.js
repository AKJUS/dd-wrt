"use strict";(self.webpackChunkplex_web_client=self.webpackChunkplex_web_client||[]).push([[7132],{64084:(e,t,r)=>{function n(e,t){return e&&t?`${t} (${e})`:t||e}r.d(t,{c:()=>n})},68580:(e,t,r)=>{r.d(t,{c:()=>s});var n=r(59396);const s=function(e){const t=e.activeConnection;let r,s=!1;return e.isConnected&&t?r=e.isOutOfDate?(0,n.c)("Needs Update"):t.relay?(0,n.c)("Indirect"):t.isPrivate?(0,n.c)("Nearby"):(0,n.c)("Remote"):e.isRelayed?r=(0,n.c)("Indirect"):e.isUnavailable?r=(0,n.c)("Unavailable"):e.isUnauthorized?r=(0,n.c)("Unauthorized"):(s=!0,r=(0,n.c)("Connecting")),{isConnecting:s,status:r}}},87132:(e,t,r)=>{r.r(t),r.d(t,{default:()=>yt});var n=r(11504),s=r(65026),i=r(28796),o=r(27876),c=r(57864),a=r(46028),l=r(51328);const p=(0,a.c)((0,c.M3)(l.c,(e=>e.reduce(((e,t)=>{const{entityID:r,machineIdentifier:n}=t;return r&&n&&e.push({entityID:r,machineIdentifier:n}),e}),[]))),(e=>e));function u(e){return e.user.experienceSettings.homeSettings.preferredServerID}var d=r(95348),m=r(81764),h=r(89448),f=r(62900),v=r(75372),S=r(53728),y=r(59501),b=r(92076),P=r(1744),I=r(26240),E=r(14252),g=r(33808),x=r(12488),C=r(32516);const N=(0,x.c)(C.c,(({homeSettings:e})=>e)),O=(0,c.M3)(N,(e=>e.servers),g.c,((e,t,r)=>{const{preferredServerID:n}=e;if(n)for(let e=0,s=t.length;e<s;e++){const s=r[t[e]];if(s.machineIdentifier===n)return s}}));var D=r(37660),B=r(35860),w=r(98248),F=r(93268),j=r(11695),k=r(43848),R=r(59396),T=r(84536),U=r(93952),H=r(55588),M=r(21528),A=Object.defineProperty,_=Object.defineProperties,z=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,X=(e,t,r)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Y=(e,t)=>{for(var r in t||(t={}))W.call(t,r)&&X(e,r,t[r]);if(K)for(var r of K(t))V.call(t,r)&&X(e,r,t[r]);return e},q=(e,t)=>_(e,z(t)),Q=(e,t,r)=>(X(e,"symbol"!=typeof t?t+"":t,r),r);class G extends n.Component{constructor(e,t){super(e,t),Q(this,"store"),Q(this,"unsubscribe"),Q(this,"onChange",(e=>{const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),n=Y({},t);r.forEach((t=>{const r=n[t];n[t]=q(Y({},r),{value:e})})),this.store.dispatch(T.ay.replaceState(n))})),Q(this,"onFormStoreChange",(()=>{const{names:e}=this.props;if(!e.length)return;const t=this.store.getState(),r=Object.keys(t).filter((e=>this.props.names.includes(e))),[n]=r,s=t[n].value,i=function(e,t,r){return e.every((e=>{const n=r[e];return!n||n.value===t}))}(r,s,t);this.setState({value:i?s:null})})),this.store=this.context.formStore,this.state={value:!0}}UNSAFE_componentWillMount(){this.unsubscribe=this.store.subscribe(this.onFormStoreChange)}componentWillUnmount(){this.unsubscribe&&this.unsubscribe()}render(){const e=this.props,{names:t,onChange:r}=e,s=((e,t)=>{var r={};for(var n in e)W.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&K)for(var n of K(e))t.indexOf(n)<0&&V.call(e,n)&&(r[n]=e[n]);return r})(e,["names","onChange"]);return t.length?n.createElement(U.c,q(Y({},s),{value:this.state.value,onChange:(0,H.c)(this.onChange,r)})):null}}Q(G,"contextTypes",{formStore:M.c});const J=G;function L(e){const{className:t,titleBarClassName:r,titleTextClassName:s,scrollerClassName:i,title:o,rightTitle:c,children:a}=e;return n.createElement("div",{className:t},n.createElement("div",{className:r},n.createElement("span",{className:s},o),c),n.createElement(f.c,{className:i},a))}L.defaultProps={className:"FirstRunExperienceActionsContainer-container-ny0mbu",titleBarClassName:"FirstRunExperienceActionsContainer-titleBar-VHybrq",titleTextClassName:"FirstRunExperienceActionsContainer-titleText-jyPdKj",scrollerClassName:"FirstRunExperienceActionsContainer-scroller-y2WlYD Scroller-vertical-nKq0Q8"};const Z=L;var $=r(76220),ee=r(1292),te=r(71500),re=r(24808);const ne={container:"FirstRunExperienceStep-container-CS60ox",actions:"FirstRunExperienceStep-actions-gY3hXF",stepContainer:"FirstRunExperienceStep-stepContainer-wQawUg",stepText:"FirstRunExperienceStep-stepText-NTZbsm",stepHeading:"FirstRunExperienceStep-stepHeading-J6noxn",stepBody:"FirstRunExperienceStep-stepBody-gJiLmC",stepIcon:"FirstRunExperienceStep-stepIcon-Nw5HXA",activeStepIcon:"FirstRunExperienceStep-activeStepIcon-SxIbcv FirstRunExperienceStep-stepIcon-Nw5HXA",stepButton:"FirstRunExperienceStep-stepButton-yDEnXT"};var se=Object.defineProperty,ie=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,ae=(e,t,r)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,le=(e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&ae(e,r,t[r]);if(ie)for(var r of ie(t))ce.call(t,r)&&ae(e,r,t[r]);return e},pe=(e,t)=>{var r={};for(var n in e)oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&ie)for(var n of ie(e))t.indexOf(n)<0&&ce.call(e,n)&&(r[n]=e[n]);return r};function ue(e){const{step:t,isActive:r,onPress:s}=e,i=(0,n.useCallback)((()=>{s(t)}),[s,t]);return n.createElement(te.c,{className:r?ne.activeStepIcon:ne.stepIcon,onPress:i},t)}function de(e){const t=e,{className:r,actionsClassName:s,stepContainerClassName:i,steps:o,step:c,stepHeadingText:a,stepBodyText:l,stepButtonBackText:p,stepButtonNextText:u,children:d,component:m,onButtonBackPress:h,onButtonNextPress:f,onStepPress:v}=t,S=pe(t,["className","actionsClassName","stepContainerClassName","steps","step","stepHeadingText","stepBodyText","stepButtonBackText","stepButtonNextText","children","component","onButtonBackPress","onButtonNextPress","onStepPress"]),y=$.c.prop("X-Plex-Product");return n.createElement(m,le({className:r},S),n.createElement("div",{className:s},d),n.createElement("div",{className:i},n.createElement("div",{className:ne.stepText},(0,R.c)("{productName} Setup",{productName:y}),Array.from(Array(o),((e,t)=>t+1)).map((e=>n.createElement(ue,{key:e,isActive:c===e,step:e,onPress:v})))),n.createElement("h3",{className:ne.stepHeading},a),n.createElement("p",{className:ne.stepBody},l),p?n.createElement(ee.c,{className:ne.stepButton,onPress:h},p):null,n.createElement(ee.c,{className:ne.stepButton,kind:re.ac,type:"submit",onPress:f},u)))}de.defaultProps={className:ne.container,actionsClassName:ne.actions,stepContainerClassName:ne.stepContainer,component:function(e){var t=e,{children:r}=t,s=pe(t,["children"]);return n.createElement("div",le({},s),r)},steps:2,step:1};const me=de;var he=r(4304),fe=r(4412);var ve=Object.defineProperty,Se=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Pe=(e,t,r)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Ie=(0,he.c)((function(e){const t=e,{source:r,name:s}=t,i=((e,t)=>{var r={};for(var n in e)ye.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Se)for(var n of Se(e))t.indexOf(n)<0&&be.call(e,n)&&(r[n]=e[n]);return r})(t,["source","name"]);return n.createElement("label",{className:"SelectSourceItemInput-sourceItem-ZECmgr",htmlFor:s},n.createElement("span",{className:"SelectSourceItemInput-sourceTitle-lbHYK9"},n.createElement("span",{className:"SelectSourceItemInput-sourceIconContainer-hvrz7k"},n.createElement(fe.c,{source:r})),r.title),n.createElement(U.c,((e,t)=>{for(var r in t||(t={}))ye.call(t,r)&&Pe(e,r,t[r]);if(Se)for(var r of Se(t))be.call(t,r)&&Pe(e,r,t[r]);return e})({inputClassName:"SelectSourceItemInput-input-luiKcA CheckInput-input-dUDRsF",name:s},i)))})),Ee=function(e){const{isPending:t,steps:r,sources:s,hiddenDirectoryIDs:i,onSubmit:o,onButtonBackPress:c,onStepPress:a}=e;return t?n.createElement(v.c,null):n.createElement(me,{component:T.cp,step:2,stepBodyText:(0,R.c)("Choose what you’d like to have in your sidebar navigation menu. (You’ll always have easy access to everything, so you can make changes and further customize your menu later.)"),stepButtonBackText:r>1?(0,R.c)("Go Back"):void 0,stepButtonNextText:(0,R.c)("Finish Setup"),stepHeadingText:(0,R.c)("Customize your Media"),steps:r,onButtonBackPress:c,onStepPress:a,onSubmit:o},n.createElement(Z,{rightTitle:s.length?n.createElement(J,{inputClassName:"SelectNavigationStep-input-HAIipV CheckInput-input-dUDRsF",name:"allSources",names:s.map((e=>e.key))}):null,title:(0,R.c)("Pinned Sources")},s.map((e=>n.createElement(Ie,{key:e.key,initialValue:!i.includes(e.directoryID),name:e.key,source:e})))))};var ge=Object.defineProperty,xe=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,Be=(e,t,r)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const we=(0,c.M3)(O,b.c,((e,t)=>(e?e.providers:[]).map((e=>t[e])))),Fe=(0,c.M3)(I.c,(e=>e.filter((e=>!/.*(staging|dev)$/.test(e.identifier)))));function je(e){return t=this,null,r=function*(){try{return(yield k.c.get("/library/sections",{server:(0,j.c)(e),params:{includePreferences:1}})).data.MediaContainer.Directory.reduce(((e,t)=>(t.Preferences.Setting.some((e=>"hidden"===e.id&&"0"!==e.value))&&e.push(t.key),e)),[])}catch(e){return[]}},new Promise(((e,n)=>{var s=e=>{try{o(r.next(e))}catch(e){n(e)}},i=e=>{try{o(r.throw(e))}catch(e){n(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,i);o((r=r.apply(t,null)).next())}));var t,r}function ke(e,t,r){return t.reduce(((t,n)=>{const s=(0,F.c)(n),i=(0,w.c)({sourceServer:e,sourceProvider:n,directories:s&&s.directories,hasHybridGuide:r});return t.push(...i),t}),[])}const Re={dispatchSetupSources:m.iU};class Te extends n.Component{constructor(e){var t,r;super(e),r=e=>{const t=this.props.sources.filter((({key:t})=>e[t]));this.props.dispatchSetupSources({sources:t})},Be(this,"symbol"!=typeof(t="onSubmit")?t+"":t,r),this.state={isFetchingHiddenDirectoryIDs:!0,hiddenDirectoryIDs:{}}}componentDidMount(){this.props.server&&je(this.props.server).then((e=>{this.setState({isFetchingHiddenDirectoryIDs:!1,hiddenDirectoryIDs:e})}))}componentDidUpdate(){this.state.isFetchingHiddenDirectoryIDs&&this.props.server&&je(this.props.server).then((e=>{this.setState({isFetchingHiddenDirectoryIDs:!1,hiddenDirectoryIDs:e})})),this.props.hasCompletedSetup&&this.props.onEndFirstRunExperience(),this.props.isPending||0!==this.props.sources.length||this.props.dispatchSetupSources({sources:[]})}render(){const e=this.props,{isPending:t,sources:r,onEndFirstRunExperience:s,dispatchSetupSources:i}=e,o=((e,t)=>{var r={};for(var n in e)Oe.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Ne)for(var n of Ne(e))t.indexOf(n)<0&&De.call(e,n)&&(r[n]=e[n]);return r})(e,["isPending","sources","onEndFirstRunExperience","dispatchSetupSources"]);return n.createElement(Ee,(c=((e,t)=>{for(var r in t||(t={}))Oe.call(t,r)&&Be(e,r,t[r]);if(Ne)for(var r of Ne(t))De.call(t,r)&&Be(e,r,t[r]);return e})({hiddenDirectoryIDs:this.state.hiddenDirectoryIDs,isPending:t||this.state.isFetchingHiddenDirectoryIDs||0===r.length,sources:r},o),a={onSubmit:this.onSubmit},xe(c,Ce(a))));var c,a}}const Ue=(0,o.Ul)((function(){return(0,c.M3)(O,we,E.c,Fe,C.c,P.c,((e,t,r,n,s,i)=>{const o=ke(e,t,i),c=ke(r,n,i),{sidebarSettings:{hasCompletedSetup:a}}=s,{watchlistSources:l,otherCloudSources:p}=c.reduce(((e,t)=>(t.providerIdentifier===B.Im&&t.directoryID===D._w?e.watchlistSources.push(t):e.otherCloudSources.push(t),e)),{watchlistSources:[],otherCloudSources:[]});return{server:e,isPending:!(!e||e.connectionTestResult!==y.ot.PENDING),sources:[...l,...o,...p],hasCompletedSetup:a}}))}),Re)(Te);var He=r(3268),Me=r.n(He),Ae=r(15072),_e=r(47884),ze=r(89080),Ke=r.n(ze),We=r(43108),Ve=r(64084),Xe=r(68580),Ye=r(92572),qe=r(74672);var Qe=Object.defineProperty,Ge=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,Le=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,et=(e,t,r)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const tt=(0,o.Ul)((function(){return(0,Ae.c)((0,_e.c)(),["activeConnection","friendlyName","sourceTitle","isConnected","isOutOfDate","isRelayed","isSecure","isShared","isUnavailable"])}),(function(e,t){return{onPress(){t.onPress({entityID:t.serverEntityID,machineIdentifier:t.machineIdentifier})}}}))((function(e){const{isSelected:t,isUnavailable:r,onPress:s}=e,i=(0,Ve.c)((0,We.c)(e),(0,Xe.c)(e).status);return n.createElement(te.c,{className:Ke()("SelectPreferredServerItem-serverButton-VmKM_j",t&&"SelectPreferredServerItem-isSelected-aZkc14",r&&"SelectPreferredServerItem-isUnavailable-govWpw"),onPress:s},n.createElement("span",{className:"SelectPreferredServerItem-titles-AsWJhf"},n.createElement("span",{className:"SelectPreferredServerItem-title-IPFLVg"},(0,Ye.c)(e)),n.createElement("span",{className:"SelectPreferredServerItem-details-QN4Qet"},i)),t?n.createElement(qe.c,{"aria-label":(0,R.c)("Selected"),className:"SelectPreferredServerItem-serverMenuIcon-mbWPsv"}):null)}));var rt;tt.propTypes=(rt=((e,t)=>{for(var r in t||(t={}))Ze.call(t,r)&&et(e,r,t[r]);if(Le)for(var r of Le(t))$e.call(t,r)&&et(e,r,t[r]);return e})({},tt.propTypes),Ge(rt,Je({machineIdentifier:Me().string.isRequired,serverEntityID:Me().string.isRequired})));const nt=tt,st=function(e){const{preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s,onButtonNextPress:i,onStepPress:o}=e;return n.createElement(me,{step:1,stepBodyText:(0,R.c)("It looks like you have access to more than one Plex Media Server. Choose your preferred server, and we’ll use it to build your home screen."),stepButtonNextText:(0,R.c)("Continue"),stepHeadingText:(0,R.c)("Choose your Preferred Server"),onButtonNextPress:i,onStepPress:o},n.createElement(Z,{title:(0,R.c)("Plex Media Servers")},r.map((e=>n.createElement(nt,{key:e.entityID,isSelected:t&&t.machineIdentifier===e.machineIdentifier,machineIdentifier:e.machineIdentifier,serverEntityID:e.entityID,onPress:s})))))};var it=Object.defineProperty,ot=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ut=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t,r)=>(ut(e,"symbol"!=typeof t?t+"":t,r),r);function mt(e,t){return!e&&t.length>0}class ht extends n.Component{constructor(e,t){super(e,t),dt(this,"onNextStepPress",(()=>{this.setState((e=>({step:Math.max(2,e.step+1)})))})),dt(this,"onBackStepPress",(()=>{this.setState((e=>({step:Math.min(1,e.step-1)})))})),dt(this,"onStepPress",(e=>{this.setState({step:e})})),dt(this,"onEndFirstRunExperience",(()=>{const{preferredServerIdentifiers:e,onEndFirstRunExperience:t}=this.props;t(e?{preferredServerEntityID:e.entityID,preferredServerInteraction:e.machineIdentifier!==this.state.initialDefaultPreferredServerIdentifier}:{})})),this.state={step:1}}componentDidMount(){(0,h.SS)((()=>{this.props.onResetCustomization()})),this._maybeCallOnSavePreferredServer(((e,t)=>ot(e,ct({preferredServerIdentifiers:null})))(((e,t)=>{for(var r in t||(t={}))lt.call(t,r)&&ut(e,r,t[r]);if(at)for(var r of at(t))pt.call(t,r)&&ut(e,r,t[r]);return e})({},this.props)))}componentDidUpdate(){this._maybeCallOnSavePreferredServer(this.props)}_maybeCallOnSavePreferredServer(e){const{isPending:t,preferredServerIdentifiers:r,serverIdentifiers:n,onSavePreferredServer:s}=e;if(t)return;const i=function(e,t){return e?e.machineIdentifier:t.length>0?t[0].machineIdentifier:void 0}(r,n);!this.state.initialDefaultPreferredServerIdentifier&&i&&this.setState({initialDefaultPreferredServerIdentifier:i}),mt(r,n)&&s({machineIdentifier:i})}render(){const{isPending:e,preferredServerIdentifiers:t,serverIdentifiers:r,onSavePreferredServer:s}=this.props,{step:i}=this.state,o=r.length<2;return e||mt(t,r)?n.createElement(S.c,null,n.createElement(v.c,null)):n.createElement(f.c,{className:"FirstRunExperiencePage-container-dTL3Ek"},1!==i||o?n.createElement(Ue,{steps:o?0:2,onButtonBackPress:this.onBackStepPress,onEndFirstRunExperience:this.onEndFirstRunExperience,onStepPress:this.onStepPress}):n.createElement(st,{preferredServerIdentifiers:t,serverIdentifiers:r,onButtonNextPress:this.onNextStepPress,onSavePreferredServer:s,onStepPress:this.onStepPress}))}}const ft=ht,vt={onSavePreferredServer:m.iY,onEndFirstRunExperience:m.Ks,onResetCustomization:m.AF},St=(0,o.Ul)((function(){return(0,c.M3)(d.c,u,p,((e,t,r)=>({isPending:!e,preferredServerIdentifiers:t?r.find((e=>e.machineIdentifier===t)):void 0,serverIdentifiers:r})))}),vt)(ft);function yt(){return n.createElement("div",{className:s._},n.createElement(i.c,null,n.createElement(St,null)))}}}]);